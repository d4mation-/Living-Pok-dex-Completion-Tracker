{"version":3,"sources":["script.js","websocket.js","socket.io-stream.js","foundation.core.js","foundation.util.keyboard.js","foundation.util.box.js","foundation.util.nest.js","foundation.util.mediaQuery.js","foundation.util.triggers.js","foundation.util.motion.js","foundation.dropdownMenu.js","foundation.offcanvas.js","foundation.sticky.js","foundation.magellan.js","common.js"],"names":["_classCallCheck","instance","Constructor","TypeError","updatePokedexDisplay","nationalDex","caught","pokemonGeneration","whichGeneration","$","hasClass","currentGen","text","parseInt","addClass","removeClass","generations","gen1","start","end","gen2","gen3","gen4","gen5","gen6","startOfGen","_typeof","Symbol","iterator","obj","constructor","f","exports","module","define","amd","g","window","global","self","this","ss","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","./lib","2","Buffer","BlobReadStream","blob","options","Readable","slice","webkitSlice","mozSlice","fileReader","FileReader","onload","bind","onerror","util","inherits","prototype","_read","size","chunk","readAsArrayBuffer","push","_onload","Uint8Array","target","result","_onerror","err","error","emit","buffer","component-bind","stream","3","lookup","sio","forceBase64","_streamSocket","Socket","IOStream","createStream","createBlobReadStream","./blob-read-stream","./iostream","./socket","4","super_","id","uuid","socket","pushBuffer","writeBuffer","_readable","_writable","destroyed","allowHalfOpen","on","_onfinish","_onend","Duplex","debug","destroy","readable","writable","cleanup","shift","_onread","write","_write","encoding","callback","_onwrite","ret","_end","_done","_writableState","ended","_readableState","endEmitted","read","finished","remote","_error","./uuid","5","Encoder","EventEmitter","Decoder","Array","encode","v","encodeStream","isArray","encodeArray","encodeObject","$stream","arr","len","k","hasOwnProperty","decode","decodeStream","decodeArray","decodeObject","events","6","streams","encoder","parser","decoder","eventName","event","$emit","type","indexOf","apply","arguments","_stream","listener","_onstream","args","ack","concat","isBuffer","toString","toArrayBuffer","message","onstream","ArrayBuffer","_ondisconnect","_onencode","_ondecode","./parser","7","b","Math","random","replace","8","9","arg","parent","undefined","fromNumber","fromString","fromObject","that","allocate","checked","TYPED_ARRAY_SUPPORT","string","byteLength","object","fromBuffer","fromArray","fromTypedArray","fromArrayLike","fromJsonObject","copy","array","data","_augment","_isBuffer","fromPool","poolSize","rootParent","kMaxLength","RangeError","SlowBuffer","subject","buf","String","utf8ToBytes","base64ToBytes","hexWrite","offset","Number","remaining","strLen","parsed","substr","isNaN","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64Slice","base64","fromByteArray","utf8Slice","res","tmp","min","decodeUtf8Char","fromCharCode","asciiSlice","binarySlice","hexSlice","out","toHex","utf16leSlice","bytes","checkOffset","ext","checkInt","value","max","objectWriteUInt16","littleEndian","j","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","str","stringtrim","INVALID_BASE64_RE","trim","units","Infinity","codePoint","leadSurrogate","charCodeAt","byteArray","c","hi","lo","toByteArray","src","dst","decodeURIComponent","INSPECT_MAX_BYTES","foo","subarray","compare","x","y","isEncoding","toLowerCase","list","pos","item","loweredCase","equals","inspect","match","join","val","byteOffset","arrayIndexOf","foundIndex","get","console","log","readUInt8","set","writeUInt8","isFinite","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","target_start","_set","fill","BP","toLocaleString","base64-js","is-array","10","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","charAt","Arr","uint8ToBase64","uint8","num","tripletToBase64","temp","extraBytes","output","base64js","11","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","d","NaN","rt","abs","LN2","12","Object","13","_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","er","handler","listeners","addListener","newListener","warned","trace","once","removeListener","fired","position","splice","removeAllListeners","key","listenerCount","emitter","14","create","ctor","superCtor","enumerable","configurable","TempCtor","15","16","drainQueue","draining","currentQueue","queue","noop","process","nextTick","fun","setTimeout","title","browser","env","argv","version","versions","off","binding","name","cwd","chdir","dir","umask","17","./lib/_stream_duplex.js","18","Writable","onend","forEach","xs","objectKeys","keys","method","./_stream_readable","./_stream_writable","_process","core-util-is","19","PassThrough","Transform","_transform","cb","./_stream_transform","20","ReadableState","hwm","highWaterMark","defaultHwm","objectMode","pipes","pipesCount","flowing","reading","sync","needReadable","emittedReadable","readableListening","readableObjectMode","defaultEncoding","ranOut","awaitDrain","readingMore","StringDecoder","Stream","readableAddChunk","state","addToFront","chunkInvalid","isNullOrUndefined","onEofChunk","unshift","emitReadable","maybeReadMore","needMoreData","roundUpToNextPowerOf2","MAX_HWM","p","howMuchToRead","isNull","isString","emitReadable_","flow","maybeReadMore_","pipeOnDrain","EE","resume","resumeScheduled","resume_","fromList","stringMode","cpy","endReadable","debuglog","setEncoding","enc","nOrig","doRead","pipe","dest","pipeOpts","onunpipe","onclose","onfinish","ondrain","ondata","needDrain","pause","unpipe","doEnd","stdout","stderr","endFn","dests","ev","fn","wrap","paused","_fromList","./_stream_duplex","isarray","string_decoder/","21","TransformState","afterTransform","needTransform","transforming","writecb","writechunk","ts","_transformState","rs","_flush","done","ws","writeencoding","22","WriteReq","WritableState","writableObjectMode","ending","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","pendingcb","prefinished","errorEmitted","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","doWrite","writev","_writev","onwriteError","onwriteStateUpdate","needFinish","clearBuffer","afterWrite","onwriteDrain","finishMaybe","cbs","entry","prefinish","need","endWritable","cork","uncork","23","ar","isBoolean","isSymbol","isRegExp","re","objectToString","isDate","isError","isPrimitive","24","./lib/_stream_passthrough.js","25","./lib/_stream_readable.js","./lib/_stream_transform.js","./lib/_stream_writable.js","26","27","28","source","didOnEnd","_isStdio","readable-stream/duplex.js","readable-stream/passthrough.js","readable-stream/readable.js","readable-stream/transform.js","readable-stream/writable.js","29","assertEncoding","isBufferEncoding","passThroughWrite","utf16DetectIncompleteChar","charReceived","charLength","base64DetectIncompleteChar","surrogateSize","detectIncompleteChar","charBuffer","charStr","available","charCode","substring","cr","30","31","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","style","styles","arrayToHash","hash","idx","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","formatError","RegExp","Date","base","braces","toUTCString","formatArray","map","formatProperty","pop","reduceToSingleString","simple","JSON","stringify","desc","getOwnPropertyDescriptor","split","line","numLinesEst","reduce","prev","cur","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","objects","_","deprecate","msg","deprecated","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","NODE_DEBUG","toUpperCase","test","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","null","date","regexp","origin","add","./support/isBuffer","32","33","useColors","document","documentElement","firebug","exception","table","navigator","userAgent","$1","formatArgs","namespace","humanize","diff","color","index","lastC","Function","save","namespaces","storage","removeItem","load","localstorage","localStorage","chrome","local","formatters","enable","./debug","34","selectColor","prevColor","disabled","enabled","curr","ms","prevTime","coerce","formatter","logFn","skips","names","disable","stack","35","parse","exec","parseFloat","h","short","round","long","plural","ceil","functionName","funcNameRegex","results","parseValue","hyphenate","FOUNDATION_VERSION","Foundation","_plugins","_uuids","rtl","attr","plugin","_plugin","className","attrName","registerPlugin","pluginName","GetYoDigits","$element","trigger","unregisterPlugin","removeAttr","removeData","reInit","plugins","isJQ","each","_init","_this","fns","plgs","foundation","reflow","elem","$elem","find","addBack","$el","warn","opt","el","getFnName","transitionend","transitions","transition","WebkitTransition","MozTransition","OTransition","createElement","triggerHandler","throttle","func","delay","timer","context","$meta","$noJS","appendTo","head","MediaQuery","plugClass","ReferenceError","now","getTime","vendors","requestAnimationFrame","vp","cancelAnimationFrame","lastTime","nextTime","clearTimeout","performance","oThis","aArgs","fToBind","fNOP","fBound","jQuery","getKeyCodes","kcs","kc","keyCodes","37","38","39","40","commands","Keyboard","parseKey","which","keyCode","shiftKey","ctrlKey","altKey","handleKey","component","functions","cmds","command","commandList","ltr","extend","returnValue","handled","unhandled","findFocusable","filter","is","register","componentName","ImNotTouchingYou","element","lrOnly","tbOnly","top","bottom","left","right","eleDims","GetDimensions","parDims","height","width","windowDims","allDirs","rect","getBoundingClientRect","parRect","parentNode","winRect","body","winY","pageYOffset","winX","pageXOffset","parentDims","GetOffsets","anchor","vOffset","hOffset","isOverflow","$eleDims","$anchorDims","Box","Nest","Feather","menu","items","role","subMenuClass","subItemClass","hasSubClass","$item","$sub","children","aria-haspopup","aria-expanded","aria-label","data-submenu","aria-hidden","Burn","css","parseStyleToObject","styleObject","param","parts","queries","current","namedQueries","extractedStyles","_getCurrentSize","_watcher","atLeast","query","matchMedia","matches","matched","newSize","currentSize","styleMedia","media","script","getElementsByTagName","info","insertBefore","getComputedStyle","currentStyle","matchMedium","styleSheet","cssText","textContent","checkListeners","eventsListener","resizeListener","scrollListener","closemeListener","yetiBoxes","plugNames","pluginId","not","debounce","$nodes","MutationObserver","nodes","querySelectorAll","listeningElementsMutation","mutationRecordsList","$target","elementObserver","observe","attributes","childList","characterData","subtree","attributeFilter","prefixes","triggers","stopPropagation","animation","Motion","animateOut","fadeOut","IHearYou","Move","duration","move","prog","anim","animate","isIn","finish","hide","reset","transitionDuration","initClass","activeClass","eq","initClasses","activeClasses","show","offsetWidth","one","animateIn","_createClass","defineProperties","props","descriptor","defineProperty","protoProps","staticProps","DropdownMenu","defaults","ENTER","SPACE","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ESCAPE","subs","$menuItems","$tabs","verticalClass","rightClass","alignment","parents","changed","hasTouch","ontouchstart","parClass","handleClickFn","parentsUntil","hasSub","hasClicked","closeOnClick","clickOpen","forceFollow","stopImmediatePropagation","preventDefault","_hide","_show","disableHover","hoverDelay","autoclose","closingTime","$prevElement","$nextElement","isTab","$elements","siblings","nextSibling","focus","prevSibling","openSub","closeSub","close","open","down","up","next","previous","$body","$link","$sibs","clear","oldClass","$parentLi","_addBodyHandler","$toClose","somethingToClose","data-is-click","OffCanvas","$lastTrigger","$triggers","$exiter","exiter","setAttribute","append","isRevealed","revealClass","revealOn","_setMQChecker","transitionTime","open.zf.trigger","close.zf.trigger","toggle.zf.trigger","toggle","keydown.zf.offcanvas","_handleKeyboard","click.zf.offcanvas","reveal","$closer","forceTop","scrollTop","autoFocus","trapFocus","_trapFocus","focusable","first","last","keycode","emCalc","em","fontSize","Sticky","$parent","wasWrapped","$container","container","wrapInner","containerClass","stickyClass","data-resize","scrollCount","checkEvery","isStuck","$anchor","_parsePoints","_setSizes","_calc","reverse","topAnchor","btm","btmAnchor","scrollHeight","pts","breaks","pt","place","points","isOn","canStick","_pauseListeners","checkSizes","scroll","topPoint","bottomPoint","_setSticky","_removeSticky","stickTo","mrgn","notStuckTo","isTop","stickToTop","anchorPt","anchorHeight","elemHeight","topOrBottom","stickyOn","newElemWidth","comp","pdng","max-width","newContainerHeight","containerHeight","_setBreakPoints","mTop","marginTop","mBtm","marginBottom","winHeight","innerHeight","unwrap","Magellan","$targets","$links","data-scroll","$active","scrollPos","html","clientHeight","docHeight","offsetHeight","$tar","threshold","targetPoint","animationDuration","easing","animationEasing","deepLinking","location","scrollToLoc","calcPoints","_updateActive","resizeme.zf.trigger","scrollme.zf.trigger","arrival","getAttribute","loc","barOffset","stop","curIdx","winPos","isDown","curVisible","history","pushState","ready","scrollspy","click","has","gen","bootstrapSwitch","onText","offText","todo","io","connect","loginData","room","modal","pokedex","box","totalCaught","boxPokemonCounter","boxLineCounter","_id","pokemon","submit","username","password","alert","dexNumber","no","file","files","blobStream"],"mappings":"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","file":"script.js","sourcesContent":["\"use strict\";var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol?\"symbol\":typeof obj;};(function(f){if((typeof exports===\"undefined\"?\"undefined\":_typeof(exports))===\"object\"&&typeof module!==\"undefined\"){module.exports=f();}else if(typeof define===\"function\"&&define.amd){define([],f);}else{var g;if(typeof window!==\"undefined\"){g=window;}else if(typeof global!==\"undefined\"){g=global;}else if(typeof self!==\"undefined\"){g=self;}else{g=this;}g.ss=f();}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++){s(r[o]);}return s;}({1:[function(require,module,exports){module.exports=require('./lib');},{\"./lib\":3}],2:[function(require,module,exports){(function(Buffer){var util=require('util');var Readable=require('stream').Readable;var bind=require('component-bind');module.exports=BlobReadStream;util.inherits(BlobReadStream,Readable);/**\r\n * Readable stream for Blob and File on browser.\r\n *\r\n * @param {Object} options\r\n * @api private\r\n */function BlobReadStream(blob,options){if(!(this instanceof BlobReadStream)){return new BlobReadStream(blob,options);}Readable.call(this,options);this.blob=blob;this.slice=blob.slice||blob.webkitSlice||blob.mozSlice;this.start=0;var fileReader=this.fileReader=new FileReader();fileReader.onload=bind(this,'_onload');fileReader.onerror=bind(this,'_onerror');}BlobReadStream.prototype._read=function(size){var start=this.start;var end=this.start=this.start+size;var chunk=this.slice.call(this.blob,start,end);if(chunk.size){this.fileReader.readAsArrayBuffer(chunk);}else{this.push(null);}};BlobReadStream.prototype._onload=function(e){var chunk=new Buffer(new Uint8Array(e.target.result));this.push(chunk);};BlobReadStream.prototype._onerror=function(e){var err=e.target.error;this.emit('error',err);};}).call(this,require(\"buffer\").Buffer);},{\"buffer\":9,\"component-bind\":32,\"stream\":28,\"util\":31}],3:[function(require,module,exports){(function(Buffer){var Socket=require('./socket');var IOStream=require('./iostream');var BlobReadStream=require('./blob-read-stream');exports=module.exports=lookup;/**\r\n * Expose Node Buffer for browser.\r\n *\r\n * @api public\r\n */exports.Buffer=Buffer;/**\r\n * Expose Socket constructor.\r\n *\r\n * @api public\r\n */exports.Socket=Socket;/**\r\n * Expose IOStream constructor.\r\n *\r\n * @api public\r\n */exports.IOStream=IOStream;/**\r\n * Forces base 64 encoding when emitting. Must be set to true for Socket.IO v0.9 or lower.\r\n *\r\n * @api public\r\n */exports.forceBase64=false;/**\r\n * Look up an existing Socket.\r\n *\r\n * @param {socket.io#Socket} socket.io\r\n * @param {Object} options\r\n * @return {Socket} Socket instance\r\n * @api public\r\n */function lookup(sio,options){options=options||{};if(null==options.forceBase64){options.forceBase64=exports.forceBase64;}if(!sio._streamSocket){sio._streamSocket=new Socket(sio,options);}return sio._streamSocket;}/**\r\n * Creates a new duplex stream.\r\n *\r\n * @param {Object} options\r\n * @return {IOStream} duplex stream\r\n * @api public\r\n */exports.createStream=function(options){return new IOStream(options);};/**\r\n * Creates a new readable stream for Blob/File on browser.\r\n *\r\n * @param {Blob} blob\r\n * @param {Object} options\r\n * @return {BlobReadStream} stream\r\n * @api public\r\n */exports.createBlobReadStream=function(blob,options){return new BlobReadStream(blob,options);};}).call(this,require(\"buffer\").Buffer);},{\"./blob-read-stream\":2,\"./iostream\":4,\"./socket\":6,\"buffer\":9}],4:[function(require,module,exports){var util=require('util');var Duplex=require('stream').Duplex;var bind=require('component-bind');var uuid=require('./uuid');var debug=require('debug')('socket.io-stream:iostream');module.exports=IOStream;util.inherits(IOStream,Duplex);/**\r\n * Duplex\r\n *\r\n * @param {Object} options\r\n * @api private\r\n */function IOStream(options){if(!(this instanceof IOStream)){return new IOStream(options);}IOStream.super_.call(this,options);this.options=options;this.id=uuid();this.socket=null;// Buffers\nthis.pushBuffer=[];this.writeBuffer=[];// Op states\nthis._readable=false;this._writable=false;this.destroyed=false;// default to *not* allowing half open sockets\nthis.allowHalfOpen=options&&options.allowHalfOpen||false;this.on('finish',this._onfinish);this.on('end',this._onend);this.on('error',this._onerror);}/**\r\n * Ensures that no more I/O activity happens on this stream.\r\n * Not necessary in the usual case.\r\n *\r\n * @api public\r\n */IOStream.prototype.destroy=function(){debug('destroy');if(this.destroyed){debug('already destroyed');return;}this.readable=this.writable=false;if(this.socket){debug('clean up');this.socket.cleanup(this.id);this.socket=null;}this.destroyed=true;};/**\r\n * Local read\r\n *\r\n * @api private\r\n */IOStream.prototype._read=function(size){var push;// We can not read from the socket if it's destroyed obviously ...\nif(this.destroyed)return;if(this.pushBuffer.length){// flush buffer and end if it exists.\nwhile(push=this.pushBuffer.shift()){if(!push())break;}return;}this._readable=true;// Go get data from remote stream\n// Calls\n// ._onread remotely\n// then\n// ._onwrite locally\nthis.socket._read(this.id,size);};/**\r\n * Read from remote stream\r\n *\r\n * @api private\r\n */IOStream.prototype._onread=function(size){var write=this.writeBuffer.shift();if(write)return write();this._writable=true;};/**\r\n * Write local data to remote stream\r\n * Calls\r\n * remtote ._onwrite\r\n *\r\n * @api private\r\n */IOStream.prototype._write=function(chunk,encoding,callback){var self=this;function write(){// We can not write to the socket if it's destroyed obviously ...\nif(self.destroyed)return;self._writable=false;self.socket._write(self.id,chunk,encoding,callback);}if(this._writable){write();}else{this.writeBuffer.push(write);}};/**\r\n * Write the data fetched remotely\r\n * so that we can now read locally\r\n *\r\n * @api private\r\n */IOStream.prototype._onwrite=function(chunk,encoding,callback){var self=this;function push(){self._readable=false;var ret=self.push(chunk||'',encoding);callback();return ret;}if(this._readable){push();}else{this.pushBuffer.push(push);}};/**\r\n * When ending send 'end' event to remote stream\r\n *\r\n * @api private\r\n */IOStream.prototype._end=function(){if(this.pushBuffer.length){// end after flushing buffer.\nthis.pushBuffer.push(bind(this,'_done'));}else{this._done();}};/**\r\n * Remote stream just ended\r\n *\r\n * @api private\r\n */IOStream.prototype._done=function(){this._readable=false;// signal the end of the data.\nreturn this.push(null);};/**\r\n * the user has called .end(), and all the bytes have been\r\n * sent out to the other side.\r\n * If allowHalfOpen is false, or if the readable side has\r\n * ended already, then destroy.\r\n * If allowHalfOpen is true, then we need to set writable false,\r\n * so that only the writable side will be cleaned up.\r\n *\r\n * @api private\r\n */IOStream.prototype._onfinish=function(){debug('_onfinish');// Local socket just finished\n// send 'end' event to remote\nif(this.socket){this.socket._end(this.id);}this.writable=false;this._writableState.ended=true;if(!this.readable||this._readableState.ended){debug('_onfinish: ended, destroy %s',this._readableState);return this.destroy();}debug('_onfinish: not ended');if(!this.allowHalfOpen){this.push(null);// just in case we're waiting for an EOF.\nif(this.readable&&!this._readableState.endEmitted){this.read(0);}}};/**\r\n * the EOF has been received, and no more bytes are coming.\r\n * if the writable side has ended already, then clean everything\r\n * up.\r\n *\r\n * @api private\r\n */IOStream.prototype._onend=function(){debug('_onend');this.readable=false;this._readableState.ended=true;if(!this.writable||this._writableState.finished){debug('_onend: %s',this._writableState);return this.destroy();}debug('_onend: not finished');if(!this.allowHalfOpen){this.end();}};/**\r\n * When error in local stream\r\n * notyify remote\r\n * if err.remote = true\r\n * then error happened on remote stream\r\n *\r\n * @api private\r\n */IOStream.prototype._onerror=function(err){// check if the error came from remote stream.\nif(!err.remote&&this.socket){// notify the error to the corresponding remote stream.\nthis.socket._error(this.id,err);}this.destroy();};},{\"./uuid\":7,\"component-bind\":32,\"debug\":33,\"stream\":28,\"util\":31}],5:[function(require,module,exports){var util=require('util');var EventEmitter=require('events').EventEmitter;var IOStream=require('./iostream');var slice=Array.prototype.slice;exports.Encoder=Encoder;exports.Decoder=Decoder;util.inherits(Encoder,EventEmitter);function Encoder(){EventEmitter.call(this);}/**\r\n * Encode streams to placeholder objects.\r\n *\r\n * @api public\r\n */Encoder.prototype.encode=function(v){if(v instanceof IOStream){return this.encodeStream(v);}else if(util.isArray(v)){return this.encodeArray(v);}else if(v&&'object'==(typeof v===\"undefined\"?\"undefined\":_typeof(v))){return this.encodeObject(v);}return v;};Encoder.prototype.encodeStream=function(stream){this.emit('stream',stream);// represent a stream in an object.\nvar v={'$stream':stream.id};if(stream.options){v.options=stream.options;}return v;};Encoder.prototype.encodeArray=function(arr){var v=[];for(var i=0,len=arr.length;i<len;i++){v.push(this.encode(arr[i]));}return v;};Encoder.prototype.encodeObject=function(obj){var v={};for(var k in obj){if(obj.hasOwnProperty(k)){v[k]=this.encode(obj[k]);}}return v;};util.inherits(Decoder,EventEmitter);function Decoder(){EventEmitter.call(this);}/**\r\n * Decode placeholder objects to streams.\r\n *\r\n * @api public\r\n */Decoder.prototype.decode=function(v){if(v&&v['$stream']){return this.decodeStream(v);}else if(util.isArray(v)){return this.decodeArray(v);}else if(v&&'object'==(typeof v===\"undefined\"?\"undefined\":_typeof(v))){return this.decodeObject(v);}return v;};Decoder.prototype.decodeStream=function(obj){var stream=new IOStream(obj.options);stream.id=obj['$stream'];this.emit('stream',stream);return stream;};Decoder.prototype.decodeArray=function(arr){var v=[];for(var i=0,len=arr.length;i<len;i++){v.push(this.decode(arr[i]));}return v;};Decoder.prototype.decodeObject=function(obj){var v={};for(var k in obj){if(obj.hasOwnProperty(k)){v[k]=this.decode(obj[k]);}}return v;};},{\"./iostream\":4,\"events\":13,\"util\":31}],6:[function(require,module,exports){(function(global,Buffer){var util=require('util');var EventEmitter=require('events').EventEmitter;var bind=require('component-bind');var IOStream=require('./iostream');var parser=require('./parser');var debug=require('debug')('socket.io-stream:socket');var emit=EventEmitter.prototype.emit;var on=EventEmitter.prototype.on;var slice=Array.prototype.slice;exports=module.exports=Socket;/**\r\n * Base event name for messaging.\r\n *\r\n * @api public\r\n */exports.event='$stream';exports.events=['error','newListener','removeListener'];util.inherits(Socket,EventEmitter);/**\r\n * Bidirectional stream socket which wraps Socket.IO.\r\n *\r\n * @param {socket.io#Socket} socket.io\r\n * @api public\r\n */function Socket(sio,options){if(!(this instanceof Socket)){return new Socket(sio,options);}EventEmitter.call(this);options=options||{};this.sio=sio;this.forceBase64=!!options.forceBase64;this.streams={};this.encoder=new parser.Encoder();this.decoder=new parser.Decoder();var eventName=exports.event;sio.on(eventName,bind(this,emit));sio.on(eventName+'-read',bind(this,'_onread'));sio.on(eventName+'-write',bind(this,'_onwrite'));sio.on(eventName+'-end',bind(this,'_onend'));sio.on(eventName+'-error',bind(this,'_onerror'));sio.on('error',bind(this,emit,'error'));sio.on('disconnect',bind(this,'_ondisconnect'));this.encoder.on('stream',bind(this,'_onencode'));this.decoder.on('stream',bind(this,'_ondecode'));}/**\r\n * Original emit function.\r\n *\r\n * @api private\r\n */Socket.prototype.$emit=emit;/**\r\n * Emits streams to this corresponding server/client.\r\n *\r\n * @return {Socket} self\r\n * @api public\r\n */Socket.prototype.emit=function(type){if(~exports.events.indexOf(type)){return emit.apply(this,arguments);}this._stream.apply(this,arguments);return this;};Socket.prototype.on=function(type,listener){if(~exports.events.indexOf(type)){return on.apply(this,arguments);}this._onstream(type,listener);return this;};/**\r\n * Sends a new stream request.\r\n *\r\n * @param {String} event type\r\n * @api private\r\n */Socket.prototype._stream=function(type){debug('sending new streams');var self=this;var args=slice.call(arguments,1);var ack=args[args.length-1];if('function'==typeof ack){args[args.length-1]=function(){var args=slice.call(arguments);args=self.decoder.decode(args);ack.apply(this,args);};}args=this.encoder.encode(args);var sio=this.sio;sio.emit.apply(sio,[exports.event,type].concat(args));};/**\r\n * Notifies the read event.\r\n *\r\n * @api private\r\n */Socket.prototype._read=function(id,size){this.sio.emit(exports.event+'-read',id,size);};/**\r\n * Requests to write a chunk.\r\n *\r\n * @api private\r\n */Socket.prototype._write=function(id,chunk,encoding,callback){if(Buffer.isBuffer(chunk)){if(this.forceBase64){encoding='base64';chunk=chunk.toString(encoding);}else if(!global.Buffer){// socket.io can't handle Buffer when using browserify.\nchunk=chunk.toArrayBuffer();}}this.sio.emit(exports.event+'-write',id,chunk,encoding,callback);};Socket.prototype._end=function(id){this.sio.emit(exports.event+'-end',id);};Socket.prototype._error=function(id,err){this.sio.emit(exports.event+'-error',id,err.message||err);};/**\r\n * Handles a new stream request.\r\n *\r\n * @param {String} event type\r\n * @param {Function} listener\r\n *\r\n * @api private\r\n */Socket.prototype._onstream=function(type,listener){if('function'!=typeof listener){throw TypeError('listener must be a function');}function onstream(){debug('new streams');var self=this;var args=slice.call(arguments);var ack=args[args.length-1];if('function'==typeof ack){args[args.length-1]=function(){var args=slice.call(arguments);args=self.encoder.encode(args);ack.apply(this,args);};}args=this.decoder.decode(args);listener.apply(this,args);}// for removeListener\nonstream.listener=listener;on.call(this,type,onstream);};Socket.prototype._onread=function(id,size){debug('read: \"%s\"',id);var stream=this.streams[id];if(stream){stream._onread(size);}else{this._error(id,'invalid stream id');}};Socket.prototype._onwrite=function(id,chunk,encoding,callback){debug('write: \"%s\"',id);var stream=this.streams[id];if(!stream){this._error(id,'invalid stream id');return;}if(global.ArrayBuffer&&chunk instanceof ArrayBuffer){// make sure that chunk is a buffer for stream\nchunk=new Buffer(new Uint8Array(chunk));}stream._onwrite(chunk,encoding,callback);};Socket.prototype._onend=function(id){debug('end: \"%s\"',id);var stream=this.streams[id];if(!stream){debug('ignore non-existent stream id: \"%s\"',id);return;}stream._end();};Socket.prototype._onerror=function(id,message){debug('error: \"%s\", \"%s\"',id,message);var stream=this.streams[id];if(!stream){debug('invalid stream id: \"%s\"',id);return;}var err=new Error(message);err.remote=true;stream.emit('error',err);};Socket.prototype._ondisconnect=function(){var stream;for(var id in this.streams){stream=this.streams[id];stream.destroy();// Close streams when the underlaying\n// socket.io connection is closed (regardless why)\nstream.emit('close');stream.emit('error',new Error('Connection aborted'));}};Socket.prototype._onencode=function(stream){if(stream.socket||stream.destroyed){throw new Error('stream has already been sent.');}var id=stream.id;if(this.streams[id]){throw new Error('Encoded stream already exists: '+id);}this.streams[id]=stream;stream.socket=this;};Socket.prototype._ondecode=function(stream){var id=stream.id;if(this.streams[id]){this._error(id,new Error('Decoded stream already exists: '+id));return;}this.streams[id]=stream;stream.socket=this;};Socket.prototype.cleanup=function(id){delete this.streams[id];};}).call(this,typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:typeof window!==\"undefined\"?window:{},require(\"buffer\").Buffer);},{\"./iostream\":4,\"./parser\":5,\"buffer\":9,\"component-bind\":32,\"debug\":33,\"events\":13,\"util\":31}],7:[function(require,module,exports){// UUID function from https://gist.github.com/jed/982883\n// More lightweight than node-uuid\nfunction b(a// placeholder\n){return a// if the placeholder was passed, return\n?(// a random number from 0 to 15\na^// unless b is 8,\nMath.random()// in which case\n*16// a random number from\n>>a/4// 8 to 11\n).toString(16)// in hexadecimal\n:(// or otherwise a concatenated string:\n[1e7]+// 10000000 +\n-1e3+// -1000 +\n-4e3+// -4000 +\n-8e3+// -80000000 +\n-1e11// -100000000000,\n).replace(// replacing\n/[018]/g,// zeroes, ones, and eights with\nb// random hex digits\n);}module.exports=b;},{}],8:[function(require,module,exports){},{}],9:[function(require,module,exports){/*!\r\n * The buffer module from node.js, for the browser.\r\n *\r\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\r\n * @license  MIT\r\n */var base64=require('base64-js');var ieee754=require('ieee754');var isArray=require('is-array');exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;// not used by this implementation\nvar kMaxLength=0x3fffffff;var rootParent={};/**\r\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\r\n *   === true    Use Uint8Array implementation (fastest)\r\n *   === false   Use Object implementation (most compatible, even IE6)\r\n *\r\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\r\n * Opera 11.6+, iOS 4.2+.\r\n *\r\n * Note:\r\n *\r\n * - Implementation must support adding new properties to `Uint8Array` instances.\r\n *   Firefox 4-29 lacked support, fixed in Firefox 30+.\r\n *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\r\n *\r\n *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\r\n *\r\n *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\r\n *    incorrect length in some situations.\r\n *\r\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will\r\n * get the Object implementation, which is slower but will work correctly.\r\n */Buffer.TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42;};return arr.foo()===42&&// typed array instances can be augmented\ntypeof arr.subarray==='function'&&// chrome 9-10 lack `subarray`\nnew Uint8Array(1).subarray(1,1).byteLength===0;// ie10 has broken `subarray`\n}catch(e){return false;}}();/**\r\n * Class: Buffer\r\n * =============\r\n *\r\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\r\n * with function properties for all the node `Buffer` API functions. We use\r\n * `Uint8Array` so that square bracket notation works as expected -- it returns\r\n * a single octet.\r\n *\r\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\r\n * prototype.\r\n */function Buffer(arg){if(!(this instanceof Buffer)){// Avoid going through an ArgumentsAdaptorTrampoline in the common case.\nif(arguments.length>1)return new Buffer(arg,arguments[1]);return new Buffer(arg);}this.length=0;this.parent=undefined;// Common case.\nif(typeof arg==='number'){return fromNumber(this,arg);}// Slightly less common case.\nif(typeof arg==='string'){return fromString(this,arg,arguments.length>1?arguments[1]:'utf8');}// Unusual.\nreturn fromObject(this,arg);}function fromNumber(that,length){that=allocate(that,length<0?0:checked(length)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<length;i++){that[i]=0;}}return that;}function fromString(that,string,encoding){if(typeof encoding!=='string'||encoding==='')encoding='utf8';// Assumption: byteLength() return value is always < kMaxLength.\nvar length=byteLength(string,encoding)|0;that=allocate(that,length);that.write(string,encoding)|0;return that;}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(object==null){throw new TypeError('must start with number, buffer, array or string');}if(typeof ArrayBuffer!=='undefined'&&object.buffer instanceof ArrayBuffer){return fromTypedArray(that,object);}if(object.length)return fromArrayLike(that,object);return fromJsonObject(that,object);}function fromBuffer(that,buffer){var length=checked(buffer.length)|0;that=allocate(that,length);buffer.copy(that,0,0,length);return that;}function fromArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);// Truncating the elements is probably not what people expect from typed\n// arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n// of the old Buffer constructor.\nfor(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}function fromArrayLike(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject(that,object){var array;var length=0;if(object.type==='Buffer'&&isArray(object.data)){array=object.data;length=checked(array.length)|0;}that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}function allocate(that,length){if(Buffer.TYPED_ARRAY_SUPPORT){// Return an augmented `Uint8Array` instance, for best performance\nthat=Buffer._augment(new Uint8Array(length));}else{// Fallback: Return an object instance of the Buffer class\nthat.length=length;that._isBuffer=true;}var fromPool=length!==0&&length<=Buffer.poolSize>>>1;if(fromPool)that.parent=rootParent;return that;}function checked(length){// Note: cannot use `length < kMaxLength` here because that fails when\n// length is NaN (which is otherwise coerced to zero.)\nif(length>=kMaxLength){throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+kMaxLength.toString(16)+' bytes');}return length>>>0;}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf;}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer);};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('Arguments must be Buffers');}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len&&a[i]===b[i];i++){}if(i!==len){x=a[i];y=b[i];}if(x<y)return-1;if(y<x)return 1;return 0;};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'raw':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return true;default:return false;}};Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError('list argument must be an Array of Buffers.');if(list.length===0){return new Buffer(0);}else if(list.length===1){return list[0];}var i;if(length===undefined){length=0;for(i=0;i<list.length;i++){length+=list[i].length;}}var buf=new Buffer(length);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length;}return buf;};function byteLength(string,encoding){if(typeof string!=='string')string=String(string);if(string.length===0)return 0;switch(encoding||'utf8'){case'ascii':case'binary':case'raw':return string.length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return string.length*2;case'hex':return string.length>>>1;case'utf8':case'utf-8':return utf8ToBytes(string).length;case'base64':return base64ToBytes(string).length;default:return string.length;}}Buffer.byteLength=byteLength;// pre-set for values that may exist in the future\nBuffer.prototype.length=undefined;Buffer.prototype.parent=undefined;// toString(encoding, start=0, end=buffer.length)\nBuffer.prototype.toString=function toString(encoding,start,end){var loweredCase=false;start=start>>>0;end=end===undefined||end===Infinity?this.length:end>>>0;if(!encoding)encoding='utf8';if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return'';while(true){switch(encoding){case'hex':return hexSlice(this,start,end);case'utf8':case'utf-8':return utf8Slice(this,start,end);case'ascii':return asciiSlice(this,start,end);case'binary':return binarySlice(this,start,end);case'base64':return base64Slice(this,start,end);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(encoding+'').toLowerCase();loweredCase=true;}}};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer');if(this===b)return true;return Buffer.compare(this,b)===0;};Buffer.prototype.inspect=function inspect(){var str='';var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString('hex',0,max).match(/.{2}/g).join(' ');if(this.length>max)str+=' ... ';}return'<Buffer '+str+'>';};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer');if(this===b)return 0;return Buffer.compare(this,b);};Buffer.prototype.indexOf=function indexOf(val,byteOffset){if(byteOffset>0x7fffffff)byteOffset=0x7fffffff;else if(byteOffset<-0x80000000)byteOffset=-0x80000000;byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;// Negative offsets start from the end of the buffer\nif(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==='string'){if(val.length===0)return-1;// special case: looking for empty string always fails\nreturn String.prototype.indexOf.call(this,val,byteOffset);}if(Buffer.isBuffer(val)){return arrayIndexOf(this,val,byteOffset);}if(typeof val==='number'){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==='function'){return Uint8Array.prototype.indexOf.call(this,val,byteOffset);}return arrayIndexOf(this,[val],byteOffset);}function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++){if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex;}else{foundIndex=-1;}}return-1;}throw new TypeError('val must be string, number or Buffer');};// `get` will be removed in Node 0.13+\nBuffer.prototype.get=function get(offset){console.log('.get() is deprecated. Access using array indexes instead.');return this.readUInt8(offset);};// `set` will be removed in Node 0.13+\nBuffer.prototype.set=function set(v,offset){console.log('.set() is deprecated. Access using array indexes instead.');return this.writeUInt8(v,offset);};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining;}else{length=Number(length);if(length>remaining){length=remaining;}}// must be an even number of digits\nvar strLen=string.length;if(strLen%2!==0)throw new Error('Invalid hex string');if(length>strLen/2){length=strLen/2;}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))throw new Error('Invalid hex string');buf[offset+i]=parsed;}return i;}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length);}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length);}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length);}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);}Buffer.prototype.write=function write(string,offset,length,encoding){// Buffer#write(string)\nif(offset===undefined){encoding='utf8';length=this.length;offset=0;// Buffer#write(string, encoding)\n}else if(length===undefined&&typeof offset==='string'){encoding=offset;length=this.length;offset=0;// Buffer#write(string, offset[, length][, encoding])\n}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding='utf8';}else{encoding=length;length=undefined;}// legacy write(string, encoding, offset, length) - remove in v0.13\n}else{var swap=encoding;encoding=offset;offset=length>>>0;length=swap;}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError('attempt to write outside buffer bounds');}if(!encoding)encoding='utf8';var loweredCase=false;for(;;){switch(encoding){case'hex':return hexWrite(this,string,offset,length);case'utf8':case'utf-8':return utf8Write(this,string,offset,length);case'ascii':return asciiWrite(this,string,offset,length);case'binary':return binaryWrite(this,string,offset,length);case'base64':// Warning: maxLength not taken into account in base64Write\nreturn base64Write(this,string,offset,length);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(''+encoding).toLowerCase();loweredCase=true;}}};Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)};};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf);}else{return base64.fromByteArray(buf.slice(start,end));}}function utf8Slice(buf,start,end){var res='';var tmp='';end=Math.min(buf.length,end);for(var i=start;i<end;i++){if(buf[i]<=0x7F){res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);tmp='';}else{tmp+='%'+buf[i].toString(16);}}return res+decodeUtf8Char(tmp);}function asciiSlice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&0x7F);}return ret;}function binarySlice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]);}return ret;}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out='';for(var i=start;i<end;i++){out+=toHex(buf[i]);}return out;}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);}return res;}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0;}else if(start>len){start=len;}if(end<0){end+=len;if(end<0)end=0;}else if(end>len){end=len;}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end));}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start];}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf;};/*\r\n * Need to make sure that buffer isn't trying to write out of bounds.\r\n */function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError('offset is not uint');if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length');}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}return val;};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length);}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=0x100)){val+=this[offset+--byteLength]*mul;}return val;};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset];};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8;};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1];};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*0x1000000;};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*0x1000000+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3]);};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=0x100)){val+=this[offset+--i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&0x80))return this[offset];return(0xff-this[offset]+1)*-1;};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24;};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3];};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4);};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4);};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8);};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8);};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('buffer must be a Buffer instance');if(value>max||value<min)throw new RangeError('value is out of bounds');if(offset+ext>buf.length)throw new RangeError('index out of range');}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){this[offset+i]=value/mul>>>0&0xFF;}return offset+byteLength;};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){this[offset+i]=value/mul>>>0&0xFF;}return offset+byteLength;};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,0xff,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value;return offset+1;};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=0xffff+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&0xff<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8;}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=0xffffffff+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&0xff;}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1));}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1));}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,0x7f,-0x80);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=0xff+value+1;this[offset]=value;return offset+1;};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(value<0)value=0xffffffff+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError('value is out of bounds');if(offset+ext>buf.length)throw new RangeError('index out of range');if(offset<0)throw new RangeError('index out of range');}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e+38,-3.4028234663852886e+38);}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4;}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert);};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert);};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157E+308,-1.7976931348623157E+308);}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8;}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert);};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert);};// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy=function copy(target,target_start,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(target_start>=target.length)target_start=target.length;if(!target_start)target_start=0;if(end>0&&end<start)end=start;// Copy 0 bytes; we're done\nif(end===start)return 0;if(target.length===0||this.length===0)return 0;// Fatal error conditions\nif(target_start<0){throw new RangeError('targetStart out of bounds');}if(start<0||start>=this.length)throw new RangeError('sourceStart out of bounds');if(end<0)throw new RangeError('sourceEnd out of bounds');// Are we oob?\nif(end>this.length)end=this.length;if(target.length-target_start<end-start){end=target.length-target_start+start;}var len=end-start;if(len<1000||!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<len;i++){target[i+target_start]=this[i+start];}}else{target._set(this.subarray(start,start+len),target_start);}return len;};// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError('end < start');// Fill 0 bytes; we're done\nif(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError('start out of bounds');if(end<0||end>this.length)throw new RangeError('end out of bounds');var i;if(typeof value==='number'){for(i=start;i<end;i++){this[i]=value;}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len];}}return this;};/**\r\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\r\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\r\n */Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if(typeof Uint8Array!=='undefined'){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer;}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i];}return buf.buffer;}}else{throw new TypeError('Buffer.toArrayBuffer not supported in this browser');}};// HELPER FUNCTIONS\n// ================\nvar BP=Buffer.prototype;/**\r\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\r\n */Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;// save reference to original Uint8Array set method before overwriting\narr._set=arr.set;// deprecated, will be removed in node 0.13+\narr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr;};var INVALID_BASE64_RE=/[^+\\/0-9A-z\\-]/g;function base64clean(str){// Node strips out invalid characters like \\n and \\t from the string, base64-js does not\nstr=stringtrim(str).replace(INVALID_BASE64_RE,'');// Node converts strings with length < 2 to ''\nif(str.length<2)return'';// Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\nwhile(str.length%4!==0){str=str+'=';}return str;}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\\s+|\\s+$/g,'');}function toHex(n){if(n<16)return'0'+n.toString(16);return n.toString(16);}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];var i=0;for(;i<length;i++){codePoint=string.charCodeAt(i);// is surrogate component\nif(codePoint>0xD7FF&&codePoint<0xE000){// last char was a lead\nif(leadSurrogate){// 2 leads in a row\nif(codePoint<0xDC00){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);leadSurrogate=codePoint;continue;}else{// valid surrogate pair\ncodePoint=leadSurrogate-0xD800<<10|codePoint-0xDC00|0x10000;leadSurrogate=null;}}else{// no lead yet\nif(codePoint>0xDBFF){// unexpected trail\nif((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}else if(i+1===length){// unpaired lead\nif((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}else{// valid lead\nleadSurrogate=codePoint;continue;}}}else if(leadSurrogate){// valid bmp char, but last char was a lead\nif((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);leadSurrogate=null;}// encode utf8\nif(codePoint<0x80){if((units-=1)<0)break;bytes.push(codePoint);}else if(codePoint<0x800){if((units-=2)<0)break;bytes.push(codePoint>>0x6|0xC0,codePoint&0x3F|0x80);}else if(codePoint<0x10000){if((units-=3)<0)break;bytes.push(codePoint>>0xC|0xE0,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else if(codePoint<0x200000){if((units-=4)<0)break;bytes.push(codePoint>>0x12|0xF0,codePoint>>0xC&0x3F|0x80,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else{throw new Error('Invalid code point');}}return bytes;}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){// Node's code seems to be doing this and not & 0x7F..\nbyteArray.push(str.charCodeAt(i)&0xFF);}return byteArray;}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi);}return byteArray;}function base64ToBytes(str){return base64.toByteArray(base64clean(str));}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];}return i;}function decodeUtf8Char(str){try{return decodeURIComponent(str);}catch(err){return String.fromCharCode(0xFFFD);// UTF 8 invalid char\n}}},{\"base64-js\":10,\"ieee754\":11,\"is-array\":12}],10:[function(require,module,exports){var lookup='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';;(function(exports){'use strict';var Arr=typeof Uint8Array!=='undefined'?Uint8Array:Array;var PLUS='+'.charCodeAt(0);var SLASH='/'.charCodeAt(0);var NUMBER='0'.charCodeAt(0);var LOWER='a'.charCodeAt(0);var UPPER='A'.charCodeAt(0);var PLUS_URL_SAFE='-'.charCodeAt(0);var SLASH_URL_SAFE='_'.charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;// '+'\nif(code===SLASH||code===SLASH_URL_SAFE)return 63;// '/'\nif(code<NUMBER)return-1;//no match\nif(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26;}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error('Invalid string. Length must be a multiple of 4');}// the number of equal signs (place holders)\n// if there are two placeholders, than the two characters before it\n// represent one byte\n// if there is only one, then the three characters before it represent 2 bytes\n// this is just a cheap hack to not do indexOf twice\nvar len=b64.length;placeHolders='='===b64.charAt(len-2)?2:'='===b64.charAt(len-1)?1:0;// base64 is 4/3 + up to two characters of the original data\narr=new Arr(b64.length*3/4-placeHolders);// if there are placeholders, only get up to the last complete 4 chars\nl=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v;}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&0xFF0000)>>16);push((tmp&0xFF00)>>8);push(tmp&0xFF);}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&0xFF);}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&0xFF);push(tmp&0xFF);}return arr;}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,// if we have 1 byte left, pad 2 bytes\noutput=\"\",temp,length;function encode(num){return lookup.charAt(num);}function tripletToBase64(num){return encode(num>>18&0x3F)+encode(num>>12&0x3F)+encode(num>>6&0x3F)+encode(num&0x3F);}// go through the array every three bytes, we'll deal with trailing stuff later\nfor(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp);}// pad the end with zeros, but make sure to not forget the extra bytes\nswitch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&0x3F);output+='==';break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&0x3F);output+=encode(temp<<2&0x3F);output+='=';break;}return output;}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64;})(typeof exports==='undefined'?this.base64js={}:exports);},{}],11:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity;}else{m=m+Math.pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*Math.pow(2,e-mLen);};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax;}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*Math.pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias;}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0;}}for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128;};},{}],12:[function(require,module,exports){/**\r\n * isArray\r\n */var isArray=Array.isArray;/**\r\n * toString\r\n */var str=Object.prototype.toString;/**\r\n * Whether or not the given `val`\r\n * is an array.\r\n *\r\n * example:\r\n *\r\n *        isArray([]);\r\n *        // > true\r\n *        isArray(arguments);\r\n *        // > false\r\n *        isArray('');\r\n *        // > false\r\n *\r\n * @param {mixed} val\r\n * @return {bool}\r\n */module.exports=isArray||function(val){return!!val&&'[object Array]'==str.call(val);};},{}],13:[function(require,module,exports){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nfunction EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined;}module.exports=EventEmitter;// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners=10;// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError('n must be a positive number');this._maxListeners=n;return this;};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};// If there is no 'error' event listener then throw.\nif(type==='error'){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er;// Unhandled 'error' event\n}throw TypeError('Uncaught, unspecified \"error\" event.');}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){// fast cases\ncase 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;// slower\ndefault:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++){args[i-1]=arguments[i];}handler.apply(this,args);}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++){args[i-1]=arguments[i];}listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++){listeners[i].apply(this,args);}}return true;};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError('listener must be a function');if(!this._events)this._events={};// To avoid recursion in the case that type === \"newListener\"! Before\n// adding it to the listeners, first emit \"newListener\".\nif(this._events.newListener)this.emit('newListener',type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])// Optimize the case of one listener. Don't need the extra array object.\nthis._events[type]=listener;else if(isObject(this._events[type]))// If we've already got an array, just append.\nthis._events[type].push(listener);else// Adding the second element, need to change to array.\nthis._events[type]=[this._events[type],listener];// Check for listener leak\nif(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners;}else{m=EventEmitter.defaultMaxListeners;}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error('(node) warning: possible EventEmitter memory '+'leak detected. %d listeners added. '+'Use emitter.setMaxListeners() to increase limit.',this._events[type].length);if(typeof console.trace==='function'){// not supported in IE 10\nconsole.trace();}}}return this;};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError('listener must be a function');var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments);}}g.listener=listener;this.on(type,g);return this;};// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError('listener must be a function');if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit('removeListener',type,listener);}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break;}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type];}else{list.splice(position,1);}if(this._events.removeListener)this.emit('removeListener',type,listener);}return this;};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;// not listening for removeListener, no need to emit\nif(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this;}// emit removeListener for all listeners on all events\nif(arguments.length===0){for(key in this._events){if(key==='removeListener')continue;this.removeAllListeners(key);}this.removeAllListeners('removeListener');this._events={};return this;}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners);}else{// LIFO order\nwhile(listeners.length){this.removeListener(type,listeners[listeners.length-1]);}}delete this._events[type];return this;};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret;};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret;};function isFunction(arg){return typeof arg==='function';}function isNumber(arg){return typeof arg==='number';}function isObject(arg){return(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='object'&&arg!==null;}function isUndefined(arg){return arg===void 0;}},{}],14:[function(require,module,exports){if(typeof Object.create==='function'){// implementation from standard node.js 'util' module\nmodule.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{// old school shim for old browsers\nmodule.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;};}},{}],15:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]';};},{}],16:[function(require,module,exports){// shim for using process in browser\nvar process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return;}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]();}len=queue.length;}draining=false;}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0);}};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';// empty string to avoid regexp issues\nprocess.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error('process.binding is not supported');};// TODO(shtylman)\nprocess.cwd=function(){return'/';};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};},{}],17:[function(require,module,exports){module.exports=require(\"./lib/_stream_duplex.js\");},{\"./lib/_stream_duplex.js\":18}],18:[function(require,module,exports){(function(process){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\nmodule.exports=Duplex;/*<replacement>*/var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};/*</replacement>*//*<replacement>*/var util=require('core-util-is');util.inherits=require('inherits');/*</replacement>*/var Readable=require('./_stream_readable');var Writable=require('./_stream_writable');util.inherits(Duplex,Readable);forEach(objectKeys(Writable.prototype),function(method){if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];});function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}// the no-half-open enforcer\nfunction onend(){// if we allow half-open state, or if the writable side ended,\n// then we're ok.\nif(this.allowHalfOpen||this._writableState.ended)return;// no more data can be written.\n// But allow more writes to happen in this tick.\nprocess.nextTick(this.end.bind(this));}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i);}}}).call(this,require('_process'));},{\"./_stream_readable\":20,\"./_stream_writable\":22,\"_process\":16,\"core-util-is\":23,\"inherits\":14}],19:[function(require,module,exports){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\nmodule.exports=PassThrough;var Transform=require('./_stream_transform');/*<replacement>*/var util=require('core-util-is');util.inherits=require('inherits');/*</replacement>*/util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},{\"./_stream_transform\":21,\"core-util-is\":23,\"inherits\":14}],20:[function(require,module,exports){(function(process){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nmodule.exports=Readable;/*<replacement>*/var isArray=require('isarray');/*</replacement>*//*<replacement>*/var Buffer=require('buffer').Buffer;/*</replacement>*/Readable.ReadableState=ReadableState;var EE=require('events').EventEmitter;/*<replacement>*/if(!EE.listenerCount)EE.listenerCount=function(emitter,type){return emitter.listeners(type).length;};/*</replacement>*/var Stream=require('stream');/*<replacement>*/var util=require('core-util-is');util.inherits=require('inherits');/*</replacement>*/var StringDecoder;/*<replacement>*/var debug=require('util');if(debug&&debug.debuglog){debug=debug.debuglog('stream');}else{debug=function debug(){};}/*</replacement>*/util.inherits(Readable,Stream);function ReadableState(options,stream){var Duplex=require('./_stream_duplex');options=options||{};// the point at which it stops calling _read() to fill the buffer\n// Note: 0 is a valid value, means \"don't call _read preemptively ever\"\nvar hwm=options.highWaterMark;var defaultHwm=options.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;// cast to ints.\nthis.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;// a flag to be able to tell if the onwrite cb is called immediately,\n// or on a later tick.  We set this to true at first, because any\n// actions that shouldn't happen until \"later\" should generally also\n// not happen before the first write call.\nthis.sync=true;// whenever we return null, then we set a flag to say\n// that we're awaiting a 'readable' event emission.\nthis.needReadable=false;this.emittedReadable=false;this.readableListening=false;// object stream flag. Used to make read(n) ignore n and to\n// make all the buffer merging and length checks go away\nthis.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.readableObjectMode;// Crypto is kind of old and crusty.  Historically, its default string\n// encoding is 'binary' so we have to make this configurable.\n// Everything else in the universe uses 'utf8', though.\nthis.defaultEncoding=options.defaultEncoding||'utf8';// when piping, we only care about 'readable' events that happen\n// after read()ing all the bytes and not getting any pushback.\nthis.ranOut=false;// the number of writers that are awaiting a drain event in .pipe()s\nthis.awaitDrain=0;// if true, a maybeReadMore has been scheduled\nthis.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){var Duplex=require('./_stream_duplex');if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);// legacy\nthis.readable=true;Stream.call(this);}// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push=function(chunk,encoding){var state=this._readableState;if(util.isString(chunk)&&!state.objectMode){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding='';}}return readableAddChunk(this,state,chunk,encoding,false);};// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,'',true);};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(util.isNullOrUndefined(chunk)){state.reading=false;if(!state.ended)onEofChunk(stream,state);}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error('stream.push() after EOF');stream.emit('error',e);}else if(state.endEmitted&&addToFront){var e=new Error('stream.unshift() after end event');stream.emit('error',e);}else{if(state.decoder&&!addToFront&&!encoding)chunk=state.decoder.write(chunk);if(!addToFront)state.reading=false;// if we want the data now, just emit it.\nif(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{// update the buffer info.\nstate.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}}else if(!addToFront){state.reading=false;}return needMoreData(state);}// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}// backwards compatibility.\nReadable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};// Don't raise the hwm > 128MB\nvar MAX_HWM=0x800000;function roundUpToNextPowerOf2(n){if(n>=MAX_HWM){n=MAX_HWM;}else{// Get the next highest power of 2\nn--;for(var p=1;p<32;p<<=1){n|=n>>p;}n++;}return n;}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(isNaN(n)||util.isNull(n)){// only flow one buffer at a time\nif(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length;}if(n<=0)return 0;// If we're asking for more than the target buffer level,\n// then raise the water mark.  Bump up to the next highest\n// power of 2, to prevent increasing it excessively in tiny\n// amounts.\nif(n>state.highWaterMark)state.highWaterMark=roundUpToNextPowerOf2(n);// don't have that much.  return null, unless we've ended.\nif(n>state.length){if(!state.ended){state.needReadable=true;return 0;}else return state.length;}return n;}// you can override either this method, or the async _read(n) below.\nReadable.prototype.read=function(n){debug('read',n);var state=this._readableState;var nOrig=n;if(!util.isNumber(n)||n>0)state.emittedReadable=false;// if we're doing read(0) to trigger a readable event, but we\n// already have a bunch of data in the buffer, then just trigger\n// the 'readable' event and move on.\nif(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);// if we've ended, and we're now clear, then finish it up.\nif(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}// All the actual chunk generation logic needs to be\n// *below* the call to _read.  The reason is that in certain\n// synthetic stream cases, such as passthrough streams, _read\n// may be a completely synchronous operation which may change\n// the state of the read buffer, providing enough data when\n// before there was *not* enough.\n//\n// So, the steps are:\n// 1. Figure out what the state of things will be after we do\n// a read from the buffer.\n//\n// 2. If that resulting state will trigger a _read, then call _read.\n// Note that this may be asynchronous, or synchronous.  Yes, it is\n// deeply ugly to write APIs this way, but that still doesn't mean\n// that the Readable class should behave improperly, as streams are\n// designed to be sync/async agnostic.\n// Take note if the _read call is sync or async (ie, if the read call\n// has returned yet), so that we know whether or not it's safe to emit\n// 'readable' etc.\n//\n// 3. Actually pull the requested chunks out of the buffer and return.\n// if we need a readable event, then we need to do some reading.\nvar doRead=state.needReadable;debug('need readable',doRead);// if we currently have less than the highWaterMark, then also read some\nif(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}// however, if we've ended, then there's no point, and if we're already\n// reading, then it's unnecessary.\nif(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}if(doRead){debug('do read');state.reading=true;state.sync=true;// if the length is currently zero, then we *need* a readable event.\nif(state.length===0)state.needReadable=true;// call internal read method\nthis._read(state.highWaterMark);state.sync=false;}// If _read pushed data synchronously, then `reading` will be false,\n// and we need to re-evaluate how much data we can return to the user.\nif(doRead&&!state.reading)n=howMuchToRead(nOrig,state);var ret;if(n>0)ret=fromList(n,state);else ret=null;if(util.isNull(ret)){state.needReadable=true;n=0;}state.length-=n;// If we have nothing in the buffer, then we want to know\n// as soon as we *do* get something into the buffer.\nif(state.length===0&&!state.ended)state.needReadable=true;// If we tried to read() past the EOF, then emit end on the next tick.\nif(nOrig!==n&&state.ended&&state.length===0)endReadable(this);if(!util.isNull(ret))this.emit('data',ret);return ret;};function chunkInvalid(state,chunk){var er=null;if(!util.isBuffer(chunk)&&!util.isString(chunk)&&!util.isNullOrUndefined(chunk)&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;// emit 'readable' now to make sure it gets picked up.\nemitReadable(stream);}// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)process.nextTick(function(){emitReadable_(stream);});else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(function(){maybeReadMore_(stream,state);});}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)// didn't get any data, stop spinning.\nbreak;else len=state.length;}state.readingMore=false;}// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read=function(n){this.emit('error',new Error('not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)process.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable){debug('onunpipe');if(readable===src){cleanup();}}function onend(){debug('onend');dest.end();}// when the dest drains, it reduces the awaitDrain counter\n// on the source.  This would be more elegant with a .once()\n// handler in flow(), but adding and removing repeatedly is\n// too slow.\nvar ondrain=pipeOnDrain(src);dest.on('drain',ondrain);function cleanup(){debug('cleanup');// cleanup event handlers once the pipe is broken\ndest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',cleanup);src.removeListener('data',ondata);// if the reader is waiting for a drain event from this\n// specific writer, then it would cause it to never start\n// flowing again.\n// So, if this is awaiting a drain, then we just call it now.\n// If we don't know, then assume that we are waiting for one.\nif(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}src.on('data',ondata);function ondata(chunk){debug('ondata');var ret=dest.write(chunk);if(false===ret){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;src.pause();}}// if the dest has an error, then stop piping into it.\n// however, don't suppress the throwing behavior for this.\nfunction onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EE.listenerCount(dest,'error')===0)dest.emit('error',er);}// This is a brutally ugly hack to make sure that our error handler\n// is attached before any userland ones.  NEVER DO THIS.\nif(!dest._events||!dest._events.error)dest.on('error',onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];// Both close and finish should trigger unpipe, but only once.\nfunction onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}// tell the dest that it's being piped to\ndest.emit('pipe',src);// start the flow if it hasn't been started already.\nif(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EE.listenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;// if we're not piping anywhere, then do nothing.\nif(state.pipesCount===0)return this;// just one destination.  most common case.\nif(state.pipesCount===1){// passed in one, but it's not the right one.\nif(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;// got a match.\nstate.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this);return this;}// slow case. multiple pipe destinations.\nif(!dest){// remove all.\nvar dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this);}return this;}// try to find the right one.\nvar i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this);return this;};// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);// If listening to data, and it has not explicitly been paused,\n// then call resume to start the flow of data on the next tick.\nif(ev==='data'&&false!==this._readableState.flowing){this.resume();}if(ev==='readable'&&this.readable){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){var self=this;process.nextTick(function(){debug('readable nexttick read 0');self.read(0);});}else if(state.length){emitReadable(this,state);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;if(!state.reading){debug('resume read 0');this.read(0);}resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(function(){resume_(stream,state);});}}function resume_(stream,state){state.resumeScheduled=false;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);if(state.flowing){do{var chunk=stream.read();}while(null!==chunk&&state.flowing);}}// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk);}self.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(!chunk||!state.objectMode&&!chunk.length)return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause();}});// proxy all the other methods.\n// important when wrapping filters and duplexes.\nfor(var i in stream){if(util.isFunction(stream[i])&&util.isUndefined(this[i])){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}// proxy certain important events.\nvar events=['error','close','destroy','pause','resume'];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev));});// when we try to consume some more bytes, simply unpause the\n// underlying stream.\nself._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return self;};// exposed for testing purposes only.\nReadable._fromList=fromList;// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\nfunction fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;// nothing in the list, definitely empty.\nif(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){// read it all, truncate the array.\nif(stringMode)ret=list.join('');else ret=Buffer.concat(list,length);list.length=0;}else{// read just some of it.\nif(n<list[0].length){// just take a part of the first list item.\n// slice is the same for buffers and strings.\nvar buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n);}else if(n===list[0].length){// first list is a perfect match\nret=list.shift();}else{// complex case.\n// we have enough to cover it, but it spans past the first buffer.\nif(stringMode)ret='';else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy;}}}return ret;}function endReadable(stream){var state=stream._readableState;// If we get here before consuming all the bytes, then that is a\n// bug in node.  Should never happen.\nif(state.length>0)throw new Error('endReadable called on non-empty stream');if(!state.endEmitted){state.ended=true;process.nextTick(function(){// Check that we didn't get one last unshift.\nif(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}});}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i);}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}}).call(this,require('_process'));},{\"./_stream_duplex\":18,\"_process\":16,\"buffer\":9,\"core-util-is\":23,\"events\":13,\"inherits\":14,\"isarray\":15,\"stream\":28,\"string_decoder/\":29,\"util\":8}],21:[function(require,module,exports){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\nmodule.exports=Transform;var Duplex=require('./_stream_duplex');/*<replacement>*/var util=require('core-util-is');util.inherits=require('inherits');/*</replacement>*/util.inherits(Transform,Duplex);function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data);};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit('error',new Error('no writecb in Transform class'));ts.writechunk=null;ts.writecb=null;if(!util.isNullOrUndefined(data))stream.push(data);if(cb)cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState=new TransformState(options,this);// when the writable side finishes, then flush out anything remaining.\nvar stream=this;// start out asking for a readable event once data is transformed.\nthis._readableState.needReadable=true;// we have implemented the _read method, and done the other things\n// that Readable wants before the first _read call, so unset the\n// sync guard flag.\nthis._readableState.sync=false;this.once('prefinish',function(){if(util.isFunction(this._flush))this._flush(function(er){done(stream,er);});else done(stream);});}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform=function(chunk,encoding,cb){throw new Error('not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read=function(n){var ts=this._transformState;if(!util.isNull(ts.writechunk)&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{// mark that we need a transform, so that any data that comes in\n// will get processed, now that we've asked for it.\nts.needTransform=true;}};function done(stream,er){if(er)return stream.emit('error',er);// if there's nothing in the write buffer, then that means\n// that nothing more will ever be provided\nvar ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error('calling transform done when ws.length != 0');if(ts.transforming)throw new Error('calling transform done when still transforming');return stream.push(null);}},{\"./_stream_duplex\":18,\"core-util-is\":23,\"inherits\":14}],22:[function(require,module,exports){(function(process){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, cb), and it'll handle all\n// the drain event emission and buffering.\nmodule.exports=Writable;/*<replacement>*/var Buffer=require('buffer').Buffer;/*</replacement>*/Writable.WritableState=WritableState;/*<replacement>*/var util=require('core-util-is');util.inherits=require('inherits');/*</replacement>*/var Stream=require('stream');util.inherits(Writable,Stream);function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;}function WritableState(options,stream){var Duplex=require('./_stream_duplex');options=options||{};// the point at which write() starts returning false\n// Note: 0 is a valid value, means that we always return false if\n// the entire buffer is not flushed immediately on write()\nvar hwm=options.highWaterMark;var defaultHwm=options.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;// object stream flag to indicate whether or not this stream\n// contains buffers or objects.\nthis.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.writableObjectMode;// cast to ints.\nthis.highWaterMark=~~this.highWaterMark;this.needDrain=false;// at the start of calling end()\nthis.ending=false;// when end() has been called, and returned\nthis.ended=false;// when 'finish' is emitted\nthis.finished=false;// should we decode strings into buffers before passing to _write?\n// this is here so that some node-core streams can optimize string\n// handling at a lower level.\nvar noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;// Crypto is kind of old and crusty.  Historically, its default string\n// encoding is 'binary' so we have to make this configurable.\n// Everything else in the universe uses 'utf8', though.\nthis.defaultEncoding=options.defaultEncoding||'utf8';// not an actual buffer we keep track of, but a measurement\n// of how much we're waiting to get pushed to some underlying\n// socket or file.\nthis.length=0;// a flag to see when we're in the middle of a write.\nthis.writing=false;// when true all writes will be buffered until .uncork() call\nthis.corked=0;// a flag to be able to tell if the onwrite cb is called immediately,\n// or on a later tick.  We set this to true at first, because any\n// actions that shouldn't happen until \"later\" should generally also\n// not happen before the first write call.\nthis.sync=true;// a flag to know if we're processing previously buffered items, which\n// may call the _write() callback in the same tick, so that we don't\n// end up in an overlapped onwrite situation.\nthis.bufferProcessing=false;// the callback that's passed to _write(chunk,cb)\nthis.onwrite=function(er){onwrite(stream,er);};// the callback that the user supplies to write(chunk,encoding,cb)\nthis.writecb=null;// the amount that is being written when _write is called.\nthis.writelen=0;this.buffer=[];// number of pending user-supplied write callbacks\n// this must be 0 before 'finish' can be emitted\nthis.pendingcb=0;// emit prefinish if the only thing we're waiting for is _write cbs\n// This is relevant for synchronous Transform streams\nthis.prefinished=false;// True if the error was already emitted and should not be thrown again\nthis.errorEmitted=false;}function Writable(options){var Duplex=require('./_stream_duplex');// Writable ctor is applied to Duplexes, though they're not\n// instanceof Writable, they're instanceof Readable.\nif(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);// legacy.\nthis.writable=true;Stream.call(this);}// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe. Not readable.'));};function writeAfterEnd(stream,state,cb){var er=new Error('write after end');// TODO: defer error events consistently everywhere, not just the cb\nstream.emit('error',er);process.nextTick(function(){cb(er);});}// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream,state,chunk,cb){var valid=true;if(!util.isBuffer(chunk)&&!util.isString(chunk)&&!util.isNullOrUndefined(chunk)&&!state.objectMode){var er=new TypeError('Invalid non-string/buffer chunk');stream.emit('error',er);process.nextTick(function(){cb(er);});valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(util.isFunction(encoding)){cb=encoding;encoding=null;}if(util.isBuffer(chunk))encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(!util.isFunction(cb))cb=function cb(){};if(state.ended)writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.buffer.length)clearBuffer(this,state);}};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&util.isString(chunk)){chunk=new Buffer(chunk,encoding);}return chunk;}// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(util.isBuffer(chunk))encoding='buffer';var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;// we must ensure that previous needDrain will not be reset to false.\nif(!ret)state.needDrain=true;if(state.writing||state.corked)state.buffer.push(new WriteReq(chunk,encoding,cb));else doWrite(stream,state,false,len,chunk,encoding,cb);return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){if(sync)process.nextTick(function(){state.pendingcb--;cb(er);});else{state.pendingcb--;cb(er);}stream._writableState.errorEmitted=true;stream.emit('error',er);}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{// Check if we're actually ready to finish, but don't emit yet\nvar finished=needFinish(stream,state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.buffer.length){clearBuffer(stream,state);}if(sync){process.nextTick(function(){afterWrite(stream,state,finished,cb);});}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream,state){state.bufferProcessing=true;if(stream._writev&&state.buffer.length>1){// Fast case, write everything using _writev()\nvar cbs=[];for(var c=0;c<state.buffer.length;c++){cbs.push(state.buffer[c].callback);}// count the one we are adding, as well.\n// TODO(isaacs) clean this up\nstate.pendingcb++;doWrite(stream,state,true,state.length,state.buffer,'',function(err){for(var i=0;i<cbs.length;i++){state.pendingcb--;cbs[i](err);}});// Clear buffer\nstate.buffer=[];}else{// Slow case, write chunks one-by-one\nfor(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);// if we didn't call the onwrite immediately, then\n// it means that we need to wait until it does.\n// also, that means that the chunk and cb are currently\n// being processed, so move the buffer counter past them.\nif(state.writing){c++;break;}}if(c<state.buffer.length)state.buffer=state.buffer.slice(c);else state.buffer.length=0;}state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(util.isFunction(chunk)){cb=chunk;chunk=null;encoding=null;}else if(util.isFunction(encoding)){cb=encoding;encoding=null;}if(!util.isNullOrUndefined(chunk))this.write(chunk,encoding);// .end() fully uncorks\nif(state.corked){state.corked=1;this.uncork();}// ignore unnecessary end() calls.\nif(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing;}function prefinish(stream,state){if(!state.prefinished){state.prefinished=true;stream.emit('prefinish');}}function finishMaybe(stream,state){var need=needFinish(stream,state);if(need){if(state.pendingcb===0){prefinish(stream,state);state.finished=true;stream.emit('finish');}else prefinish(stream,state);}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once('finish',cb);}state.ended=true;}}).call(this,require('_process'));},{\"./_stream_duplex\":18,\"_process\":16,\"buffer\":9,\"core-util-is\":23,\"inherits\":14,\"stream\":28}],23:[function(require,module,exports){(function(Buffer){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar){return Array.isArray(ar);}exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}exports.isString=isString;function isSymbol(arg){return(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='symbol';}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='object'&&arg!==null;}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='symbol'||// ES6 symbol\ntypeof arg==='undefined';}exports.isPrimitive=isPrimitive;function isBuffer(arg){return Buffer.isBuffer(arg);}exports.isBuffer=isBuffer;function objectToString(o){return Object.prototype.toString.call(o);}}).call(this,require(\"buffer\").Buffer);},{\"buffer\":9}],24:[function(require,module,exports){module.exports=require(\"./lib/_stream_passthrough.js\");},{\"./lib/_stream_passthrough.js\":19}],25:[function(require,module,exports){exports=module.exports=require('./lib/_stream_readable.js');exports.Stream=require('stream');exports.Readable=exports;exports.Writable=require('./lib/_stream_writable.js');exports.Duplex=require('./lib/_stream_duplex.js');exports.Transform=require('./lib/_stream_transform.js');exports.PassThrough=require('./lib/_stream_passthrough.js');},{\"./lib/_stream_duplex.js\":18,\"./lib/_stream_passthrough.js\":19,\"./lib/_stream_readable.js\":20,\"./lib/_stream_transform.js\":21,\"./lib/_stream_writable.js\":22,\"stream\":28}],26:[function(require,module,exports){module.exports=require(\"./lib/_stream_transform.js\");},{\"./lib/_stream_transform.js\":21}],27:[function(require,module,exports){module.exports=require(\"./lib/_stream_writable.js\");},{\"./lib/_stream_writable.js\":22}],28:[function(require,module,exports){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nmodule.exports=Stream;var EE=require('events').EventEmitter;var inherits=require('inherits');inherits(Stream,EE);Stream.Readable=require('readable-stream/readable.js');Stream.Writable=require('readable-stream/writable.js');Stream.Duplex=require('readable-stream/duplex.js');Stream.Transform=require('readable-stream/transform.js');Stream.PassThrough=require('readable-stream/passthrough.js');// Backwards-compat with node 0.4.x\nStream.Stream=Stream;// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\nfunction Stream(){EE.call(this);}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause();}}}source.on('data',ondata);function ondrain(){if(source.readable&&source.resume){source.resume();}}dest.on('drain',ondrain);// If the 'end' option is not supplied, dest.end() will be called when\n// source gets the 'end' or 'close' events.  Only dest.end() once.\nif(!dest._isStdio&&(!options||options.end!==false)){source.on('end',onend);source.on('close',onclose);}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end();}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==='function')dest.destroy();}// don't leave dangling pipes when there are errors.\nfunction onerror(er){cleanup();if(EE.listenerCount(this,'error')===0){throw er;// Unhandled stream error in pipe.\n}}source.on('error',onerror);dest.on('error',onerror);// remove all the event listeners that were added.\nfunction cleanup(){source.removeListener('data',ondata);dest.removeListener('drain',ondrain);source.removeListener('end',onend);source.removeListener('close',onclose);source.removeListener('error',onerror);dest.removeListener('error',onerror);source.removeListener('end',cleanup);source.removeListener('close',cleanup);dest.removeListener('close',cleanup);}source.on('end',cleanup);source.on('close',cleanup);dest.on('close',cleanup);dest.emit('pipe',source);// Allow for unix-like usage: A.pipe(B).pipe(C)\nreturn dest;};},{\"events\":13,\"inherits\":14,\"readable-stream/duplex.js\":17,\"readable-stream/passthrough.js\":24,\"readable-stream/readable.js\":25,\"readable-stream/transform.js\":26,\"readable-stream/writable.js\":27}],29:[function(require,module,exports){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar Buffer=require('buffer').Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return true;default:return false;}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error('Unknown encoding: '+encoding);}}// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||'utf8').toLowerCase().replace(/[-_]/,'');assertEncoding(encoding);switch(this.encoding){case'utf8':// CESU-8 represents each of Surrogate Pair by 3-bytes\nthis.surrogateSize=3;break;case'ucs2':case'utf16le':// UTF-16 represents each of Surrogate Pair by 2-bytes\nthis.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case'base64':// Base-64 stores 3 bytes in 4 chars, and pads the remainder.\nthis.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return;}// Enough space to store all bytes of a single character. UTF-8 needs 4\n// bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\nthis.charBuffer=new Buffer(6);// Number of bytes received for the current incomplete multi-byte character.\nthis.charReceived=0;// Number of bytes expected for the current incomplete multi-byte character.\nthis.charLength=0;};// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write=function(buffer){var charStr='';// if our last write ended with an incomplete multibyte character\nwhile(this.charLength){// determine how many remaining bytes this buffer has to offer for this char\nvar available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;// add the new bytes to the char buffer\nbuffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){// still not enough chars in this buffer? wait for more ...\nreturn'';}// remove bytes belonging to the current character from the buffer\nbuffer=buffer.slice(available,buffer.length);// get the character that was split\ncharStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);// CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\nvar charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=0xD800&&charCode<=0xDBFF){this.charLength+=this.surrogateSize;charStr='';continue;}this.charReceived=this.charLength=0;// if there are no more bytes in this buffer, just emit our char\nif(buffer.length===0){return charStr;}break;}// determine and set charLength / charReceived\nthis.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){// buffer the incomplete character bytes we got\nbuffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived;}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);// CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\nif(charCode>=0xD800&&charCode<=0xDBFF){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end);}// or just emit the charStr\nreturn charStr;};// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar=function(buffer){// determine how many bytes we have to check at the end of this buffer\nvar i=buffer.length>=3?3:buffer.length;// Figure out if one of the last i bytes of our buffer announces an\n// incomplete char.\nfor(;i>0;i--){var c=buffer[buffer.length-i];// See http://en.wikipedia.org/wiki/UTF-8#Description\n// 110XXXXX\nif(i==1&&c>>5==0x06){this.charLength=2;break;}// 1110XXXX\nif(i<=2&&c>>4==0x0E){this.charLength=3;break;}// 11110XXX\nif(i<=3&&c>>3==0x1E){this.charLength=4;break;}}this.charReceived=i;};StringDecoder.prototype.end=function(buffer){var res='';if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc);}return res;};function passThroughWrite(buffer){return buffer.toString(this.encoding);}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0;}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0;}},{\"buffer\":9}],30:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function';};},{}],31:[function(require,module,exports){(function(process,global){// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]));}return objects.join(' ');}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==='%%')return'%';if(i>=len)return x;switch(x){case'%s':return String(args[i++]);case'%d':return Number(args[i++]);case'%j':try{return JSON.stringify(args[i++]);}catch(_){return'[Circular]';}default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=' '+x;}else{str+=' '+inspect(x);}}return str;};// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate=function(fn,msg){// Allow for deprecating things in the process of starting up.\nif(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments);};}if(process.noDeprecation===true){return fn;}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg);}else if(process.traceDeprecation){console.trace(msg);}else{console.error(msg);}warned=true;}return fn.apply(this,arguments);}return deprecated;};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||'';set=set.toUpperCase();if(!debugs[set]){if(new RegExp('\\\\b'+set+'\\\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error('%s %d: %s',set,pid,msg);};}else{debugs[set]=function(){};}}return debugs[set];};/**\r\n * Echos the value of a value. Trys to print the value out\r\n * in the best way possible given the different types.\r\n *\r\n * @param {Object} obj The object to print out.\r\n * @param {Object} opts Optional options object that alters the output.\r\n *//* legacy: obj, showHidden, depth, colors*/function inspect(obj,opts){// default options\nvar ctx={seen:[],stylize:stylizeNoColor};// legacy...\nif(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){// legacy...\nctx.showHidden=opts;}else if(opts){// got an \"options\" object\nexports._extend(ctx,opts);}// set default options\nif(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth);}exports.inspect=inspect;// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]};// Don't use 'blue' not visible on cmd.exe\ninspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta',// \"name\": intentionally not styling\n'regexp':'red'};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return\"\\u001b[\"+inspect.colors[style][0]+'m'+str+\"\\u001b[\"+inspect.colors[style][1]+'m';}else{return str;}}function stylizeNoColor(str,styleType){return str;}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true;});return hash;}function formatValue(ctx,value,recurseTimes){// Provide a hook for user-specified inspect functions.\n// Check that value is an object with an inspect function on it\nif(ctx.customInspect&&value&&isFunction(value.inspect)&&// Filter out the util module, it's inspect function is special\nvalue.inspect!==exports.inspect&&// Also filter out any prototype objects using the circular check.\n!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes);}return ret;}// Primitive types cannot have properties\nvar primitive=formatPrimitive(ctx,value);if(primitive){return primitive;}// Look up the keys of the object.\nvar keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);}// IE doesn't make error fields non-enumerable\n// http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\nif(isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0)){return formatError(value);}// Some type of object without properties can be shortcutted.\nif(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}if(isError(value)){return formatError(value);}}var base='',array=false,braces=['{','}'];// Make Array say that they are Array\nif(isArray(value)){array=true;braces=['[',']'];}// Make functions say that they are functions\nif(isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']';}// Make RegExps say that they are RegExps\nif(isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);}// Make dates with properties first say the date\nif(isDate(value)){base=' '+Date.prototype.toUTCString.call(value);}// Make error with message first say the error\nif(isError(value)){base=' '+formatError(value);}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else{return ctx.stylize('[Object]','special');}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}ctx.seen.pop();return reduceToSingleString(output,base,braces);}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\\''+JSON.stringify(value).replace(/^\"|\"$/g,'').replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+'\\'';return ctx.stylize(simple,'string');}if(isNumber(value))return ctx.stylize(''+value,'number');if(isBoolean(value))return ctx.stylize(''+value,'boolean');// For some reason typeof null is \"object\", so special case here.\nif(isNull(value))return ctx.stylize('null','null');}function formatError(value){return'['+Error.prototype.toString.call(value)+']';}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else{output.push('');}}keys.forEach(function(key){if(!key.match(/^\\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else{str=ctx.stylize('[Getter]','special');}}else{if(desc.set){str=ctx.stylize('[Setter]','special');}}if(!hasOwnProperty(visibleKeys,key)){name='['+key+']';}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null);}else{str=formatValue(ctx,desc.value,recurseTimes-1);}if(str.indexOf('\\n')>-1){if(array){str=str.split('\\n').map(function(line){return'  '+line;}).join('\\n').substr(2);}else{str='\\n'+str.split('\\n').map(function(line){return'   '+line;}).join('\\n');}}}else{str=ctx.stylize('[Circular]','special');}}if(isUndefined(name)){if(array&&key.match(/^\\d+$/)){return str;}name=JSON.stringify(''+key);if(name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else{name=name.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\");name=ctx.stylize(name,'string');}}return name+': '+str;}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf('\\n')>=0)numLinesEst++;return prev+cur.replace(/\\u001b\\[\\d\\d?m/g,'').length+1;},0);if(length>60){return braces[0]+(base===''?'':base+'\\n ')+' '+output.join(',\\n  ')+' '+braces[1];}return braces[0]+base+' '+output.join(', ')+' '+braces[1];}// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar){return Array.isArray(ar);}exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}exports.isString=isString;function isSymbol(arg){return(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='symbol';}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='object'&&arg!==null;}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||(typeof arg===\"undefined\"?\"undefined\":_typeof(arg))==='symbol'||// ES6 symbol\ntypeof arg==='undefined';}exports.isPrimitive=isPrimitive;exports.isBuffer=require('./support/isBuffer');function objectToString(o){return Object.prototype.toString.call(o);}function pad(n){return n<10?'0'+n.toString(10):n.toString(10);}var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];// 26 Feb 16:19:34\nfunction timestamp(){var d=new Date();var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return[d.getDate(),months[d.getMonth()],time].join(' ');}// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log=function(){console.log('%s - %s',timestamp(),exports.format.apply(exports,arguments));};/**\r\n * Inherit the prototype methods from one constructor into another.\r\n *\r\n * The Function.prototype.inherits from lang.js rewritten as a standalone\r\n * function (not on Function.prototype). NOTE: If this file is to be loaded\r\n * during bootstrapping this function needs to be rewritten using some native\r\n * functions as prototype setup using normal JavaScript does not work as\r\n * expected during bootstrapping (see mirror.js in r114903).\r\n *\r\n * @param {function} ctor Constructor function which needs to inherit the\r\n *     prototype.\r\n * @param {function} superCtor Constructor function to inherit prototype from.\r\n */exports.inherits=require('inherits');exports._extend=function(origin,add){// Don't do anything if add isn't an object\nif(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}return origin;};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}}).call(this,require('_process'),typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:typeof window!==\"undefined\"?window:{});},{\"./support/isBuffer\":30,\"_process\":16,\"inherits\":14}],32:[function(require,module,exports){/**\r\n * Slice reference.\r\n */var slice=[].slice;/**\r\n * Bind `obj` to `fn`.\r\n *\r\n * @param {Object} obj\r\n * @param {Function|String} fn or string\r\n * @return {Function}\r\n * @api public\r\n */module.exports=function(obj,fn){if('string'==typeof fn)fn=obj[fn];if('function'!=typeof fn)throw new Error('bind() requires a function');var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)));};};},{}],33:[function(require,module,exports){/**\r\n * This is the web browser implementation of `debug()`.\r\n *\r\n * Expose `debug()` as the module.\r\n */exports=module.exports=require('./debug');exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;/**\r\n * Use chrome.storage.local if we are in an app\r\n */var storage;if(typeof chrome!=='undefined'&&typeof chrome.storage!=='undefined')storage=chrome.storage.local;else storage=localstorage();/**\r\n * Colors.\r\n */exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];/**\r\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\r\n * and the Firebug extension (any Firefox version) are known\r\n * to support \"%c\" CSS customizations.\r\n *\r\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\r\n */function useColors(){// is webkit? http://stackoverflow.com/a/16459606/376773\nreturn'WebkitAppearance'in document.documentElement.style||// is firebug? http://stackoverflow.com/a/398120/376773\nwindow.console&&(console.firebug||console.exception&&console.table)||// is firefox >= v31?\n// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\nnavigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31;}/**\r\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\r\n */exports.formatters.j=function(v){return JSON.stringify(v);};/**\r\n * Colorize log arguments if enabled.\r\n *\r\n * @api public\r\n */function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return args;var c='color: '+this.color;args=[args[0],c,'color: inherit'].concat(Array.prototype.slice.call(args,1));// the final \"%c\" is somewhat tricky, because there could be other\n// arguments passed either before or after the %c, so we need to\n// figure out the correct index to insert the CSS into\nvar index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){// we only are interested in the *last* %c\n// (the user may have provided their own)\nlastC=index;}});args.splice(lastC,0,c);return args;}/**\r\n * Invokes `console.log()` when available.\r\n * No-op when `console.log` is not a \"function\".\r\n *\r\n * @api public\r\n */function log(){// this hackery is required for IE8/9, where\n// the `console.log` function doesn't have 'apply'\nreturn'object'===(typeof console===\"undefined\"?\"undefined\":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}/**\r\n * Save `namespaces`.\r\n *\r\n * @param {String} namespaces\r\n * @api private\r\n */function save(namespaces){try{if(null==namespaces){storage.removeItem('debug');}else{storage.debug=namespaces;}}catch(e){}}/**\r\n * Load `namespaces`.\r\n *\r\n * @return {String} returns the previously persisted debug modes\r\n * @api private\r\n */function load(){var r;try{r=storage.debug;}catch(e){}return r;}/**\r\n * Enable namespaces listed in `localStorage.debug` initially.\r\n */exports.enable(load());/**\r\n * Localstorage attempts to return the localstorage.\r\n *\r\n * This is necessary because safari throws\r\n * when a user disables cookies/localstorage\r\n * and you attempt to access it.\r\n *\r\n * @return {LocalStorage}\r\n * @api private\r\n */function localstorage(){try{return window.localStorage;}catch(e){}}},{\"./debug\":34}],34:[function(require,module,exports){/**\r\n * This is the common logic for both the Node.js and web browser\r\n * implementations of `debug()`.\r\n *\r\n * Expose `debug()` as the module.\r\n */exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require('ms');/**\r\n * The currently active debug mode names, and names to skip.\r\n */exports.names=[];exports.skips=[];/**\r\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\r\n *\r\n * Valid key names are a single, lowercased letter, i.e. \"n\".\r\n */exports.formatters={};/**\r\n * Previously assigned color.\r\n */var prevColor=0;/**\r\n * Previous log timestamp.\r\n */var prevTime;/**\r\n * Select a color.\r\n *\r\n * @return {Number}\r\n * @api private\r\n */function selectColor(){return exports.colors[prevColor++%exports.colors.length];}/**\r\n * Create a debugger with the given `namespace`.\r\n *\r\n * @param {String} namespace\r\n * @return {Function}\r\n * @api public\r\n */function debug(namespace){// define the `disabled` version\nfunction disabled(){}disabled.enabled=false;// define the `enabled` version\nfunction enabled(){var self=enabled;// set `diff` timestamp\nvar curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;// add the `color` if not set\nif(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){// anything else let's inspect with %o\nargs=['%o'].concat(args);}// apply any `formatters` transformations\nvar index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){// if we encounter an escaped % then don't increase the array index\nif(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);// now we need to remove `args[index]` since it's inlined in the `format`\nargs.splice(index,1);index--;}return match;});if('function'===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args);}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args);}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn;}/**\r\n * Enables a debug mode by namespaces. This can include modes\r\n * separated by a colon and wildcards.\r\n *\r\n * @param {String} namespaces\r\n * @api public\r\n */function enable(namespaces){exports.save(namespaces);var split=(namespaces||'').split(/[\\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;// ignore empty strings\nnamespaces=split[i].replace(/\\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}/**\r\n * Disable debug output.\r\n *\r\n * @api public\r\n */function disable(){exports.enable('');}/**\r\n * Returns true if the given mode name is enabled, false otherwise.\r\n *\r\n * @param {String} name\r\n * @return {Boolean}\r\n * @api public\r\n */function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}/**\r\n * Coerce `val`.\r\n *\r\n * @param {Mixed} val\r\n * @return {Mixed}\r\n * @api private\r\n */function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},{\"ms\":35}],35:[function(require,module,exports){/**\r\n * Helpers.\r\n */var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;/**\r\n * Parse or format the given `val`.\r\n *\r\n * Options:\r\n *\r\n *  - `long` verbose formatting [false]\r\n *\r\n * @param {String|Number} val\r\n * @param {Object} options\r\n * @return {String|Number}\r\n * @api public\r\n */module.exports=function(val,options){options=options||{};if('string'==typeof val)return parse(val);return options.long?long(val):short(val);};/**\r\n * Parse the given `str` and return milliseconds.\r\n *\r\n * @param {String} str\r\n * @return {Number}\r\n * @api private\r\n */function parse(str){var match=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;}}/**\r\n * Short format for `ms`.\r\n *\r\n * @param {Number} ms\r\n * @return {String}\r\n * @api private\r\n */function short(ms){if(ms>=d)return Math.round(ms/d)+'d';if(ms>=h)return Math.round(ms/h)+'h';if(ms>=m)return Math.round(ms/m)+'m';if(ms>=s)return Math.round(ms/s)+'s';return ms+'ms';}/**\r\n * Long format for `ms`.\r\n *\r\n * @param {Number} ms\r\n * @return {String}\r\n * @api private\r\n */function long(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}/**\r\n * Pluralization helper.\r\n */function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+' '+name;return Math.ceil(ms/n)+' '+name+'s';}},{}]},{},[1])(1);});\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n!function ($) {\n\n  \"use strict\";\n\n  var FOUNDATION_VERSION = '6.2.2';\n\n  // Global Foundation object\n  // This is attached to the window, or used as a module for AMD/Browserify\n  var Foundation = {\n    version: FOUNDATION_VERSION,\n\n    /**\r\n     * Stores initialized plugins.\r\n     */\n    _plugins: {},\n\n    /**\r\n     * Stores generated unique ids for plugin instances\r\n     */\n    _uuids: [],\n\n    /**\r\n     * Returns a boolean for RTL support\r\n     */\n    rtl: function rtl() {\n      return $('html').attr('dir') === 'rtl';\n    },\n    /**\r\n     * Defines a Foundation plugin, adding it to the `Foundation` namespace and the list of plugins to initialize when reflowing.\r\n     * @param {Object} plugin - The constructor of the plugin.\r\n     */\n    plugin: function plugin(_plugin, name) {\n      // Object key to use when adding to global Foundation object\n      // Examples: Foundation.Reveal, Foundation.OffCanvas\n      var className = name || functionName(_plugin);\n      // Object key to use when storing the plugin, also used to create the identifying data attribute for the plugin\n      // Examples: data-reveal, data-off-canvas\n      var attrName = hyphenate(className);\n\n      // Add to the Foundation object and the plugins list (for reflowing)\n      this._plugins[attrName] = this[className] = _plugin;\n    },\n    /**\r\n     * @function\r\n     * Populates the _uuids array with pointers to each individual plugin instance.\r\n     * Adds the `zfPlugin` data-attribute to programmatically created plugins to allow use of $(selector).foundation(method) calls.\r\n     * Also fires the initialization event for each plugin, consolidating repetitive code.\r\n     * @param {Object} plugin - an instance of a plugin, usually `this` in context.\r\n     * @param {String} name - the name of the plugin, passed as a camelCased string.\r\n     * @fires Plugin#init\r\n     */\n    registerPlugin: function registerPlugin(plugin, name) {\n      var pluginName = name ? hyphenate(name) : functionName(plugin.constructor).toLowerCase();\n      plugin.uuid = this.GetYoDigits(6, pluginName);\n\n      if (!plugin.$element.attr('data-' + pluginName)) {\n        plugin.$element.attr('data-' + pluginName, plugin.uuid);\n      }\n      if (!plugin.$element.data('zfPlugin')) {\n        plugin.$element.data('zfPlugin', plugin);\n      }\n      /**\r\n       * Fires when the plugin has initialized.\r\n       * @event Plugin#init\r\n       */\n      plugin.$element.trigger('init.zf.' + pluginName);\n\n      this._uuids.push(plugin.uuid);\n\n      return;\n    },\n    /**\r\n     * @function\r\n     * Removes the plugins uuid from the _uuids array.\r\n     * Removes the zfPlugin data attribute, as well as the data-plugin-name attribute.\r\n     * Also fires the destroyed event for the plugin, consolidating repetitive code.\r\n     * @param {Object} plugin - an instance of a plugin, usually `this` in context.\r\n     * @fires Plugin#destroyed\r\n     */\n    unregisterPlugin: function unregisterPlugin(plugin) {\n      var pluginName = hyphenate(functionName(plugin.$element.data('zfPlugin').constructor));\n\n      this._uuids.splice(this._uuids.indexOf(plugin.uuid), 1);\n      plugin.$element.removeAttr('data-' + pluginName).removeData('zfPlugin')\n      /**\r\n       * Fires when the plugin has been destroyed.\r\n       * @event Plugin#destroyed\r\n       */\n      .trigger('destroyed.zf.' + pluginName);\n      for (var prop in plugin) {\n        plugin[prop] = null; //clean up script to prep for garbage collection.\n      }\n      return;\n    },\n\n    /**\r\n     * @function\r\n     * Causes one or more active plugins to re-initialize, resetting event listeners, recalculating positions, etc.\r\n     * @param {String} plugins - optional string of an individual plugin key, attained by calling `$(element).data('pluginName')`, or string of a plugin class i.e. `'dropdown'`\r\n     * @default If no argument is passed, reflow all currently active plugins.\r\n     */\n    reInit: function reInit(plugins) {\n      var isJQ = plugins instanceof $;\n      try {\n        if (isJQ) {\n          plugins.each(function () {\n            $(this).data('zfPlugin')._init();\n          });\n        } else {\n          var type = typeof plugins === 'undefined' ? 'undefined' : _typeof(plugins),\n              _this = this,\n              fns = {\n            'object': function object(plgs) {\n              plgs.forEach(function (p) {\n                p = hyphenate(p);\n                $('[data-' + p + ']').foundation('_init');\n              });\n            },\n            'string': function string() {\n              plugins = hyphenate(plugins);\n              $('[data-' + plugins + ']').foundation('_init');\n            },\n            'undefined': function undefined() {\n              this['object'](Object.keys(_this._plugins));\n            }\n          };\n          fns[type](plugins);\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        return plugins;\n      }\n    },\n\n    /**\r\n     * returns a random base-36 uid with namespacing\r\n     * @function\r\n     * @param {Number} length - number of random base-36 digits desired. Increase for more random strings.\r\n     * @param {String} namespace - name of plugin to be incorporated in uid, optional.\r\n     * @default {String} '' - if no plugin name is provided, nothing is appended to the uid.\r\n     * @returns {String} - unique id\r\n     */\n    GetYoDigits: function GetYoDigits(length, namespace) {\n      length = length || 6;\n      return Math.round(Math.pow(36, length + 1) - Math.random() * Math.pow(36, length)).toString(36).slice(1) + (namespace ? '-' + namespace : '');\n    },\n    /**\r\n     * Initialize plugins on any elements within `elem` (and `elem` itself) that aren't already initialized.\r\n     * @param {Object} elem - jQuery object containing the element to check inside. Also checks the element itself, unless it's the `document` object.\r\n     * @param {String|Array} plugins - A list of plugins to initialize. Leave this out to initialize everything.\r\n     */\n    reflow: function reflow(elem, plugins) {\n\n      // If plugins is undefined, just grab everything\n      if (typeof plugins === 'undefined') {\n        plugins = Object.keys(this._plugins);\n      }\n      // If plugins is a string, convert it to an array with one item\n      else if (typeof plugins === 'string') {\n          plugins = [plugins];\n        }\n\n      var _this = this;\n\n      // Iterate through each plugin\n      $.each(plugins, function (i, name) {\n        // Get the current plugin\n        var plugin = _this._plugins[name];\n\n        // Localize the search to all elements inside elem, as well as elem itself, unless elem === document\n        var $elem = $(elem).find('[data-' + name + ']').addBack('[data-' + name + ']');\n\n        // For each plugin found, initialize it\n        $elem.each(function () {\n          var $el = $(this),\n              opts = {};\n          // Don't double-dip on plugins\n          if ($el.data('zfPlugin')) {\n            console.warn(\"Tried to initialize \" + name + \" on an element that already has a Foundation plugin.\");\n            return;\n          }\n\n          if ($el.attr('data-options')) {\n            var thing = $el.attr('data-options').split(';').forEach(function (e, i) {\n              var opt = e.split(':').map(function (el) {\n                return el.trim();\n              });\n              if (opt[0]) opts[opt[0]] = parseValue(opt[1]);\n            });\n          }\n          try {\n            $el.data('zfPlugin', new plugin($(this), opts));\n          } catch (er) {\n            console.error(er);\n          } finally {\n            return;\n          }\n        });\n      });\n    },\n    getFnName: functionName,\n    transitionend: function transitionend($elem) {\n      var transitions = {\n        'transition': 'transitionend',\n        'WebkitTransition': 'webkitTransitionEnd',\n        'MozTransition': 'transitionend',\n        'OTransition': 'otransitionend'\n      };\n      var elem = document.createElement('div'),\n          end;\n\n      for (var t in transitions) {\n        if (typeof elem.style[t] !== 'undefined') {\n          end = transitions[t];\n        }\n      }\n      if (end) {\n        return end;\n      } else {\n        end = setTimeout(function () {\n          $elem.triggerHandler('transitionend', [$elem]);\n        }, 1);\n        return 'transitionend';\n      }\n    }\n  };\n\n  Foundation.util = {\n    /**\r\n     * Function for applying a debounce effect to a function call.\r\n     * @function\r\n     * @param {Function} func - Function to be called at end of timeout.\r\n     * @param {Number} delay - Time in ms to delay the call of `func`.\r\n     * @returns function\r\n     */\n    throttle: function throttle(func, delay) {\n      var timer = null;\n\n      return function () {\n        var context = this,\n            args = arguments;\n\n        if (timer === null) {\n          timer = setTimeout(function () {\n            func.apply(context, args);\n            timer = null;\n          }, delay);\n        }\n      };\n    }\n  };\n\n  // TODO: consider not making this a jQuery function\n  // TODO: need way to reflow vs. re-initialize\n  /**\r\n   * The Foundation jQuery method.\r\n   * @param {String|Array} method - An action to perform on the current jQuery object.\r\n   */\n  var foundation = function foundation(method) {\n    var type = typeof method === 'undefined' ? 'undefined' : _typeof(method),\n        $meta = $('meta.foundation-mq'),\n        $noJS = $('.no-js');\n\n    if (!$meta.length) {\n      $('<meta class=\"foundation-mq\">').appendTo(document.head);\n    }\n    if ($noJS.length) {\n      $noJS.removeClass('no-js');\n    }\n\n    if (type === 'undefined') {\n      //needs to initialize the Foundation object, or an individual plugin.\n      Foundation.MediaQuery._init();\n      Foundation.reflow(this);\n    } else if (type === 'string') {\n      //an individual method to invoke on a plugin or group of plugins\n      var args = Array.prototype.slice.call(arguments, 1); //collect all the arguments, if necessary\n      var plugClass = this.data('zfPlugin'); //determine the class of plugin\n\n      if (plugClass !== undefined && plugClass[method] !== undefined) {\n        //make sure both the class and method exist\n        if (this.length === 1) {\n          //if there's only one, call it directly.\n          plugClass[method].apply(plugClass, args);\n        } else {\n          this.each(function (i, el) {\n            //otherwise loop through the jQuery collection and invoke the method on each\n            plugClass[method].apply($(el).data('zfPlugin'), args);\n          });\n        }\n      } else {\n        //error for no class or no method\n        throw new ReferenceError(\"We're sorry, '\" + method + \"' is not an available method for \" + (plugClass ? functionName(plugClass) : 'this element') + '.');\n      }\n    } else {\n      //error for invalid argument type\n      throw new TypeError('We\\'re sorry, ' + type + ' is not a valid parameter. You must use a string representing the method you wish to invoke.');\n    }\n    return this;\n  };\n\n  window.Foundation = Foundation;\n  $.fn.foundation = foundation;\n\n  // Polyfill for requestAnimationFrame\n  (function () {\n    if (!Date.now || !window.Date.now) window.Date.now = Date.now = function () {\n      return new Date().getTime();\n    };\n\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n      var vp = vendors[i];\n      window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];\n      window.cancelAnimationFrame = window[vp + 'CancelAnimationFrame'] || window[vp + 'CancelRequestAnimationFrame'];\n    }\n    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n      var lastTime = 0;\n      window.requestAnimationFrame = function (callback) {\n        var now = Date.now();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function () {\n          callback(lastTime = nextTime);\n        }, nextTime - now);\n      };\n      window.cancelAnimationFrame = clearTimeout;\n    }\n    /**\r\n     * Polyfill for performance.now, required by rAF\r\n     */\n    if (!window.performance || !window.performance.now) {\n      window.performance = {\n        start: Date.now(),\n        now: function now() {\n          return Date.now() - this.start;\n        }\n      };\n    }\n  })();\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n      if (typeof this !== 'function') {\n        // closest thing possible to the ECMAScript 5\n        // internal IsCallable function\n        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n      }\n\n      var aArgs = Array.prototype.slice.call(arguments, 1),\n          fToBind = this,\n          fNOP = function fNOP() {},\n          fBound = function fBound() {\n        return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n      };\n\n      if (this.prototype) {\n        // native functions don't have a prototype\n        fNOP.prototype = this.prototype;\n      }\n      fBound.prototype = new fNOP();\n\n      return fBound;\n    };\n  }\n  // Polyfill to get the name of a function in IE9\n  function functionName(fn) {\n    if (Function.prototype.name === undefined) {\n      var funcNameRegex = /function\\s([^(]{1,})\\(/;\n      var results = funcNameRegex.exec(fn.toString());\n      return results && results.length > 1 ? results[1].trim() : \"\";\n    } else if (fn.prototype === undefined) {\n      return fn.constructor.name;\n    } else {\n      return fn.prototype.constructor.name;\n    }\n  }\n  function parseValue(str) {\n    if (/true/.test(str)) return true;else if (/false/.test(str)) return false;else if (!isNaN(str * 1)) return parseFloat(str);\n    return str;\n  }\n  // Convert PascalCase to kebab-case\n  // Thank you: http://stackoverflow.com/a/8955580\n  function hyphenate(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  }\n}(jQuery);\n/*******************************************\r\n *                                         *\r\n * This util was created by Marius Olbertz *\r\n * Please thank Marius on GitHub /owlbertz *\r\n * or the web http://www.mariusolbertz.de/ *\r\n *                                         *\r\n ******************************************/\n\n'use strict';\n\n!function ($) {\n\n  var keyCodes = {\n    9: 'TAB',\n    13: 'ENTER',\n    27: 'ESCAPE',\n    32: 'SPACE',\n    37: 'ARROW_LEFT',\n    38: 'ARROW_UP',\n    39: 'ARROW_RIGHT',\n    40: 'ARROW_DOWN'\n  };\n\n  var commands = {};\n\n  var Keyboard = {\n    keys: getKeyCodes(keyCodes),\n\n    /**\r\n     * Parses the (keyboard) event and returns a String that represents its key\r\n     * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\r\n     * @param {Event} event - the event generated by the event handler\r\n     * @return String key - String that represents the key pressed\r\n     */\n    parseKey: function parseKey(event) {\n      var key = keyCodes[event.which || event.keyCode] || String.fromCharCode(event.which).toUpperCase();\n      if (event.shiftKey) key = 'SHIFT_' + key;\n      if (event.ctrlKey) key = 'CTRL_' + key;\n      if (event.altKey) key = 'ALT_' + key;\n      return key;\n    },\n\n\n    /**\r\n     * Handles the given (keyboard) event\r\n     * @param {Event} event - the event generated by the event handler\r\n     * @param {String} component - Foundation component's name, e.g. Slider or Reveal\r\n     * @param {Objects} functions - collection of functions that are to be executed\r\n     */\n    handleKey: function handleKey(event, component, functions) {\n      var commandList = commands[component],\n          keyCode = this.parseKey(event),\n          cmds,\n          command,\n          fn;\n\n      if (!commandList) return console.warn('Component not defined!');\n\n      if (typeof commandList.ltr === 'undefined') {\n        // this component does not differentiate between ltr and rtl\n        cmds = commandList; // use plain list\n      } else {\n        // merge ltr and rtl: if document is rtl, rtl overwrites ltr and vice versa\n        if (Foundation.rtl()) cmds = $.extend({}, commandList.ltr, commandList.rtl);else cmds = $.extend({}, commandList.rtl, commandList.ltr);\n      }\n      command = cmds[keyCode];\n\n      fn = functions[command];\n      if (fn && typeof fn === 'function') {\n        // execute function  if exists\n        var returnValue = fn.apply();\n        if (functions.handled || typeof functions.handled === 'function') {\n          // execute function when event was handled\n          functions.handled(returnValue);\n        }\n      } else {\n        if (functions.unhandled || typeof functions.unhandled === 'function') {\n          // execute function when event was not handled\n          functions.unhandled();\n        }\n      }\n    },\n\n\n    /**\r\n     * Finds all focusable elements within the given `$element`\r\n     * @param {jQuery} $element - jQuery object to search within\r\n     * @return {jQuery} $focusable - all focusable elements within `$element`\r\n     */\n    findFocusable: function findFocusable($element) {\n      return $element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function () {\n        if (!$(this).is(':visible') || $(this).attr('tabindex') < 0) {\n          return false;\n        } //only have visible elements and those that have a tabindex greater or equal 0\n        return true;\n      });\n    },\n\n\n    /**\r\n     * Returns the component name name\r\n     * @param {Object} component - Foundation component, e.g. Slider or Reveal\r\n     * @return String componentName\r\n     */\n\n    register: function register(componentName, cmds) {\n      commands[componentName] = cmds;\n    }\n  };\n\n  /*\r\n   * Constants for easier comparing.\r\n   * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\r\n   */\n  function getKeyCodes(kcs) {\n    var k = {};\n    for (var kc in kcs) {\n      k[kcs[kc]] = kcs[kc];\n    }return k;\n  }\n\n  Foundation.Keyboard = Keyboard;\n}(jQuery);\n'use strict';\n\n!function ($) {\n\n  Foundation.Box = {\n    ImNotTouchingYou: ImNotTouchingYou,\n    GetDimensions: GetDimensions,\n    GetOffsets: GetOffsets\n  };\n\n  /**\r\n   * Compares the dimensions of an element to a container and determines collision events with container.\r\n   * @function\r\n   * @param {jQuery} element - jQuery object to test for collisions.\r\n   * @param {jQuery} parent - jQuery object to use as bounding container.\r\n   * @param {Boolean} lrOnly - set to true to check left and right values only.\r\n   * @param {Boolean} tbOnly - set to true to check top and bottom values only.\r\n   * @default if no parent object passed, detects collisions with `window`.\r\n   * @returns {Boolean} - true if collision free, false if a collision in any direction.\r\n   */\n  function ImNotTouchingYou(element, parent, lrOnly, tbOnly) {\n    var eleDims = GetDimensions(element),\n        top,\n        bottom,\n        left,\n        right;\n\n    if (parent) {\n      var parDims = GetDimensions(parent);\n\n      bottom = eleDims.offset.top + eleDims.height <= parDims.height + parDims.offset.top;\n      top = eleDims.offset.top >= parDims.offset.top;\n      left = eleDims.offset.left >= parDims.offset.left;\n      right = eleDims.offset.left + eleDims.width <= parDims.width + parDims.offset.left;\n    } else {\n      bottom = eleDims.offset.top + eleDims.height <= eleDims.windowDims.height + eleDims.windowDims.offset.top;\n      top = eleDims.offset.top >= eleDims.windowDims.offset.top;\n      left = eleDims.offset.left >= eleDims.windowDims.offset.left;\n      right = eleDims.offset.left + eleDims.width <= eleDims.windowDims.width;\n    }\n\n    var allDirs = [bottom, top, left, right];\n\n    if (lrOnly) {\n      return left === right === true;\n    }\n\n    if (tbOnly) {\n      return top === bottom === true;\n    }\n\n    return allDirs.indexOf(false) === -1;\n  };\n\n  /**\r\n   * Uses native methods to return an object of dimension values.\r\n   * @function\r\n   * @param {jQuery || HTML} element - jQuery object or DOM element for which to get the dimensions. Can be any element other that document or window.\r\n   * @returns {Object} - nested object of integer pixel values\r\n   * TODO - if element is window, return only those values.\r\n   */\n  function GetDimensions(elem, test) {\n    elem = elem.length ? elem[0] : elem;\n\n    if (elem === window || elem === document) {\n      throw new Error(\"I'm sorry, Dave. I'm afraid I can't do that.\");\n    }\n\n    var rect = elem.getBoundingClientRect(),\n        parRect = elem.parentNode.getBoundingClientRect(),\n        winRect = document.body.getBoundingClientRect(),\n        winY = window.pageYOffset,\n        winX = window.pageXOffset;\n\n    return {\n      width: rect.width,\n      height: rect.height,\n      offset: {\n        top: rect.top + winY,\n        left: rect.left + winX\n      },\n      parentDims: {\n        width: parRect.width,\n        height: parRect.height,\n        offset: {\n          top: parRect.top + winY,\n          left: parRect.left + winX\n        }\n      },\n      windowDims: {\n        width: winRect.width,\n        height: winRect.height,\n        offset: {\n          top: winY,\n          left: winX\n        }\n      }\n    };\n  }\n\n  /**\r\n   * Returns an object of top and left integer pixel values for dynamically rendered elements,\r\n   * such as: Tooltip, Reveal, and Dropdown\r\n   * @function\r\n   * @param {jQuery} element - jQuery object for the element being positioned.\r\n   * @param {jQuery} anchor - jQuery object for the element's anchor point.\r\n   * @param {String} position - a string relating to the desired position of the element, relative to it's anchor\r\n   * @param {Number} vOffset - integer pixel value of desired vertical separation between anchor and element.\r\n   * @param {Number} hOffset - integer pixel value of desired horizontal separation between anchor and element.\r\n   * @param {Boolean} isOverflow - if a collision event is detected, sets to true to default the element to full width - any desired offset.\r\n   * TODO alter/rewrite to work with `em` values as well/instead of pixels\r\n   */\n  function GetOffsets(element, anchor, position, vOffset, hOffset, isOverflow) {\n    var $eleDims = GetDimensions(element),\n        $anchorDims = anchor ? GetDimensions(anchor) : null;\n\n    switch (position) {\n      case 'top':\n        return {\n          left: Foundation.rtl() ? $anchorDims.offset.left - $eleDims.width + $anchorDims.width : $anchorDims.offset.left,\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset,\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'center top':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width / 2 - $eleDims.width / 2,\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'center bottom':\n        return {\n          left: isOverflow ? hOffset : $anchorDims.offset.left + $anchorDims.width / 2 - $eleDims.width / 2,\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n        break;\n      case 'center left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top + $anchorDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'center right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset + 1,\n          top: $anchorDims.offset.top + $anchorDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'center':\n        return {\n          left: $eleDims.windowDims.offset.left + $eleDims.windowDims.width / 2 - $eleDims.width / 2,\n          top: $eleDims.windowDims.offset.top + $eleDims.windowDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'reveal':\n        return {\n          left: ($eleDims.windowDims.width - $eleDims.width) / 2,\n          top: $eleDims.windowDims.offset.top + vOffset\n        };\n      case 'reveal full':\n        return {\n          left: $eleDims.windowDims.offset.left,\n          top: $eleDims.windowDims.offset.top\n        };\n        break;\n      case 'left bottom':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top + $anchorDims.height\n        };\n        break;\n      case 'right bottom':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset - $eleDims.width,\n          top: $anchorDims.offset.top + $anchorDims.height\n        };\n        break;\n      default:\n        return {\n          left: Foundation.rtl() ? $anchorDims.offset.left - $eleDims.width + $anchorDims.width : $anchorDims.offset.left,\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n    }\n  }\n}(jQuery);\n'use strict';\n\n!function ($) {\n\n  var Nest = {\n    Feather: function Feather(menu) {\n      var type = arguments.length <= 1 || arguments[1] === undefined ? 'zf' : arguments[1];\n\n      menu.attr('role', 'menubar');\n\n      var items = menu.find('li').attr({ 'role': 'menuitem' }),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      menu.find('a:first').attr('tabindex', 0);\n\n      items.each(function () {\n        var $item = $(this),\n            $sub = $item.children('ul');\n\n        if ($sub.length) {\n          $item.addClass(hasSubClass).attr({\n            'aria-haspopup': true,\n            'aria-expanded': false,\n            'aria-label': $item.children('a:first').text()\n          });\n\n          $sub.addClass('submenu ' + subMenuClass).attr({\n            'data-submenu': '',\n            'aria-hidden': true,\n            'role': 'menu'\n          });\n        }\n\n        if ($item.parent('[data-submenu]').length) {\n          $item.addClass('is-submenu-item ' + subItemClass);\n        }\n      });\n\n      return;\n    },\n    Burn: function Burn(menu, type) {\n      var items = menu.find('li').removeAttr('tabindex'),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      menu.find('*').removeClass(subMenuClass + ' ' + subItemClass + ' ' + hasSubClass + ' is-submenu-item submenu is-active').removeAttr('data-submenu').css('display', '');\n\n      // console.log(      menu.find('.' + subMenuClass + ', .' + subItemClass + ', .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\n      //           .removeClass(subMenuClass + ' ' + subItemClass + ' has-submenu is-submenu-item submenu')\n      //           .removeAttr('data-submenu'));\n      // items.each(function(){\n      //   var $item = $(this),\n      //       $sub = $item.children('ul');\n      //   if($item.parent('[data-submenu]').length){\n      //     $item.removeClass('is-submenu-item ' + subItemClass);\n      //   }\n      //   if($sub.length){\n      //     $item.removeClass('has-submenu');\n      //     $sub.removeClass('submenu ' + subMenuClass).removeAttr('data-submenu');\n      //   }\n      // });\n    }\n  };\n\n  Foundation.Nest = Nest;\n}(jQuery);\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n!function ($) {\n\n  // Default set of media queries\n  var defaultQueries = {\n    'default': 'only screen',\n    landscape: 'only screen and (orientation: landscape)',\n    portrait: 'only screen and (orientation: portrait)',\n    retina: 'only screen and (-webkit-min-device-pixel-ratio: 2),' + 'only screen and (min--moz-device-pixel-ratio: 2),' + 'only screen and (-o-min-device-pixel-ratio: 2/1),' + 'only screen and (min-device-pixel-ratio: 2),' + 'only screen and (min-resolution: 192dpi),' + 'only screen and (min-resolution: 2dppx)'\n  };\n\n  var MediaQuery = {\n    queries: [],\n\n    current: '',\n\n    /**\r\n     * Initializes the media query helper, by extracting the breakpoint list from the CSS and activating the breakpoint watcher.\r\n     * @function\r\n     * @private\r\n     */\n    _init: function _init() {\n      var self = this;\n      var extractedStyles = $('.foundation-mq').css('font-family');\n      var namedQueries;\n\n      namedQueries = parseStyleToObject(extractedStyles);\n\n      for (var key in namedQueries) {\n        if (namedQueries.hasOwnProperty(key)) {\n          self.queries.push({\n            name: key,\n            value: 'only screen and (min-width: ' + namedQueries[key] + ')'\n          });\n        }\n      }\n\n      this.current = this._getCurrentSize();\n\n      this._watcher();\n    },\n\n\n    /**\r\n     * Checks if the screen is at least as wide as a breakpoint.\r\n     * @function\r\n     * @param {String} size - Name of the breakpoint to check.\r\n     * @returns {Boolean} `true` if the breakpoint matches, `false` if it's smaller.\r\n     */\n    atLeast: function atLeast(size) {\n      var query = this.get(size);\n\n      if (query) {\n        return window.matchMedia(query).matches;\n      }\n\n      return false;\n    },\n\n\n    /**\r\n     * Gets the media query of a breakpoint.\r\n     * @function\r\n     * @param {String} size - Name of the breakpoint to get.\r\n     * @returns {String|null} - The media query of the breakpoint, or `null` if the breakpoint doesn't exist.\r\n     */\n    get: function get(size) {\n      for (var i in this.queries) {\n        if (this.queries.hasOwnProperty(i)) {\n          var query = this.queries[i];\n          if (size === query.name) return query.value;\n        }\n      }\n\n      return null;\n    },\n\n\n    /**\r\n     * Gets the current breakpoint name by testing every breakpoint and returning the last one to match (the biggest one).\r\n     * @function\r\n     * @private\r\n     * @returns {String} Name of the current breakpoint.\r\n     */\n    _getCurrentSize: function _getCurrentSize() {\n      var matched;\n\n      for (var i = 0; i < this.queries.length; i++) {\n        var query = this.queries[i];\n\n        if (window.matchMedia(query.value).matches) {\n          matched = query;\n        }\n      }\n\n      if ((typeof matched === 'undefined' ? 'undefined' : _typeof(matched)) === 'object') {\n        return matched.name;\n      } else {\n        return matched;\n      }\n    },\n\n\n    /**\r\n     * Activates the breakpoint watcher, which fires an event on the window whenever the breakpoint changes.\r\n     * @function\r\n     * @private\r\n     */\n    _watcher: function _watcher() {\n      var _this = this;\n\n      $(window).on('resize.zf.mediaquery', function () {\n        var newSize = _this._getCurrentSize(),\n            currentSize = _this.current;\n\n        if (newSize !== currentSize) {\n          // Change the current media query\n          _this.current = newSize;\n\n          // Broadcast the media query change on the window\n          $(window).trigger('changed.zf.mediaquery', [newSize, currentSize]);\n        }\n      });\n    }\n  };\n\n  Foundation.MediaQuery = MediaQuery;\n\n  // matchMedia() polyfill - Test a CSS media type/query in JS.\n  // Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license\n  window.matchMedia || (window.matchMedia = function () {\n    'use strict';\n\n    // For browsers that support matchMedium api such as IE 9 and webkit\n\n    var styleMedia = window.styleMedia || window.media;\n\n    // For those that don't support matchMedium\n    if (!styleMedia) {\n      var style = document.createElement('style'),\n          script = document.getElementsByTagName('script')[0],\n          info = null;\n\n      style.type = 'text/css';\n      style.id = 'matchmediajs-test';\n\n      script.parentNode.insertBefore(style, script);\n\n      // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\n      info = 'getComputedStyle' in window && window.getComputedStyle(style, null) || style.currentStyle;\n\n      styleMedia = {\n        matchMedium: function matchMedium(media) {\n          var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';\n\n          // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\n          if (style.styleSheet) {\n            style.styleSheet.cssText = text;\n          } else {\n            style.textContent = text;\n          }\n\n          // Test if media query is true or false\n          return info.width === '1px';\n        }\n      };\n    }\n\n    return function (media) {\n      return {\n        matches: styleMedia.matchMedium(media || 'all'),\n        media: media || 'all'\n      };\n    };\n  }());\n\n  // Thank you: https://github.com/sindresorhus/query-string\n  function parseStyleToObject(str) {\n    var styleObject = {};\n\n    if (typeof str !== 'string') {\n      return styleObject;\n    }\n\n    str = str.trim().slice(1, -1); // browsers re-quote string style values\n\n    if (!str) {\n      return styleObject;\n    }\n\n    styleObject = str.split('&').reduce(function (ret, param) {\n      var parts = param.replace(/\\+/g, ' ').split('=');\n      var key = parts[0];\n      var val = parts[1];\n      key = decodeURIComponent(key);\n\n      // missing `=` should be `null`:\n      // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n      val = val === undefined ? null : decodeURIComponent(val);\n\n      if (!ret.hasOwnProperty(key)) {\n        ret[key] = val;\n      } else if (Array.isArray(ret[key])) {\n        ret[key].push(val);\n      } else {\n        ret[key] = [ret[key], val];\n      }\n      return ret;\n    }, {});\n\n    return styleObject;\n  }\n\n  Foundation.MediaQuery = MediaQuery;\n}(jQuery);\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n!function ($) {\n\n  var MutationObserver = function () {\n    var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n    for (var i = 0; i < prefixes.length; i++) {\n      if (prefixes[i] + 'MutationObserver' in window) {\n        return window[prefixes[i] + 'MutationObserver'];\n      }\n    }\n    return false;\n  }();\n\n  var triggers = function triggers(el, type) {\n    el.data(type).split(' ').forEach(function (id) {\n      $('#' + id)[type === 'close' ? 'trigger' : 'triggerHandler'](type + '.zf.trigger', [el]);\n    });\n  };\n  // Elements with [data-open] will reveal a plugin that supports it when clicked.\n  $(document).on('click.zf.trigger', '[data-open]', function () {\n    triggers($(this), 'open');\n  });\n\n  // Elements with [data-close] will close a plugin that supports it when clicked.\n  // If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\n  $(document).on('click.zf.trigger', '[data-close]', function () {\n    var id = $(this).data('close');\n    if (id) {\n      triggers($(this), 'close');\n    } else {\n      $(this).trigger('close.zf.trigger');\n    }\n  });\n\n  // Elements with [data-toggle] will toggle a plugin that supports it when clicked.\n  $(document).on('click.zf.trigger', '[data-toggle]', function () {\n    triggers($(this), 'toggle');\n  });\n\n  // Elements with [data-closable] will respond to close.zf.trigger events.\n  $(document).on('close.zf.trigger', '[data-closable]', function (e) {\n    e.stopPropagation();\n    var animation = $(this).data('closable');\n\n    if (animation !== '') {\n      Foundation.Motion.animateOut($(this), animation, function () {\n        $(this).trigger('closed.zf');\n      });\n    } else {\n      $(this).fadeOut().trigger('closed.zf');\n    }\n  });\n\n  $(document).on('focus.zf.trigger blur.zf.trigger', '[data-toggle-focus]', function () {\n    var id = $(this).data('toggle-focus');\n    $('#' + id).triggerHandler('toggle.zf.trigger', [$(this)]);\n  });\n\n  /**\r\n  * Fires once after all other scripts have loaded\r\n  * @function\r\n  * @private\r\n  */\n  $(window).load(function () {\n    checkListeners();\n  });\n\n  function checkListeners() {\n    eventsListener();\n    resizeListener();\n    scrollListener();\n    closemeListener();\n  }\n\n  //******** only fires this function once on load, if there's something to watch ********\n  function closemeListener(pluginName) {\n    var yetiBoxes = $('[data-yeti-box]'),\n        plugNames = ['dropdown', 'tooltip', 'reveal'];\n\n    if (pluginName) {\n      if (typeof pluginName === 'string') {\n        plugNames.push(pluginName);\n      } else if ((typeof pluginName === 'undefined' ? 'undefined' : _typeof(pluginName)) === 'object' && typeof pluginName[0] === 'string') {\n        plugNames.concat(pluginName);\n      } else {\n        console.error('Plugin names must be strings');\n      }\n    }\n    if (yetiBoxes.length) {\n      var listeners = plugNames.map(function (name) {\n        return 'closeme.zf.' + name;\n      }).join(' ');\n\n      $(window).off(listeners).on(listeners, function (e, pluginId) {\n        var plugin = e.namespace.split('.')[0];\n        var plugins = $('[data-' + plugin + ']').not('[data-yeti-box=\"' + pluginId + '\"]');\n\n        plugins.each(function () {\n          var _this = $(this);\n\n          _this.triggerHandler('close.zf.trigger', [_this]);\n        });\n      });\n    }\n  }\n\n  function resizeListener(debounce) {\n    var timer = void 0,\n        $nodes = $('[data-resize]');\n    if ($nodes.length) {\n      $(window).off('resize.zf.trigger').on('resize.zf.trigger', function (e) {\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(function () {\n\n          if (!MutationObserver) {\n            //fallback for IE 9\n            $nodes.each(function () {\n              $(this).triggerHandler('resizeme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a resize event\n          $nodes.attr('data-events', \"resize\");\n        }, debounce || 10); //default time to emit resize event\n      });\n    }\n  }\n\n  function scrollListener(debounce) {\n    var timer = void 0,\n        $nodes = $('[data-scroll]');\n    if ($nodes.length) {\n      $(window).off('scroll.zf.trigger').on('scroll.zf.trigger', function (e) {\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(function () {\n\n          if (!MutationObserver) {\n            //fallback for IE 9\n            $nodes.each(function () {\n              $(this).triggerHandler('scrollme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a scroll event\n          $nodes.attr('data-events', \"scroll\");\n        }, debounce || 10); //default time to emit scroll event\n      });\n    }\n  }\n\n  function eventsListener() {\n    if (!MutationObserver) {\n      return false;\n    }\n    var nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\n\n    //element callback\n    var listeningElementsMutation = function listeningElementsMutation(mutationRecordsList) {\n      var $target = $(mutationRecordsList[0].target);\n      //trigger the event handler for the element depending on type\n      switch ($target.attr(\"data-events\")) {\n\n        case \"resize\":\n          $target.triggerHandler('resizeme.zf.trigger', [$target]);\n          break;\n\n        case \"scroll\":\n          $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\n          break;\n\n        // case \"mutate\" :\n        // console.log('mutate', $target);\n        // $target.triggerHandler('mutate.zf.trigger');\n        //\n        // //make sure we don't get stuck in an infinite loop from sloppy codeing\n        // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\n        //   domMutationObserver();\n        // }\n        // break;\n\n        default:\n          return false;\n        //nothing\n      }\n    };\n\n    if (nodes.length) {\n      //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\n      for (var i = 0; i <= nodes.length - 1; i++) {\n        var elementObserver = new MutationObserver(listeningElementsMutation);\n        elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree: false, attributeFilter: [\"data-events\"] });\n      }\n    }\n  }\n\n  // ------------------------------------\n\n  // [PH]\n  // Foundation.CheckWatchers = checkWatchers;\n  Foundation.IHearYou = checkListeners;\n  // Foundation.ISeeYou = scrollListener;\n  // Foundation.IFeelYou = closemeListener;\n}(jQuery);\n\n// function domMutationObserver(debounce) {\n//   // !!! This is coming soon and needs more work; not active  !!! //\n//   var timer,\n//   nodes = document.querySelectorAll('[data-mutate]');\n//   //\n//   if (nodes.length) {\n//     // var MutationObserver = (function () {\n//     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n//     //   for (var i=0; i < prefixes.length; i++) {\n//     //     if (prefixes[i] + 'MutationObserver' in window) {\n//     //       return window[prefixes[i] + 'MutationObserver'];\n//     //     }\n//     //   }\n//     //   return false;\n//     // }());\n//\n//\n//     //for the body, we need to listen for all changes effecting the style and class attributes\n//     var bodyObserver = new MutationObserver(bodyMutation);\n//     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\n//\n//\n//     //body callback\n//     function bodyMutation(mutate) {\n//       //trigger all listening elements and signal a mutation event\n//       if (timer) { clearTimeout(timer); }\n//\n//       timer = setTimeout(function() {\n//         bodyObserver.disconnect();\n//         $('[data-mutate]').attr('data-events',\"mutate\");\n//       }, debounce || 150);\n//     }\n//   }\n// }\n'use strict';\n\n!function ($) {\n\n  /**\r\n   * Motion module.\r\n   * @module foundation.motion\r\n   */\n\n  var initClasses = ['mui-enter', 'mui-leave'];\n  var activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\n  var Motion = {\n    animateIn: function animateIn(element, animation, cb) {\n      animate(true, element, animation, cb);\n    },\n\n    animateOut: function animateOut(element, animation, cb) {\n      animate(false, element, animation, cb);\n    }\n  };\n\n  function Move(duration, elem, fn) {\n    var anim,\n        prog,\n        start = null;\n    // console.log('called');\n\n    function move(ts) {\n      if (!start) start = window.performance.now();\n      // console.log(start, ts);\n      prog = ts - start;\n      fn.apply(elem);\n\n      if (prog < duration) {\n        anim = window.requestAnimationFrame(move, elem);\n      } else {\n        window.cancelAnimationFrame(anim);\n        elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n      }\n    }\n    anim = window.requestAnimationFrame(move);\n  }\n\n  /**\r\n   * Animates an element in or out using a CSS transition class.\r\n   * @function\r\n   * @private\r\n   * @param {Boolean} isIn - Defines if the animation is in or out.\r\n   * @param {Object} element - jQuery or HTML object to animate.\r\n   * @param {String} animation - CSS class to use.\r\n   * @param {Function} cb - Callback to run when animation is finished.\r\n   */\n  function animate(isIn, element, animation, cb) {\n    element = $(element).eq(0);\n\n    if (!element.length) return;\n\n    var initClass = isIn ? initClasses[0] : initClasses[1];\n    var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n    // Set up the animation\n    reset();\n\n    element.addClass(animation).css('transition', 'none');\n\n    requestAnimationFrame(function () {\n      element.addClass(initClass);\n      if (isIn) element.show();\n    });\n\n    // Start the animation\n    requestAnimationFrame(function () {\n      element[0].offsetWidth;\n      element.css('transition', '').addClass(activeClass);\n    });\n\n    // Clean up the animation when it finishes\n    element.one(Foundation.transitionend(element), finish);\n\n    // Hides the element (for out animations), resets the element, and runs a callback\n    function finish() {\n      if (!isIn) element.hide();\n      reset();\n      if (cb) cb.apply(element);\n    }\n\n    // Resets transitions and removes motion-specific classes\n    function reset() {\n      element[0].style.transitionDuration = 0;\n      element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n    }\n  }\n\n  Foundation.Move = Move;\n  Foundation.Motion = Motion;\n}(jQuery);\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n!function ($) {\n\n  /**\r\n   * DropdownMenu module.\r\n   * @module foundation.dropdown-menu\r\n   * @requires foundation.util.keyboard\r\n   * @requires foundation.util.box\r\n   * @requires foundation.util.nest\r\n   */\n\n  var DropdownMenu = function () {\n    /**\r\n     * Creates a new instance of DropdownMenu.\r\n     * @class\r\n     * @fires DropdownMenu#init\r\n     * @param {jQuery} element - jQuery object to make into a dropdown menu.\r\n     * @param {Object} options - Overrides to the default plugin settings.\r\n     */\n    function DropdownMenu(element, options) {\n      _classCallCheck(this, DropdownMenu);\n\n      this.$element = element;\n      this.options = $.extend({}, DropdownMenu.defaults, this.$element.data(), options);\n\n      Foundation.Nest.Feather(this.$element, 'dropdown');\n      this._init();\n\n      Foundation.registerPlugin(this, 'DropdownMenu');\n      Foundation.Keyboard.register('DropdownMenu', {\n        'ENTER': 'open',\n        'SPACE': 'open',\n        'ARROW_RIGHT': 'next',\n        'ARROW_UP': 'up',\n        'ARROW_DOWN': 'down',\n        'ARROW_LEFT': 'previous',\n        'ESCAPE': 'close'\n      });\n    }\n\n    /**\r\n     * Initializes the plugin, and calls _prepareMenu\r\n     * @private\r\n     * @function\r\n     */\n\n\n    _createClass(DropdownMenu, [{\n      key: '_init',\n      value: function _init() {\n        var subs = this.$element.find('li.is-dropdown-submenu-parent');\n        this.$element.children('.is-dropdown-submenu-parent').children('.is-dropdown-submenu').addClass('first-sub');\n\n        this.$menuItems = this.$element.find('[role=\"menuitem\"]');\n        this.$tabs = this.$element.children('[role=\"menuitem\"]');\n        this.$tabs.find('ul.is-dropdown-submenu').addClass(this.options.verticalClass);\n\n        if (this.$element.hasClass(this.options.rightClass) || this.options.alignment === 'right' || Foundation.rtl() || this.$element.parents('.top-bar-right').is('*')) {\n          this.options.alignment = 'right';\n          subs.addClass('opens-left');\n        } else {\n          subs.addClass('opens-right');\n        }\n        this.changed = false;\n        this._events();\n      }\n    }, {\n      key: '_events',\n\n      /**\r\n       * Adds event listeners to elements within the menu\r\n       * @private\r\n       * @function\r\n       */\n      value: function _events() {\n        var _this = this,\n            hasTouch = 'ontouchstart' in window || typeof window.ontouchstart !== 'undefined',\n            parClass = 'is-dropdown-submenu-parent';\n\n        // used for onClick and in the keyboard handlers\n        var handleClickFn = function handleClickFn(e) {\n          var $elem = $(e.target).parentsUntil('ul', '.' + parClass),\n              hasSub = $elem.hasClass(parClass),\n              hasClicked = $elem.attr('data-is-click') === 'true',\n              $sub = $elem.children('.is-dropdown-submenu');\n\n          if (hasSub) {\n            if (hasClicked) {\n              if (!_this.options.closeOnClick || !_this.options.clickOpen && !hasTouch || _this.options.forceFollow && hasTouch) {\n                return;\n              } else {\n                e.stopImmediatePropagation();\n                e.preventDefault();\n                _this._hide($elem);\n              }\n            } else {\n              e.preventDefault();\n              e.stopImmediatePropagation();\n              _this._show($elem.children('.is-dropdown-submenu'));\n              $elem.add($elem.parentsUntil(_this.$element, '.' + parClass)).attr('data-is-click', true);\n            }\n          } else {\n            return;\n          }\n        };\n\n        if (this.options.clickOpen || hasTouch) {\n          this.$menuItems.on('click.zf.dropdownmenu touchstart.zf.dropdownmenu', handleClickFn);\n        }\n\n        if (!this.options.disableHover) {\n          this.$menuItems.on('mouseenter.zf.dropdownmenu', function (e) {\n            var $elem = $(this),\n                hasSub = $elem.hasClass(parClass);\n\n            if (hasSub) {\n              clearTimeout(_this.delay);\n              _this.delay = setTimeout(function () {\n                _this._show($elem.children('.is-dropdown-submenu'));\n              }, _this.options.hoverDelay);\n            }\n          }).on('mouseleave.zf.dropdownmenu', function (e) {\n            var $elem = $(this),\n                hasSub = $elem.hasClass(parClass);\n            if (hasSub && _this.options.autoclose) {\n              if ($elem.attr('data-is-click') === 'true' && _this.options.clickOpen) {\n                return false;\n              }\n\n              clearTimeout(_this.delay);\n              _this.delay = setTimeout(function () {\n                _this._hide($elem);\n              }, _this.options.closingTime);\n            }\n          });\n        }\n        this.$menuItems.on('keydown.zf.dropdownmenu', function (e) {\n          var $element = $(e.target).parentsUntil('ul', '[role=\"menuitem\"]'),\n              isTab = _this.$tabs.index($element) > -1,\n              $elements = isTab ? _this.$tabs : $element.siblings('li').add($element),\n              $prevElement,\n              $nextElement;\n\n          $elements.each(function (i) {\n            if ($(this).is($element)) {\n              $prevElement = $elements.eq(i - 1);\n              $nextElement = $elements.eq(i + 1);\n              return;\n            }\n          });\n\n          var nextSibling = function nextSibling() {\n            if (!$element.is(':last-child')) {\n              $nextElement.children('a:first').focus();\n              e.preventDefault();\n            }\n          },\n              prevSibling = function prevSibling() {\n            $prevElement.children('a:first').focus();\n            e.preventDefault();\n          },\n              openSub = function openSub() {\n            var $sub = $element.children('ul.is-dropdown-submenu');\n            if ($sub.length) {\n              _this._show($sub);\n              $element.find('li > a:first').focus();\n              e.preventDefault();\n            } else {\n              return;\n            }\n          },\n              closeSub = function closeSub() {\n            //if ($element.is(':first-child')) {\n            var close = $element.parent('ul').parent('li');\n            close.children('a:first').focus();\n            _this._hide(close);\n            e.preventDefault();\n            //}\n          };\n          var functions = {\n            open: openSub,\n            close: function close() {\n              _this._hide(_this.$element);\n              _this.$menuItems.find('a:first').focus(); // focus to first element\n              e.preventDefault();\n            },\n            handled: function handled() {\n              e.stopImmediatePropagation();\n            }\n          };\n\n          if (isTab) {\n            if (_this.$element.hasClass(_this.options.verticalClass)) {\n              // vertical menu\n              if (_this.options.alignment === 'left') {\n                // left aligned\n                $.extend(functions, {\n                  down: nextSibling,\n                  up: prevSibling,\n                  next: openSub,\n                  previous: closeSub\n                });\n              } else {\n                // right aligned\n                $.extend(functions, {\n                  down: nextSibling,\n                  up: prevSibling,\n                  next: closeSub,\n                  previous: openSub\n                });\n              }\n            } else {\n              // horizontal menu\n              $.extend(functions, {\n                next: nextSibling,\n                previous: prevSibling,\n                down: openSub,\n                up: closeSub\n              });\n            }\n          } else {\n            // not tabs -> one sub\n            if (_this.options.alignment === 'left') {\n              // left aligned\n              $.extend(functions, {\n                next: openSub,\n                previous: closeSub,\n                down: nextSibling,\n                up: prevSibling\n              });\n            } else {\n              // right aligned\n              $.extend(functions, {\n                next: closeSub,\n                previous: openSub,\n                down: nextSibling,\n                up: prevSibling\n              });\n            }\n          }\n          Foundation.Keyboard.handleKey(e, 'DropdownMenu', functions);\n        });\n      }\n\n      /**\r\n       * Adds an event handler to the body to close any dropdowns on a click.\r\n       * @function\r\n       * @private\r\n       */\n\n    }, {\n      key: '_addBodyHandler',\n      value: function _addBodyHandler() {\n        var $body = $(document.body),\n            _this = this;\n        $body.off('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu').on('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu', function (e) {\n          var $link = _this.$element.find(e.target);\n          if ($link.length) {\n            return;\n          }\n\n          _this._hide();\n          $body.off('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu');\n        });\n      }\n\n      /**\r\n       * Opens a dropdown pane, and checks for collisions first.\r\n       * @param {jQuery} $sub - ul element that is a submenu to show\r\n       * @function\r\n       * @private\r\n       * @fires DropdownMenu#show\r\n       */\n\n    }, {\n      key: '_show',\n      value: function _show($sub) {\n        var idx = this.$tabs.index(this.$tabs.filter(function (i, el) {\n          return $(el).find($sub).length > 0;\n        }));\n        var $sibs = $sub.parent('li.is-dropdown-submenu-parent').siblings('li.is-dropdown-submenu-parent');\n        this._hide($sibs, idx);\n        $sub.css('visibility', 'hidden').addClass('js-dropdown-active').attr({ 'aria-hidden': false }).parent('li.is-dropdown-submenu-parent').addClass('is-active').attr({ 'aria-expanded': true });\n        var clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n        if (!clear) {\n          var oldClass = this.options.alignment === 'left' ? '-right' : '-left',\n              $parentLi = $sub.parent('.is-dropdown-submenu-parent');\n          $parentLi.removeClass('opens' + oldClass).addClass('opens-' + this.options.alignment);\n          clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n          if (!clear) {\n            $parentLi.removeClass('opens-' + this.options.alignment).addClass('opens-inner');\n          }\n          this.changed = true;\n        }\n        $sub.css('visibility', '');\n        if (this.options.closeOnClick) {\n          this._addBodyHandler();\n        }\n        /**\r\n         * Fires when the new dropdown pane is visible.\r\n         * @event DropdownMenu#show\r\n         */\n        this.$element.trigger('show.zf.dropdownmenu', [$sub]);\n      }\n\n      /**\r\n       * Hides a single, currently open dropdown pane, if passed a parameter, otherwise, hides everything.\r\n       * @function\r\n       * @param {jQuery} $elem - element with a submenu to hide\r\n       * @param {Number} idx - index of the $tabs collection to hide\r\n       * @private\r\n       */\n\n    }, {\n      key: '_hide',\n      value: function _hide($elem, idx) {\n        var $toClose;\n        if ($elem && $elem.length) {\n          $toClose = $elem;\n        } else if (idx !== undefined) {\n          $toClose = this.$tabs.not(function (i, el) {\n            return i === idx;\n          });\n        } else {\n          $toClose = this.$element;\n        }\n        var somethingToClose = $toClose.hasClass('is-active') || $toClose.find('.is-active').length > 0;\n\n        if (somethingToClose) {\n          $toClose.find('li.is-active').add($toClose).attr({\n            'aria-expanded': false,\n            'data-is-click': false\n          }).removeClass('is-active');\n\n          $toClose.find('ul.js-dropdown-active').attr({\n            'aria-hidden': true\n          }).removeClass('js-dropdown-active');\n\n          if (this.changed || $toClose.find('opens-inner').length) {\n            var oldClass = this.options.alignment === 'left' ? 'right' : 'left';\n            $toClose.find('li.is-dropdown-submenu-parent').add($toClose).removeClass('opens-inner opens-' + this.options.alignment).addClass('opens-' + oldClass);\n            this.changed = false;\n          }\n          /**\r\n           * Fires when the open menus are closed.\r\n           * @event DropdownMenu#hide\r\n           */\n          this.$element.trigger('hide.zf.dropdownmenu', [$toClose]);\n        }\n      }\n\n      /**\r\n       * Destroys the plugin.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.$menuItems.off('.zf.dropdownmenu').removeAttr('data-is-click').removeClass('is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner');\n        $(document.body).off('.zf.dropdownmenu');\n        Foundation.Nest.Burn(this.$element, 'dropdown');\n        Foundation.unregisterPlugin(this);\n      }\n    }]);\n\n    return DropdownMenu;\n  }();\n\n  /**\r\n   * Default settings for plugin\r\n   */\n\n\n  DropdownMenu.defaults = {\n    /**\r\n     * Disallows hover events from opening submenus\r\n     * @option\r\n     * @example false\r\n     */\n    disableHover: false,\n    /**\r\n     * Allow a submenu to automatically close on a mouseleave event, if not clicked open.\r\n     * @option\r\n     * @example true\r\n     */\n    autoclose: true,\n    /**\r\n     * Amount of time to delay opening a submenu on hover event.\r\n     * @option\r\n     * @example 50\r\n     */\n    hoverDelay: 50,\n    /**\r\n     * Allow a submenu to open/remain open on parent click event. Allows cursor to move away from menu.\r\n     * @option\r\n     * @example true\r\n     */\n    clickOpen: false,\n    /**\r\n     * Amount of time to delay closing a submenu on a mouseleave event.\r\n     * @option\r\n     * @example 500\r\n     */\n\n    closingTime: 500,\n    /**\r\n     * Position of the menu relative to what direction the submenus should open. Handled by JS.\r\n     * @option\r\n     * @example 'left'\r\n     */\n    alignment: 'left',\n    /**\r\n     * Allow clicks on the body to close any open submenus.\r\n     * @option\r\n     * @example true\r\n     */\n    closeOnClick: true,\n    /**\r\n     * Class applied to vertical oriented menus, Foundation default is `vertical`. Update this if using your own class.\r\n     * @option\r\n     * @example 'vertical'\r\n     */\n    verticalClass: 'vertical',\n    /**\r\n     * Class applied to right-side oriented menus, Foundation default is `align-right`. Update this if using your own class.\r\n     * @option\r\n     * @example 'align-right'\r\n     */\n    rightClass: 'align-right',\n    /**\r\n     * Boolean to force overide the clicking of links to perform default action, on second touch event for mobile.\r\n     * @option\r\n     * @example false\r\n     */\n    forceFollow: true\n  };\n\n  // Window exports\n  Foundation.plugin(DropdownMenu, 'DropdownMenu');\n}(jQuery);\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n!function ($) {\n\n  /**\r\n   * OffCanvas module.\r\n   * @module foundation.offcanvas\r\n   * @requires foundation.util.mediaQuery\r\n   * @requires foundation.util.triggers\r\n   * @requires foundation.util.motion\r\n   */\n\n  var OffCanvas = function () {\n    /**\r\n     * Creates a new instance of an off-canvas wrapper.\r\n     * @class\r\n     * @fires OffCanvas#init\r\n     * @param {Object} element - jQuery object to initialize.\r\n     * @param {Object} options - Overrides to the default plugin settings.\r\n     */\n    function OffCanvas(element, options) {\n      _classCallCheck(this, OffCanvas);\n\n      this.$element = element;\n      this.options = $.extend({}, OffCanvas.defaults, this.$element.data(), options);\n      this.$lastTrigger = $();\n      this.$triggers = $();\n\n      this._init();\n      this._events();\n\n      Foundation.registerPlugin(this, 'OffCanvas');\n    }\n\n    /**\r\n     * Initializes the off-canvas wrapper by adding the exit overlay (if needed).\r\n     * @function\r\n     * @private\r\n     */\n\n\n    _createClass(OffCanvas, [{\n      key: '_init',\n      value: function _init() {\n        var id = this.$element.attr('id');\n\n        this.$element.attr('aria-hidden', 'true');\n\n        // Find triggers that affect this element and add aria-expanded to them\n        this.$triggers = $(document).find('[data-open=\"' + id + '\"], [data-close=\"' + id + '\"], [data-toggle=\"' + id + '\"]').attr('aria-expanded', 'false').attr('aria-controls', id);\n\n        // Add a close trigger over the body if necessary\n        if (this.options.closeOnClick) {\n          if ($('.js-off-canvas-exit').length) {\n            this.$exiter = $('.js-off-canvas-exit');\n          } else {\n            var exiter = document.createElement('div');\n            exiter.setAttribute('class', 'js-off-canvas-exit');\n            $('[data-off-canvas-content]').append(exiter);\n\n            this.$exiter = $(exiter);\n          }\n        }\n\n        this.options.isRevealed = this.options.isRevealed || new RegExp(this.options.revealClass, 'g').test(this.$element[0].className);\n\n        if (this.options.isRevealed) {\n          this.options.revealOn = this.options.revealOn || this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split('-')[2];\n          this._setMQChecker();\n        }\n        if (!this.options.transitionTime) {\n          this.options.transitionTime = parseFloat(window.getComputedStyle($('[data-off-canvas-wrapper]')[0]).transitionDuration) * 1000;\n        }\n      }\n\n      /**\r\n       * Adds event handlers to the off-canvas wrapper and the exit overlay.\r\n       * @function\r\n       * @private\r\n       */\n\n    }, {\n      key: '_events',\n      value: function _events() {\n        this.$element.off('.zf.trigger .zf.offcanvas').on({\n          'open.zf.trigger': this.open.bind(this),\n          'close.zf.trigger': this.close.bind(this),\n          'toggle.zf.trigger': this.toggle.bind(this),\n          'keydown.zf.offcanvas': this._handleKeyboard.bind(this)\n        });\n\n        if (this.options.closeOnClick && this.$exiter.length) {\n          this.$exiter.on({ 'click.zf.offcanvas': this.close.bind(this) });\n        }\n      }\n\n      /**\r\n       * Applies event listener for elements that will reveal at certain breakpoints.\r\n       * @private\r\n       */\n\n    }, {\n      key: '_setMQChecker',\n      value: function _setMQChecker() {\n        var _this = this;\n\n        $(window).on('changed.zf.mediaquery', function () {\n          if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\n            _this.reveal(true);\n          } else {\n            _this.reveal(false);\n          }\n        }).one('load.zf.offcanvas', function () {\n          if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\n            _this.reveal(true);\n          }\n        });\n      }\n\n      /**\r\n       * Handles the revealing/hiding the off-canvas at breakpoints, not the same as open.\r\n       * @param {Boolean} isRevealed - true if element should be revealed.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'reveal',\n      value: function reveal(isRevealed) {\n        var $closer = this.$element.find('[data-close]');\n        if (isRevealed) {\n          this.close();\n          this.isRevealed = true;\n          // if (!this.options.forceTop) {\n          //   var scrollPos = parseInt(window.pageYOffset);\n          //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n          // }\n          // if (this.options.isSticky) { this._stick(); }\n          this.$element.off('open.zf.trigger toggle.zf.trigger');\n          if ($closer.length) {\n            $closer.hide();\n          }\n        } else {\n          this.isRevealed = false;\n          // if (this.options.isSticky || !this.options.forceTop) {\n          //   this.$element[0].style.transform = '';\n          //   $(window).off('scroll.zf.offcanvas');\n          // }\n          this.$element.on({\n            'open.zf.trigger': this.open.bind(this),\n            'toggle.zf.trigger': this.toggle.bind(this)\n          });\n          if ($closer.length) {\n            $closer.show();\n          }\n        }\n      }\n\n      /**\r\n       * Opens the off-canvas menu.\r\n       * @function\r\n       * @param {Object} event - Event object passed from listener.\r\n       * @param {jQuery} trigger - element that triggered the off-canvas to open.\r\n       * @fires OffCanvas#opened\r\n       */\n\n    }, {\n      key: 'open',\n      value: function open(event, trigger) {\n        if (this.$element.hasClass('is-open') || this.isRevealed) {\n          return;\n        }\n        var _this = this,\n            $body = $(document.body);\n\n        if (this.options.forceTop) {\n          $('body').scrollTop(0);\n        }\n        // window.pageYOffset = 0;\n\n        // if (!this.options.forceTop) {\n        //   var scrollPos = parseInt(window.pageYOffset);\n        //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n        //   if (this.$exiter.length) {\n        //     this.$exiter[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n        //   }\n        // }\n        /**\r\n         * Fires when the off-canvas menu opens.\r\n         * @event OffCanvas#opened\r\n         */\n        Foundation.Move(this.options.transitionTime, this.$element, function () {\n          $('[data-off-canvas-wrapper]').addClass('is-off-canvas-open is-open-' + _this.options.position);\n\n          _this.$element.addClass('is-open');\n\n          // if (_this.options.isSticky) {\n          //   _this._stick();\n          // }\n        });\n\n        this.$triggers.attr('aria-expanded', 'true');\n        this.$element.attr('aria-hidden', 'false').trigger('opened.zf.offcanvas');\n\n        if (this.options.closeOnClick) {\n          this.$exiter.addClass('is-visible');\n        }\n\n        if (trigger) {\n          this.$lastTrigger = trigger;\n        }\n\n        if (this.options.autoFocus) {\n          this.$element.one(Foundation.transitionend(this.$element), function () {\n            _this.$element.find('a, button').eq(0).focus();\n          });\n        }\n\n        if (this.options.trapFocus) {\n          $('[data-off-canvas-content]').attr('tabindex', '-1');\n          this._trapFocus();\n        }\n      }\n\n      /**\r\n       * Traps focus within the offcanvas on open.\r\n       * @private\r\n       */\n\n    }, {\n      key: '_trapFocus',\n      value: function _trapFocus() {\n        var focusable = Foundation.Keyboard.findFocusable(this.$element),\n            first = focusable.eq(0),\n            last = focusable.eq(-1);\n\n        focusable.off('.zf.offcanvas').on('keydown.zf.offcanvas', function (e) {\n          if (e.which === 9 || e.keycode === 9) {\n            if (e.target === last[0] && !e.shiftKey) {\n              e.preventDefault();\n              first.focus();\n            }\n            if (e.target === first[0] && e.shiftKey) {\n              e.preventDefault();\n              last.focus();\n            }\n          }\n        });\n      }\n\n      /**\r\n       * Allows the offcanvas to appear sticky utilizing translate properties.\r\n       * @private\r\n       */\n      // OffCanvas.prototype._stick = function() {\n      //   var elStyle = this.$element[0].style;\n      //\n      //   if (this.options.closeOnClick) {\n      //     var exitStyle = this.$exiter[0].style;\n      //   }\n      //\n      //   $(window).on('scroll.zf.offcanvas', function(e) {\n      //     console.log(e);\n      //     var pageY = window.pageYOffset;\n      //     elStyle.transform = 'translate(0,' + pageY + 'px)';\n      //     if (exitStyle !== undefined) { exitStyle.transform = 'translate(0,' + pageY + 'px)'; }\n      //   });\n      //   // this.$element.trigger('stuck.zf.offcanvas');\n      // };\n      /**\r\n       * Closes the off-canvas menu.\r\n       * @function\r\n       * @param {Function} cb - optional cb to fire after closure.\r\n       * @fires OffCanvas#closed\r\n       */\n\n    }, {\n      key: 'close',\n      value: function close(cb) {\n        if (!this.$element.hasClass('is-open') || this.isRevealed) {\n          return;\n        }\n\n        var _this = this;\n\n        //  Foundation.Move(this.options.transitionTime, this.$element, function() {\n        $('[data-off-canvas-wrapper]').removeClass('is-off-canvas-open is-open-' + _this.options.position);\n        _this.$element.removeClass('is-open');\n        // Foundation._reflow();\n        // });\n        this.$element.attr('aria-hidden', 'true')\n        /**\r\n         * Fires when the off-canvas menu opens.\r\n         * @event OffCanvas#closed\r\n         */\n        .trigger('closed.zf.offcanvas');\n        // if (_this.options.isSticky || !_this.options.forceTop) {\n        //   setTimeout(function() {\n        //     _this.$element[0].style.transform = '';\n        //     $(window).off('scroll.zf.offcanvas');\n        //   }, this.options.transitionTime);\n        // }\n        if (this.options.closeOnClick) {\n          this.$exiter.removeClass('is-visible');\n        }\n\n        this.$triggers.attr('aria-expanded', 'false');\n        if (this.options.trapFocus) {\n          $('[data-off-canvas-content]').removeAttr('tabindex');\n        }\n      }\n\n      /**\r\n       * Toggles the off-canvas menu open or closed.\r\n       * @function\r\n       * @param {Object} event - Event object passed from listener.\r\n       * @param {jQuery} trigger - element that triggered the off-canvas to open.\r\n       */\n\n    }, {\n      key: 'toggle',\n      value: function toggle(event, trigger) {\n        if (this.$element.hasClass('is-open')) {\n          this.close(event, trigger);\n        } else {\n          this.open(event, trigger);\n        }\n      }\n\n      /**\r\n       * Handles keyboard input when detected. When the escape key is pressed, the off-canvas menu closes, and focus is restored to the element that opened the menu.\r\n       * @function\r\n       * @private\r\n       */\n\n    }, {\n      key: '_handleKeyboard',\n      value: function _handleKeyboard(event) {\n        if (event.which !== 27) return;\n\n        event.stopPropagation();\n        event.preventDefault();\n        this.close();\n        this.$lastTrigger.focus();\n      }\n\n      /**\r\n       * Destroys the offcanvas plugin.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.close();\n        this.$element.off('.zf.trigger .zf.offcanvas');\n        this.$exiter.off('.zf.offcanvas');\n\n        Foundation.unregisterPlugin(this);\n      }\n    }]);\n\n    return OffCanvas;\n  }();\n\n  OffCanvas.defaults = {\n    /**\r\n     * Allow the user to click outside of the menu to close it.\r\n     * @option\r\n     * @example true\r\n     */\n    closeOnClick: true,\n\n    /**\r\n     * Amount of time in ms the open and close transition requires. If none selected, pulls from body style.\r\n     * @option\r\n     * @example 500\r\n     */\n    transitionTime: 0,\n\n    /**\r\n     * Direction the offcanvas opens from. Determines class applied to body.\r\n     * @option\r\n     * @example left\r\n     */\n    position: 'left',\n\n    /**\r\n     * Force the page to scroll to top on open.\r\n     * @option\r\n     * @example true\r\n     */\n    forceTop: true,\n\n    /**\r\n     * Allow the offcanvas to remain open for certain breakpoints.\r\n     * @option\r\n     * @example false\r\n     */\n    isRevealed: false,\n\n    /**\r\n     * Breakpoint at which to reveal. JS will use a RegExp to target standard classes, if changing classnames, pass your class with the `revealClass` option.\r\n     * @option\r\n     * @example reveal-for-large\r\n     */\n    revealOn: null,\n\n    /**\r\n     * Force focus to the offcanvas on open. If true, will focus the opening trigger on close.\r\n     * @option\r\n     * @example true\r\n     */\n    autoFocus: true,\n\n    /**\r\n     * Class used to force an offcanvas to remain open. Foundation defaults for this are `reveal-for-large` & `reveal-for-medium`.\r\n     * @option\r\n     * TODO improve the regex testing for this.\r\n     * @example reveal-for-large\r\n     */\n    revealClass: 'reveal-for-',\n\n    /**\r\n     * Triggers optional focus trapping when opening an offcanvas. Sets tabindex of [data-off-canvas-content] to -1 for accessibility purposes.\r\n     * @option\r\n     * @example true\r\n     */\n    trapFocus: false\n  };\n\n  // Window exports\n  Foundation.plugin(OffCanvas, 'OffCanvas');\n}(jQuery);\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n!function ($) {\n\n  /**\r\n   * Sticky module.\r\n   * @module foundation.sticky\r\n   * @requires foundation.util.triggers\r\n   * @requires foundation.util.mediaQuery\r\n   */\n\n  var Sticky = function () {\n    /**\r\n     * Creates a new instance of a sticky thing.\r\n     * @class\r\n     * @param {jQuery} element - jQuery object to make sticky.\r\n     * @param {Object} options - options object passed when creating the element programmatically.\r\n     */\n    function Sticky(element, options) {\n      _classCallCheck(this, Sticky);\n\n      this.$element = element;\n      this.options = $.extend({}, Sticky.defaults, this.$element.data(), options);\n\n      this._init();\n\n      Foundation.registerPlugin(this, 'Sticky');\n    }\n\n    /**\r\n     * Initializes the sticky element by adding classes, getting/setting dimensions, breakpoints and attributes\r\n     * @function\r\n     * @private\r\n     */\n\n\n    _createClass(Sticky, [{\n      key: '_init',\n      value: function _init() {\n        var $parent = this.$element.parent('[data-sticky-container]'),\n            id = this.$element[0].id || Foundation.GetYoDigits(6, 'sticky'),\n            _this = this;\n\n        if (!$parent.length) {\n          this.wasWrapped = true;\n        }\n        this.$container = $parent.length ? $parent : $(this.options.container).wrapInner(this.$element);\n        this.$container.addClass(this.options.containerClass);\n\n        this.$element.addClass(this.options.stickyClass).attr({ 'data-resize': id });\n\n        this.scrollCount = this.options.checkEvery;\n        this.isStuck = false;\n        $(window).one('load.zf.sticky', function () {\n          if (_this.options.anchor !== '') {\n            _this.$anchor = $('#' + _this.options.anchor);\n          } else {\n            _this._parsePoints();\n          }\n\n          _this._setSizes(function () {\n            _this._calc(false);\n          });\n          _this._events(id.split('-').reverse().join('-'));\n        });\n      }\n\n      /**\r\n       * If using multiple elements as anchors, calculates the top and bottom pixel values the sticky thing should stick and unstick on.\r\n       * @function\r\n       * @private\r\n       */\n\n    }, {\n      key: '_parsePoints',\n      value: function _parsePoints() {\n        var top = this.options.topAnchor == \"\" ? 1 : this.options.topAnchor,\n            btm = this.options.btmAnchor == \"\" ? document.documentElement.scrollHeight : this.options.btmAnchor,\n            pts = [top, btm],\n            breaks = {};\n        for (var i = 0, len = pts.length; i < len && pts[i]; i++) {\n          var pt;\n          if (typeof pts[i] === 'number') {\n            pt = pts[i];\n          } else {\n            var place = pts[i].split(':'),\n                anchor = $('#' + place[0]);\n\n            pt = anchor.offset().top;\n            if (place[1] && place[1].toLowerCase() === 'bottom') {\n              pt += anchor[0].getBoundingClientRect().height;\n            }\n          }\n          breaks[i] = pt;\n        }\n\n        this.points = breaks;\n        return;\n      }\n\n      /**\r\n       * Adds event handlers for the scrolling element.\r\n       * @private\r\n       * @param {String} id - psuedo-random id for unique scroll event listener.\r\n       */\n\n    }, {\n      key: '_events',\n      value: function _events(id) {\n        var _this = this,\n            scrollListener = this.scrollListener = 'scroll.zf.' + id;\n        if (this.isOn) {\n          return;\n        }\n        if (this.canStick) {\n          this.isOn = true;\n          $(window).off(scrollListener).on(scrollListener, function (e) {\n            if (_this.scrollCount === 0) {\n              _this.scrollCount = _this.options.checkEvery;\n              _this._setSizes(function () {\n                _this._calc(false, window.pageYOffset);\n              });\n            } else {\n              _this.scrollCount--;\n              _this._calc(false, window.pageYOffset);\n            }\n          });\n        }\n\n        this.$element.off('resizeme.zf.trigger').on('resizeme.zf.trigger', function (e, el) {\n          _this._setSizes(function () {\n            _this._calc(false);\n            if (_this.canStick) {\n              if (!_this.isOn) {\n                _this._events(id);\n              }\n            } else if (_this.isOn) {\n              _this._pauseListeners(scrollListener);\n            }\n          });\n        });\n      }\n\n      /**\r\n       * Removes event handlers for scroll and change events on anchor.\r\n       * @fires Sticky#pause\r\n       * @param {String} scrollListener - unique, namespaced scroll listener attached to `window`\r\n       */\n\n    }, {\n      key: '_pauseListeners',\n      value: function _pauseListeners(scrollListener) {\n        this.isOn = false;\n        $(window).off(scrollListener);\n\n        /**\r\n         * Fires when the plugin is paused due to resize event shrinking the view.\r\n         * @event Sticky#pause\r\n         * @private\r\n         */\n        this.$element.trigger('pause.zf.sticky');\n      }\n\n      /**\r\n       * Called on every `scroll` event and on `_init`\r\n       * fires functions based on booleans and cached values\r\n       * @param {Boolean} checkSizes - true if plugin should recalculate sizes and breakpoints.\r\n       * @param {Number} scroll - current scroll position passed from scroll event cb function. If not passed, defaults to `window.pageYOffset`.\r\n       */\n\n    }, {\n      key: '_calc',\n      value: function _calc(checkSizes, scroll) {\n        if (checkSizes) {\n          this._setSizes();\n        }\n\n        if (!this.canStick) {\n          if (this.isStuck) {\n            this._removeSticky(true);\n          }\n          return false;\n        }\n\n        if (!scroll) {\n          scroll = window.pageYOffset;\n        }\n\n        if (scroll >= this.topPoint) {\n          if (scroll <= this.bottomPoint) {\n            if (!this.isStuck) {\n              this._setSticky();\n            }\n          } else {\n            if (this.isStuck) {\n              this._removeSticky(false);\n            }\n          }\n        } else {\n          if (this.isStuck) {\n            this._removeSticky(true);\n          }\n        }\n      }\n\n      /**\r\n       * Causes the $element to become stuck.\r\n       * Adds `position: fixed;`, and helper classes.\r\n       * @fires Sticky#stuckto\r\n       * @function\r\n       * @private\r\n       */\n\n    }, {\n      key: '_setSticky',\n      value: function _setSticky() {\n        var _this = this,\n            stickTo = this.options.stickTo,\n            mrgn = stickTo === 'top' ? 'marginTop' : 'marginBottom',\n            notStuckTo = stickTo === 'top' ? 'bottom' : 'top',\n            css = {};\n\n        css[mrgn] = this.options[mrgn] + 'em';\n        css[stickTo] = 0;\n        css[notStuckTo] = 'auto';\n        css['left'] = this.$container.offset().left + parseInt(window.getComputedStyle(this.$container[0])[\"padding-left\"], 10);\n        this.isStuck = true;\n        this.$element.removeClass('is-anchored is-at-' + notStuckTo).addClass('is-stuck is-at-' + stickTo).css(css)\n        /**\r\n         * Fires when the $element has become `position: fixed;`\r\n         * Namespaced to `top` or `bottom`, e.g. `sticky.zf.stuckto:top`\r\n         * @event Sticky#stuckto\r\n         */\n        .trigger('sticky.zf.stuckto:' + stickTo);\n        this.$element.on(\"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd\", function () {\n          _this._setSizes();\n        });\n      }\n\n      /**\r\n       * Causes the $element to become unstuck.\r\n       * Removes `position: fixed;`, and helper classes.\r\n       * Adds other helper classes.\r\n       * @param {Boolean} isTop - tells the function if the $element should anchor to the top or bottom of its $anchor element.\r\n       * @fires Sticky#unstuckfrom\r\n       * @private\r\n       */\n\n    }, {\n      key: '_removeSticky',\n      value: function _removeSticky(isTop) {\n        var stickTo = this.options.stickTo,\n            stickToTop = stickTo === 'top',\n            css = {},\n            anchorPt = (this.points ? this.points[1] - this.points[0] : this.anchorHeight) - this.elemHeight,\n            mrgn = stickToTop ? 'marginTop' : 'marginBottom',\n            notStuckTo = stickToTop ? 'bottom' : 'top',\n            topOrBottom = isTop ? 'top' : 'bottom';\n\n        css[mrgn] = 0;\n\n        css['bottom'] = 'auto';\n        if (isTop) {\n          css['top'] = 0;\n        } else {\n          css['top'] = anchorPt;\n        }\n\n        css['left'] = '';\n        this.isStuck = false;\n        this.$element.removeClass('is-stuck is-at-' + stickTo).addClass('is-anchored is-at-' + topOrBottom).css(css)\n        /**\r\n         * Fires when the $element has become anchored.\r\n         * Namespaced to `top` or `bottom`, e.g. `sticky.zf.unstuckfrom:bottom`\r\n         * @event Sticky#unstuckfrom\r\n         */\n        .trigger('sticky.zf.unstuckfrom:' + topOrBottom);\n      }\n\n      /**\r\n       * Sets the $element and $container sizes for plugin.\r\n       * Calls `_setBreakPoints`.\r\n       * @param {Function} cb - optional callback function to fire on completion of `_setBreakPoints`.\r\n       * @private\r\n       */\n\n    }, {\n      key: '_setSizes',\n      value: function _setSizes(cb) {\n        this.canStick = Foundation.MediaQuery.atLeast(this.options.stickyOn);\n        if (!this.canStick) {\n          cb();\n        }\n        var _this = this,\n            newElemWidth = this.$container[0].getBoundingClientRect().width,\n            comp = window.getComputedStyle(this.$container[0]),\n            pdng = parseInt(comp['padding-right'], 10);\n\n        if (this.$anchor && this.$anchor.length) {\n          this.anchorHeight = this.$anchor[0].getBoundingClientRect().height;\n        } else {\n          this._parsePoints();\n        }\n\n        this.$element.css({\n          'max-width': newElemWidth - pdng + 'px'\n        });\n\n        var newContainerHeight = this.$element[0].getBoundingClientRect().height || this.containerHeight;\n        if (this.$element.css(\"display\") == \"none\") {\n          newContainerHeight = 0;\n        }\n        this.containerHeight = newContainerHeight;\n        this.$container.css({\n          height: newContainerHeight\n        });\n        this.elemHeight = newContainerHeight;\n\n        if (this.isStuck) {\n          this.$element.css({ \"left\": this.$container.offset().left + parseInt(comp['padding-left'], 10) });\n        }\n\n        this._setBreakPoints(newContainerHeight, function () {\n          if (cb) {\n            cb();\n          }\n        });\n      }\n\n      /**\r\n       * Sets the upper and lower breakpoints for the element to become sticky/unsticky.\r\n       * @param {Number} elemHeight - px value for sticky.$element height, calculated by `_setSizes`.\r\n       * @param {Function} cb - optional callback function to be called on completion.\r\n       * @private\r\n       */\n\n    }, {\n      key: '_setBreakPoints',\n      value: function _setBreakPoints(elemHeight, cb) {\n        if (!this.canStick) {\n          if (cb) {\n            cb();\n          } else {\n            return false;\n          }\n        }\n        var mTop = emCalc(this.options.marginTop),\n            mBtm = emCalc(this.options.marginBottom),\n            topPoint = this.points ? this.points[0] : this.$anchor.offset().top,\n            bottomPoint = this.points ? this.points[1] : topPoint + this.anchorHeight,\n\n        // topPoint = this.$anchor.offset().top || this.points[0],\n        // bottomPoint = topPoint + this.anchorHeight || this.points[1],\n        winHeight = window.innerHeight;\n\n        if (this.options.stickTo === 'top') {\n          topPoint -= mTop;\n          bottomPoint -= elemHeight + mTop;\n        } else if (this.options.stickTo === 'bottom') {\n          topPoint -= winHeight - (elemHeight + mBtm);\n          bottomPoint -= winHeight - mBtm;\n        } else {\n          //this would be the stickTo: both option... tricky\n        }\n\n        this.topPoint = topPoint;\n        this.bottomPoint = bottomPoint;\n\n        if (cb) {\n          cb();\n        }\n      }\n\n      /**\r\n       * Destroys the current sticky element.\r\n       * Resets the element to the top position first.\r\n       * Removes event listeners, JS-added css properties and classes, and unwraps the $element if the JS added the $container.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this._removeSticky(true);\n\n        this.$element.removeClass(this.options.stickyClass + ' is-anchored is-at-top').css({\n          height: '',\n          top: '',\n          bottom: '',\n          'max-width': ''\n        }).off('resizeme.zf.trigger');\n        if (this.$anchor && this.$anchor.length) {\n          this.$anchor.off('change.zf.sticky');\n        }\n        $(window).off(this.scrollListener);\n\n        if (this.wasWrapped) {\n          this.$element.unwrap();\n        } else {\n          this.$container.removeClass(this.options.containerClass).css({\n            height: ''\n          });\n        }\n        Foundation.unregisterPlugin(this);\n      }\n    }]);\n\n    return Sticky;\n  }();\n\n  Sticky.defaults = {\n    /**\r\n     * Customizable container template. Add your own classes for styling and sizing.\r\n     * @option\r\n     * @example '&lt;div data-sticky-container class=\"small-6 columns\"&gt;&lt;/div&gt;'\r\n     */\n    container: '<div data-sticky-container></div>',\n    /**\r\n     * Location in the view the element sticks to.\r\n     * @option\r\n     * @example 'top'\r\n     */\n    stickTo: 'top',\n    /**\r\n     * If anchored to a single element, the id of that element.\r\n     * @option\r\n     * @example 'exampleId'\r\n     */\n    anchor: '',\n    /**\r\n     * If using more than one element as anchor points, the id of the top anchor.\r\n     * @option\r\n     * @example 'exampleId:top'\r\n     */\n    topAnchor: '',\n    /**\r\n     * If using more than one element as anchor points, the id of the bottom anchor.\r\n     * @option\r\n     * @example 'exampleId:bottom'\r\n     */\n    btmAnchor: '',\n    /**\r\n     * Margin, in `em`'s to apply to the top of the element when it becomes sticky.\r\n     * @option\r\n     * @example 1\r\n     */\n    marginTop: 1,\n    /**\r\n     * Margin, in `em`'s to apply to the bottom of the element when it becomes sticky.\r\n     * @option\r\n     * @example 1\r\n     */\n    marginBottom: 1,\n    /**\r\n     * Breakpoint string that is the minimum screen size an element should become sticky.\r\n     * @option\r\n     * @example 'medium'\r\n     */\n    stickyOn: 'medium',\n    /**\r\n     * Class applied to sticky element, and removed on destruction. Foundation defaults to `sticky`.\r\n     * @option\r\n     * @example 'sticky'\r\n     */\n    stickyClass: 'sticky',\n    /**\r\n     * Class applied to sticky container. Foundation defaults to `sticky-container`.\r\n     * @option\r\n     * @example 'sticky-container'\r\n     */\n    containerClass: 'sticky-container',\n    /**\r\n     * Number of scroll events between the plugin's recalculating sticky points. Setting it to `0` will cause it to recalc every scroll event, setting it to `-1` will prevent recalc on scroll.\r\n     * @option\r\n     * @example 50\r\n     */\n    checkEvery: -1\n  };\n\n  /**\r\n   * Helper function to calculate em values\r\n   * @param Number {em} - number of em's to calculate into pixels\r\n   */\n  function emCalc(em) {\n    return parseInt(window.getComputedStyle(document.body, null).fontSize, 10) * em;\n  }\n\n  // Window exports\n  Foundation.plugin(Sticky, 'Sticky');\n}(jQuery);\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n!function ($) {\n\n  /**\r\n   * Magellan module.\r\n   * @module foundation.magellan\r\n   */\n\n  var Magellan = function () {\n    /**\r\n     * Creates a new instance of Magellan.\r\n     * @class\r\n     * @fires Magellan#init\r\n     * @param {Object} element - jQuery object to add the trigger to.\r\n     * @param {Object} options - Overrides to the default plugin settings.\r\n     */\n    function Magellan(element, options) {\n      _classCallCheck(this, Magellan);\n\n      this.$element = element;\n      this.options = $.extend({}, Magellan.defaults, this.$element.data(), options);\n\n      this._init();\n\n      Foundation.registerPlugin(this, 'Magellan');\n    }\n\n    /**\r\n     * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\r\n     * @private\r\n     */\n\n\n    _createClass(Magellan, [{\n      key: '_init',\n      value: function _init() {\n        var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan');\n        var _this = this;\n        this.$targets = $('[data-magellan-target]');\n        this.$links = this.$element.find('a');\n        this.$element.attr({\n          'data-resize': id,\n          'data-scroll': id,\n          'id': id\n        });\n        this.$active = $();\n        this.scrollPos = parseInt(window.pageYOffset, 10);\n\n        this._events();\n      }\n\n      /**\r\n       * Calculates an array of pixel values that are the demarcation lines between locations on the page.\r\n       * Can be invoked if new elements are added or the size of a location changes.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'calcPoints',\n      value: function calcPoints() {\n        var _this = this,\n            body = document.body,\n            html = document.documentElement;\n\n        this.points = [];\n        this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\n        this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n        this.$targets.each(function () {\n          var $tar = $(this),\n              pt = Math.round($tar.offset().top - _this.options.threshold);\n          $tar.targetPoint = pt;\n          _this.points.push(pt);\n        });\n      }\n\n      /**\r\n       * Initializes events for Magellan.\r\n       * @private\r\n       */\n\n    }, {\n      key: '_events',\n      value: function _events() {\n        var _this = this,\n            $body = $('html, body'),\n            opts = {\n          duration: _this.options.animationDuration,\n          easing: _this.options.animationEasing\n        };\n        $(window).one('load', function () {\n          if (_this.options.deepLinking) {\n            if (location.hash) {\n              _this.scrollToLoc(location.hash);\n            }\n          }\n          _this.calcPoints();\n          _this._updateActive();\n        });\n\n        this.$element.on({\n          'resizeme.zf.trigger': this.reflow.bind(this),\n          'scrollme.zf.trigger': this._updateActive.bind(this)\n        }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n          e.preventDefault();\n          var arrival = this.getAttribute('href');\n          _this.scrollToLoc(arrival);\n        });\n      }\n\n      /**\r\n       * Function to scroll to a given location on the page.\r\n       * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\r\n       * @function\r\n       */\n\n    }, {\n      key: 'scrollToLoc',\n      value: function scrollToLoc(loc) {\n        var scrollPos = Math.round($(loc).offset().top - this.options.threshold / 2 - this.options.barOffset);\n\n        $('html, body').stop(true).animate({ scrollTop: scrollPos }, this.options.animationDuration, this.options.animationEasing);\n      }\n\n      /**\r\n       * Calls necessary functions to update Magellan upon DOM change\r\n       * @function\r\n       */\n\n    }, {\n      key: 'reflow',\n      value: function reflow() {\n        this.calcPoints();\n        this._updateActive();\n      }\n\n      /**\r\n       * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\r\n       * @private\r\n       * @function\r\n       * @fires Magellan#update\r\n       */\n\n    }, {\n      key: '_updateActive',\n      value: function _updateActive() /*evt, elem, scrollPos*/{\n        var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n            curIdx;\n\n        if (winPos + this.winHeight === this.docHeight) {\n          curIdx = this.points.length - 1;\n        } else if (winPos < this.points[0]) {\n          curIdx = 0;\n        } else {\n          var isDown = this.scrollPos < winPos,\n              _this = this,\n              curVisible = this.points.filter(function (p, i) {\n            return isDown ? p - _this.options.barOffset <= winPos : p - _this.options.barOffset - _this.options.threshold <= winPos;\n          });\n          curIdx = curVisible.length ? curVisible.length - 1 : 0;\n        }\n\n        this.$active.removeClass(this.options.activeClass);\n        this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\n\n        if (this.options.deepLinking) {\n          var hash = this.$active[0].getAttribute('href');\n          if (window.history.pushState) {\n            window.history.pushState(null, null, hash);\n          } else {\n            window.location.hash = hash;\n          }\n        }\n\n        this.scrollPos = winPos;\n        /**\r\n         * Fires when magellan is finished updating to the new active element.\r\n         * @event Magellan#update\r\n         */\n        this.$element.trigger('update.zf.magellan', [this.$active]);\n      }\n\n      /**\r\n       * Destroys an instance of Magellan and resets the url of the window.\r\n       * @function\r\n       */\n\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n        if (this.options.deepLinking) {\n          var hash = this.$active[0].getAttribute('href');\n          window.location.hash.replace(hash, '');\n        }\n\n        Foundation.unregisterPlugin(this);\n      }\n    }]);\n\n    return Magellan;\n  }();\n\n  /**\r\n   * Default settings for plugin\r\n   */\n\n\n  Magellan.defaults = {\n    /**\r\n     * Amount of time, in ms, the animated scrolling should take between locations.\r\n     * @option\r\n     * @example 500\r\n     */\n    animationDuration: 500,\n    /**\r\n     * Animation style to use when scrolling between locations.\r\n     * @option\r\n     * @example 'ease-in-out'\r\n     */\n    animationEasing: 'linear',\n    /**\r\n     * Number of pixels to use as a marker for location changes.\r\n     * @option\r\n     * @example 50\r\n     */\n    threshold: 50,\n    /**\r\n     * Class applied to the active locations link on the magellan container.\r\n     * @option\r\n     * @example 'active'\r\n     */\n    activeClass: 'active',\n    /**\r\n     * Allows the script to manipulate the url of the current page, and if supported, alter the history.\r\n     * @option\r\n     * @example true\r\n     */\n    deepLinking: false,\n    /**\r\n     * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\r\n     * @option\r\n     * @example 25\r\n     */\n    barOffset: 0\n  };\n\n  // Window exports\n  Foundation.plugin(Magellan, 'Magellan');\n}(jQuery);\n'use strict';\n\n$(document).ready(function () {\n\n    $('body').scrollspy({\n        target: '#pokedex_generation_nav',\n        offset: 40\n    });\n\n    $(document).click(function (event) {\n        var container = $('.navbar-fixed-top');\n\n        if (!container.is(event.target) // if the target of the click isn't the container...\n        && container.has(event.target).length === 0) {\n            // ... nor a descendant of the container\n            if ($('.navbar-collapse.in').length > 0) {\n                $('.navbar-toggle').trigger('click');\n            }\n        }\n    });\n\n    $(document).on('click', '#pokedex_generation_nav a', function () {\n\n        var gen = $(this).attr('href');\n\n        gen = gen.replace('#', '').replace('_', '-'); // Convert from my ID Naming Convention to my Class Naming Convention\n\n        $('.' + gen).css('background-color', '#00FF00');\n\n        setTimeout(function () {\n\n            $('.' + gen).removeAttr('style'); // Flash the color, then remove it\n        }, 750);\n    });\n\n    $('[name=\"pokedex_caught\"]').bootstrapSwitch({\n        onText: 'Caught',\n        offText: 'Need'\n    });\n});\n'use strict';\n\nconsole.todo = console.info;\n\nio = io.connect();\n\nvar loginData = {\n    room: 'pokedexLobby'\n};\n// Emit ready event with room name.\n\nss.forceBase64 = true; // Necessary to properly stream to the server\n\nio.emit('ready', loginData);\n\nio.on('getPokedex', function () {\n\n    $('#database_modal').modal('show');\n});\n\nio.on('pokedexCreated', function () {\n\n    io.emit('ready', loginData);\n\n    $('#database_modal').modal('hide');\n});\n\nio.on('pokedexList', function (pokedex) {\n\n    var box = '';\n\n    var caught = {\n        gen1: 0,\n        gen2: 0,\n        gen3: 0,\n        gen4: 0,\n        gen5: 0,\n        gen6: 0\n    };\n    var totalCaught = 0;\n\n    var pokemonGeneration;\n    var currentGen;\n    var startOfGen;\n\n    for (var nationalDex = 1, boxPokemonCounter = 1, boxLineCounter = 1; nationalDex <= pokedex.length; nationalDex++, boxPokemonCounter++, boxLineCounter++) {\n\n        pokemonGeneration = whichGeneration(nationalDex);\n\n        currentGen = pokemonGeneration.currentGen;\n        startOfGen = pokemonGeneration.startOfGen;\n\n        if (pokedex[nationalDex - 1].caught === true) {\n\n            caught['gen' + currentGen]++;\n        }\n\n        if (boxLineCounter == 1) {\n\n            box = box + '<div class = \"row\">';\n        }\n\n        box = box + '<a href = \"#\" class = \"edit-pokedex-entry\" data-id = \"' + pokedex[nationalDex - 1]._id + '\">';\n\n        box = box + '<div' + (startOfGen === true ? ' id = \"gen_' + currentGen + '\"' : '') + ' class = \"col-sm-2 col-xs-4 pokedex-entry no-' + nationalDex + ' gen-' + currentGen + (startOfGen === true ? ' new-gen-begins' : '') + (pokedex[nationalDex - 1].caught === true ? ' caught' : '') + '\"><img src = \"/images/sprites/' + nationalDex + '.png\" />' + '#' + nationalDex + ' ' + pokedex[nationalDex - 1].pokemon + '</div>';\n\n        box = box + '</a>';\n\n        if (boxLineCounter == 6) {\n\n            box = box + '</div>';\n\n            boxLineCounter = 0;\n        }\n\n        if (boxPokemonCounter == 30 || nationalDex == pokedex.length) {\n\n            box = '<div class = \"container-fluid\"><h3 id = \"box_' + (nationalDex - (boxPokemonCounter - 1)) + '_' + nationalDex + '\">' + (nationalDex - (boxPokemonCounter - 1)) + ' - ' + nationalDex + '</h3><div class = \"section\">' + box + '</div></div>';\n\n            $('#pokedex_container').append(box);\n\n            box = '';\n\n            boxPokemonCounter = 0;\n        }\n    }\n\n    for (var name in caught) {\n\n        totalCaught = totalCaught + caught[name];\n\n        $('#' + name + '_completion').text(caught[name]);\n    }\n\n    $('#national_completion').text(totalCaught);\n});\n\n$('form').submit(function (event) {\n\n    event.preventDefault(); // Allows Forms to Validate, but doesn't force a Refresh of the page on Submission\n});\n\n$(document).on('click', '#login', function (event) {\n\n    event.preventDefault();\n\n    $('#login_modal').modal('show');\n});\n\n$(document).on('click', '#login_modal .btn.login', function () {\n\n    var data = {\n        username: $('#login_modal .username').val(),\n        password: $('#login_modal .password').val()\n    };\n\n    io.emit('su', data);\n});\n\nio.on('suSuccess', function () {\n\n    console.log('successful login');\n\n    $('#login_modal').modal('hide');\n\n    $('#admin_controls').html('<li><a href = \"#\" id = \"import\">Import</a></li><li><a href = \"#\" id = \"edit_user\">Change Password</a></li><li><a href = \"#\" id = \"logout\">Logout</a></li>');\n\n    $('body').addClass('admin');\n});\n\n$(document).on('click', '#logout', function (event) {\n\n    event.preventDefault();\n\n    io.emit('logout');\n});\n\nio.on('logoutComplete', function () {\n\n    console.log('sucessful logout');\n\n    $('#admin_controls').html('<li><a href = \"#\" id = \"login\">Admin Login</a></li>');\n\n    $('body').removeClass('admin');\n});\n\nio.on('suFailure', function () {\n\n    console.log('unsuccessful login');\n});\n\nio.on('niceTry', function () {\n\n    alert('Nice Try');\n});\n\n$(document).on('click', '#edit_user', function (event) {\n\n    event.preventDefault();\n\n    io.emit('getCurrentUser');\n});\n\nio.on('currentUserData', function (data) {\n\n    $('#edit_user_modal .modal-title').text('Edit ' + data.username);\n    $('#edit_user_modal .username').val(data.username);\n    $('#edit_user_modal .btn.save').data('id', data._id);\n\n    $('#edit_user_modal').modal('show');\n});\n\n$(document).on('click', '#edit_user_modal .btn.save', function () {\n\n    var data = {\n        id: $('#edit_user_modal .btn.save').data('id'),\n        password: $('#edit_user_modal .password').val()\n    };\n\n    io.emit('editUser', data);\n});\n\nio.on('userUpdated', function (data) {\n\n    console.log(data.username + ' Updated');\n\n    $('#edit_user_modal').modal('hide');\n});\n\n$(document).on('click', '.edit-pokedex-entry', function (event) {\n\n    event.preventDefault();\n\n    var dexNumber = $(this).data('id');\n\n    io.emit('editPokedexEntry', dexNumber);\n});\n\nio.on('pokedexEntryDetails', function (data) {\n\n    $('#pokedex_entry_modal .modal-title').text('Edit ' + data.pokemon);\n\n    $('#pokedex_entry_modal .sprite').attr('src', '/images/sprites/' + data.no + '.png');\n\n    data.caught === true ? $('#pokedex_entry_modal [name=\"pokedex_caught\"]').bootstrapSwitch('state', true, false) : $('#pokedex_entry_modal [name=\"pokedex_caught\"]').bootstrapSwitch('state', false, false);\n\n    $('#pokedex_entry_modal .btn.save').data('id', data._id);\n\n    $('#pokedex_entry_modal').modal('show');\n});\n\n$(document).on('click', '#pokedex_entry_modal .btn.save', function () {\n\n    var data = {\n        id: $('#pokedex_entry_modal .btn.save').data('id'),\n        caught: $('#pokedex_entry_modal [name=\"pokedex_caught\"]').bootstrapSwitch('state')\n    };\n\n    io.emit('updatePokedexEntry', data);\n});\n\nio.on('pokemonUpdated', function (data) {\n\n    updatePokedexDisplay(data.no, data.caught);\n});\n\n$('#pokedex_entry_modal').on('hidden.bs.modal', function () {\n\n    $('#pokedex_entry_modal .btn.save').data('id', ''); // Clear out ID to prevent mistakes/abuse\n});\n\n$(document).on('click', '#import', function (event) {\n\n    event.preventDefault();\n\n    $('#csv_import_modal').modal('show');\n});\n\n$(document).on('click', '#csv_import_modal .btn.import', function () {\n\n    $(this).val('Working...').attr('disabled', true);\n\n    var file = $('#csv_import_modal .file-upload')[0].files[0];\n    var stream = ss.createStream();\n\n    var blobStream = ss.createBlobReadStream(file);\n\n    var data = {\n        data: file,\n        size: file.size,\n        name: file.name\n    };\n\n    blobStream.on('data', function (chunk) {\n\n        stream.write(chunk);\n    });\n\n    blobStream.on('end', function () {\n\n        stream.end();\n    });\n\n    // upload a file to the server. \n    ss(io).emit('csvUpload', stream, data, loginData.room);\n    blobStream.pipe(stream);\n});\n\nio.on('pokedexEntryImported', function (data, caught) {\n\n    updatePokedexDisplay(data.no, caught);\n});\n\nio.on('pokedexImported', function () {\n\n    $('#csv_import_modal').modal('hide');\n\n    $('#csv_import_modal .btn.import').val('Import').attr('disabled', false);\n});\n\n$('#login_modal, #edit_user_modal, #csv_import_modal').on('hidden.bs.modal', function () {\n\n    $(this).find('form')[0].reset(); // Clear out inputs to prevent mistakes/abuse\n});\n\nfunction updatePokedexDisplay(nationalDex, caught) {\n\n    var pokemonGeneration = whichGeneration(nationalDex);\n\n    if (caught === true) {\n\n        if (!$('.no-' + nationalDex).hasClass('caught')) {\n\n            $('#gen' + pokemonGeneration.currentGen + '_completion').text(parseInt($('#gen' + pokemonGeneration.currentGen + '_completion').text()) + 1);\n\n            $('#national_completion').text(parseInt($('#national_completion').text()) + 1);\n\n            $('.no-' + nationalDex).addClass('caught');\n        }\n    } else {\n\n        if ($('.no-' + nationalDex).hasClass('caught')) {\n\n            $('#gen' + pokemonGeneration.currentGen + '_completion').text(parseInt($('#gen' + pokemonGeneration.currentGen + '_completion').text()) - 1);\n\n            $('#national_completion').text(parseInt($('#national_completion').text()) - 1);\n\n            $('.no-' + nationalDex).removeClass('caught');\n        }\n    }\n}\n\nfunction whichGeneration(nationalDex) {\n\n    var generations = {\n        gen1: {\n            start: 1,\n            end: 151\n        },\n        gen2: {\n            start: 152,\n            end: 251\n        },\n        gen3: {\n            start: 252,\n            end: 386\n        },\n        gen4: {\n            start: 387,\n            end: 493\n        },\n        gen5: {\n            start: 494,\n            end: 649\n        },\n        gen6: {\n            start: 650,\n            end: 721\n        }\n    };\n\n    var pokemonGeneration = {\n        currentGen: 0,\n        startOfGen: false\n    };\n\n    if (nationalDex >= generations.gen1.start && nationalDex <= generations.gen1.end) {\n        pokemonGeneration.currentGen = 1;\n        if (nationalDex == generations.gen1.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    } else if (nationalDex >= generations.gen2.start && nationalDex <= generations.gen2.end) {\n        pokemonGeneration.currentGen = 2;\n        if (nationalDex == generations.gen2.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    } else if (nationalDex >= generations.gen3.start && nationalDex <= generations.gen3.end) {\n        pokemonGeneration.currentGen = 3;\n        if (nationalDex == generations.gen3.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    } else if (nationalDex >= generations.gen4.start && nationalDex <= generations.gen4.end) {\n        pokemonGeneration.currentGen = 4;\n        if (nationalDex == generations.gen4.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    } else if (nationalDex >= generations.gen5.start && nationalDex <= generations.gen5.end) {\n        pokemonGeneration.currentGen = 5;\n        if (nationalDex == generations.gen5.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    } else if (nationalDex >= generations.gen6.start && nationalDex <= generations.gen6.end) {\n        pokemonGeneration.currentGen = 6;\n        if (nationalDex == generations.gen6.start) {\n            pokemonGeneration.startOfGen = true;\n        }\n    }\n\n    return pokemonGeneration;\n}","console.todo = console.info;\r\n\r\nio = io.connect();\r\n\r\nvar loginData = {\r\n    room:  'pokedexLobby',\r\n}\r\n// Emit ready event with room name.\r\n\r\nss.forceBase64 = true; // Necessary to properly stream to the server\r\n\r\nio.emit( 'ready', loginData );\r\n\r\nio.on( 'getPokedex', function() {\r\n\r\n    $( '#database_modal' ).modal( 'show' );\r\n\r\n} );\r\n\r\nio.on( 'pokedexCreated', function() {\r\n\r\n    io.emit( 'ready', loginData );\r\n\r\n    $( '#database_modal' ).modal( 'hide' );\r\n\r\n} );\r\n\r\nio.on( 'pokedexList', function( pokedex ) {\r\n\r\n    var box = '';\r\n\r\n    var caught = {\r\n        gen1: 0,\r\n        gen2: 0,\r\n        gen3: 0,\r\n        gen4: 0,\r\n        gen5: 0,\r\n        gen6: 0,\r\n    };\r\n    var totalCaught = 0;\r\n\r\n    var pokemonGeneration;\r\n    var currentGen;\r\n    var startOfGen;\r\n\r\n    for ( var nationalDex = 1, boxPokemonCounter = 1, boxLineCounter = 1; nationalDex <= pokedex.length; nationalDex++, boxPokemonCounter++, boxLineCounter++ ) {\r\n\r\n        pokemonGeneration = whichGeneration( nationalDex );\r\n\r\n        currentGen = pokemonGeneration.currentGen;\r\n        startOfGen = pokemonGeneration.startOfGen;\r\n\r\n        if ( pokedex[ nationalDex -1 ].caught === true ) {\r\n\r\n            caught['gen' + currentGen ]++;\r\n\r\n        }\r\n\r\n        if ( boxLineCounter == 1 ) {\r\n\r\n            box = box + '<div class = \"row\">';\r\n\r\n        }\r\n\r\n        box = box + '<a href = \"#\" class = \"edit-pokedex-entry\" data-id = \"' + pokedex[ nationalDex - 1 ]._id + '\">';\r\n\r\n        box = box + '<div' + ( ( startOfGen === true ) ? ' id = \"gen_' + currentGen + '\"' : '' ) + ' class = \"col-sm-2 col-xs-4 pokedex-entry no-' + nationalDex + ' gen-' + currentGen + ( ( startOfGen === true ) ? ' new-gen-begins' : '' ) + ( ( pokedex[ nationalDex - 1 ].caught === true ) ? ' caught' : '' ) + '\"><img src = \"/images/sprites/' + nationalDex + '.png\" />' + '#' + nationalDex + ' ' + pokedex[ nationalDex - 1 ].pokemon + '</div>';\r\n\r\n        box = box + '</a>';\r\n\r\n        if ( boxLineCounter == 6 ) {\r\n\r\n            box = box + '</div>';\r\n\r\n            boxLineCounter = 0;\r\n\r\n        }\r\n\r\n        if ( ( boxPokemonCounter == 30 ) || ( nationalDex == pokedex.length ) ) {\r\n\r\n            box = '<div class = \"container-fluid\"><h3 id = \"box_' + ( nationalDex - ( boxPokemonCounter - 1 ) ) + '_' + nationalDex + '\">' + ( nationalDex - ( boxPokemonCounter - 1 ) ) + ' - ' + nationalDex + '</h3><div class = \"section\">' + box + '</div></div>';\r\n\r\n            $( '#pokedex_container' ).append( box );\r\n\r\n            box = '';\r\n\r\n            boxPokemonCounter = 0;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    for ( var name in caught ) {\r\n\r\n        totalCaught = totalCaught + caught[name];\r\n\r\n        $( '#' + name + '_completion' ).text( caught[name] );\r\n\r\n    }\r\n\r\n    $( '#national_completion' ).text( totalCaught );\r\n\r\n});\r\n\r\n$( 'form' ).submit( function( event ) {\r\n\r\n    event.preventDefault(); // Allows Forms to Validate, but doesn't force a Refresh of the page on Submission\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#login', function( event ) {\r\n\r\n    event.preventDefault();\r\n\r\n    $( '#login_modal' ).modal( 'show' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#login_modal .btn.login', function() {\r\n\r\n    var data = {\r\n        username: $( '#login_modal .username' ).val(),\r\n        password: $( '#login_modal .password' ).val(),\r\n    };\r\n\r\n    io.emit( 'su', data );\r\n\r\n} );\r\n\r\nio.on( 'suSuccess', function() { \r\n\r\n    console.log( 'successful login' );\r\n\r\n    $( '#login_modal' ).modal( 'hide' );\r\n\r\n    $( '#admin_controls' ).html( '<li><a href = \"#\" id = \"import\">Import</a></li><li><a href = \"#\" id = \"edit_user\">Change Password</a></li><li><a href = \"#\" id = \"logout\">Logout</a></li>' );\r\n    \r\n    $( 'body' ).addClass( 'admin' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#logout', function( event ) {\r\n\r\n    event.preventDefault();\r\n\r\n    io.emit( 'logout' );\r\n\r\n} );\r\n\r\nio.on( 'logoutComplete', function() {\r\n\r\n    console.log( 'sucessful logout' );\r\n\r\n    $( '#admin_controls' ).html( '<li><a href = \"#\" id = \"login\">Admin Login</a></li>' );\r\n    \r\n    $( 'body' ).removeClass( 'admin' );\r\n\r\n} );\r\n\r\nio.on( 'suFailure', function() {\r\n\r\n    console.log( 'unsuccessful login' );\r\n\r\n} );\r\n\r\nio.on( 'niceTry', function() {\r\n\r\n    alert( 'Nice Try' );\r\n    \r\n} );\r\n\r\n$( document ).on( 'click', '#edit_user', function( event ) {\r\n\r\n    event.preventDefault();\r\n\r\n    io.emit( 'getCurrentUser' );\r\n\r\n} );\r\n\r\nio.on( 'currentUserData', function( data ) {\r\n\r\n    $( '#edit_user_modal .modal-title' ).text( 'Edit ' + data.username );\r\n    $( '#edit_user_modal .username' ).val( data.username );\r\n    $( '#edit_user_modal .btn.save' ).data( 'id', data._id );\r\n\r\n    $( '#edit_user_modal' ).modal( 'show' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#edit_user_modal .btn.save', function() {\r\n\r\n    var data = {\r\n        id: $( '#edit_user_modal .btn.save' ).data( 'id' ),\r\n        password: $( '#edit_user_modal .password' ).val(),\r\n    };\r\n\r\n    io.emit( 'editUser', data );\r\n\r\n} );\r\n\r\nio.on( 'userUpdated', function( data ) {\r\n\r\n    console.log( data.username + ' Updated' );\r\n\r\n    $( '#edit_user_modal' ).modal( 'hide' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '.edit-pokedex-entry', function( event ) {\r\n\r\n    event.preventDefault();\r\n\r\n    var dexNumber = $( this ).data( 'id' );\r\n\r\n    io.emit( 'editPokedexEntry', dexNumber );\r\n\r\n} );\r\n\r\nio.on( 'pokedexEntryDetails', function( data ) {\r\n\r\n    $( '#pokedex_entry_modal .modal-title' ).text( 'Edit ' + data.pokemon );\r\n\r\n    $( '#pokedex_entry_modal .sprite' ).attr( 'src', '/images/sprites/' + data.no + '.png' );\r\n\r\n    ( ( data.caught === true ) ? $( '#pokedex_entry_modal [name=\"pokedex_caught\"]' ).bootstrapSwitch( 'state', true, false ) : $( '#pokedex_entry_modal [name=\"pokedex_caught\"]' ).bootstrapSwitch( 'state', false, false ) );\r\n\r\n    $( '#pokedex_entry_modal .btn.save' ).data( 'id', data._id );\r\n\r\n    $( '#pokedex_entry_modal' ).modal( 'show' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#pokedex_entry_modal .btn.save', function() {\r\n\r\n    var data = {\r\n        id: $( '#pokedex_entry_modal .btn.save' ).data( 'id' ),\r\n        caught: $( '#pokedex_entry_modal [name=\"pokedex_caught\"]' ).bootstrapSwitch( 'state' ),\r\n    };\r\n\r\n    io.emit( 'updatePokedexEntry', data );\r\n\r\n} );\r\n\r\nio.on( 'pokemonUpdated', function( data ) {\r\n\r\n    updatePokedexDisplay( data.no, data.caught );\r\n\r\n} );\r\n\r\n$( '#pokedex_entry_modal' ).on( 'hidden.bs.modal', function () {\r\n\r\n    $( '#pokedex_entry_modal .btn.save' ).data( 'id', '' ); // Clear out ID to prevent mistakes/abuse\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#import', function( event ) {\r\n\r\n    event.preventDefault();\r\n\r\n    $( '#csv_import_modal' ).modal( 'show' );\r\n\r\n} );\r\n\r\n$( document ).on( 'click', '#csv_import_modal .btn.import', function() {\r\n\r\n    $( this ).val( 'Working...' ).attr( 'disabled', true );\r\n\r\n    var file = $( '#csv_import_modal .file-upload' )[0].files[0];\r\n    var stream = ss.createStream();\r\n\r\n    var blobStream = ss.createBlobReadStream( file );\r\n\r\n    var data = {\r\n        data: file,\r\n        size: file.size,\r\n        name: file.name,\r\n    }\r\n\r\n    blobStream.on( 'data', function( chunk ) {\r\n\r\n        stream.write( chunk );\r\n\r\n    } );\r\n\r\n    blobStream.on( 'end', function() {\r\n\r\n        stream.end();\r\n\r\n    } );\r\n\r\n    // upload a file to the server. \r\n    ss( io ).emit( 'csvUpload', stream, data, loginData.room );\r\n    blobStream.pipe( stream );\r\n\r\n} );\r\n\r\nio.on( 'pokedexEntryImported', function( data, caught ) {\r\n\r\n    updatePokedexDisplay( data.no, caught );\r\n\r\n} );\r\n\r\nio.on( 'pokedexImported', function() {\r\n\r\n    $( '#csv_import_modal' ).modal( 'hide' );\r\n\r\n    $( '#csv_import_modal .btn.import' ).val( 'Import' ).attr( 'disabled', false );\r\n\r\n} );\r\n\r\n$( '#login_modal, #edit_user_modal, #csv_import_modal' ).on( 'hidden.bs.modal', function () {\r\n\r\n    $( this ).find( 'form' )[0].reset(); // Clear out inputs to prevent mistakes/abuse\r\n\r\n} );\r\n\r\nfunction updatePokedexDisplay( nationalDex, caught ) {\r\n\r\n    var pokemonGeneration = whichGeneration( nationalDex );\r\n\r\n    if ( caught === true ) {\r\n\r\n        if ( ! $( '.no-' + nationalDex ).hasClass( 'caught' ) ) {\r\n\r\n            $( '#gen' + pokemonGeneration.currentGen + '_completion' ).text( parseInt( $( '#gen' + pokemonGeneration.currentGen + '_completion' ).text() ) + 1 );\r\n\r\n            $( '#national_completion' ).text( parseInt( $( '#national_completion' ).text() ) + 1 );\r\n\r\n            $( '.no-' + nationalDex ).addClass( 'caught' );\r\n\r\n        }\r\n\r\n    }\r\n    else {\r\n\r\n        if ( $( '.no-' + nationalDex ).hasClass( 'caught' ) ) {\r\n\r\n            $( '#gen' + pokemonGeneration.currentGen + '_completion' ).text( parseInt( $( '#gen' + pokemonGeneration.currentGen + '_completion' ).text() ) - 1 );\r\n\r\n            $( '#national_completion' ).text( parseInt( $( '#national_completion' ).text() ) - 1 );\r\n\r\n            $( '.no-' + nationalDex ).removeClass( 'caught' );\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction whichGeneration( nationalDex ) {\r\n\r\n    var generations = {\r\n        gen1: {\r\n            start: 1,\r\n            end: 151,\r\n        },\r\n        gen2: {\r\n            start: 152,\r\n            end: 251,\r\n        },\r\n        gen3: {\r\n            start: 252,\r\n            end: 386,\r\n        },\r\n        gen4: {\r\n            start: 387,\r\n            end: 493,\r\n        },\r\n        gen5: {\r\n            start: 494,\r\n            end: 649,\r\n        },\r\n        gen6: {\r\n            start: 650,\r\n            end: 721,\r\n        },\r\n    };\r\n\r\n    var pokemonGeneration = {\r\n        currentGen: 0,\r\n        startOfGen: false,\r\n    };\r\n\r\n    if ( ( nationalDex >= generations.gen1.start ) && ( nationalDex <= generations.gen1.end ) ) {\r\n        pokemonGeneration.currentGen = 1;\r\n        if ( nationalDex == generations.gen1.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n    else if ( ( nationalDex >= generations.gen2.start ) && ( nationalDex <= generations.gen2.end ) ) {\r\n        pokemonGeneration.currentGen = 2;\r\n        if ( nationalDex == generations.gen2.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n    else if ( ( nationalDex >= generations.gen3.start ) && ( nationalDex <= generations.gen3.end ) ) {\r\n        pokemonGeneration.currentGen = 3;\r\n        if ( nationalDex == generations.gen3.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n    else if ( ( nationalDex >= generations.gen4.start ) && ( nationalDex <= generations.gen4.end ) ) {\r\n        pokemonGeneration.currentGen = 4;\r\n        if ( nationalDex == generations.gen4.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n    else if ( ( nationalDex >= generations.gen5.start ) && ( nationalDex <= generations.gen5.end ) ) {\r\n        pokemonGeneration.currentGen = 5;\r\n        if ( nationalDex == generations.gen5.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n    else if ( ( nationalDex >= generations.gen6.start ) && ( nationalDex <= generations.gen6.end ) ) {\r\n        pokemonGeneration.currentGen = 6;\r\n        if ( nationalDex == generations.gen6.start ) {\r\n            pokemonGeneration.startOfGen = true;\r\n        }\r\n    }\r\n\r\n    return pokemonGeneration;\r\n\r\n}","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.ss = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\r\n\r\nmodule.exports = require('./lib');\r\n\r\n\r\n},{\"./lib\":3}],2:[function(require,module,exports){\r\n(function (Buffer){\r\nvar util = require('util');\r\nvar Readable = require('stream').Readable;\r\nvar bind = require('component-bind');\r\n\r\n\r\nmodule.exports = BlobReadStream;\r\n\r\nutil.inherits(BlobReadStream, Readable);\r\n\r\n/**\r\n * Readable stream for Blob and File on browser.\r\n *\r\n * @param {Object} options\r\n * @api private\r\n */\r\nfunction BlobReadStream(blob, options) {\r\n  if (!(this instanceof BlobReadStream)) {\r\n    return new BlobReadStream(blob, options);\r\n  }\r\n\r\n  Readable.call(this, options);\r\n\r\n  this.blob = blob;\r\n  this.slice = blob.slice || blob.webkitSlice || blob.mozSlice;\r\n  this.start = 0;\r\n\r\n  var fileReader = this.fileReader = new FileReader();\r\n  fileReader.onload = bind(this, '_onload');\r\n  fileReader.onerror = bind(this, '_onerror');\r\n}\r\n\r\nBlobReadStream.prototype._read = function(size) {\r\n  var start = this.start;\r\n  var end = this.start = this.start + size;\r\n  var chunk = this.slice.call(this.blob, start, end);\r\n\r\n  if (chunk.size) {\r\n    this.fileReader.readAsArrayBuffer(chunk);\r\n  } else {\r\n    this.push(null);\r\n  }\r\n};\r\n\r\nBlobReadStream.prototype._onload = function(e) {\r\n  var chunk = new Buffer(new Uint8Array(e.target.result));\r\n  this.push(chunk);\r\n};\r\n\r\nBlobReadStream.prototype._onerror = function(e) {\r\n  var err = e.target.error;\r\n  this.emit('error', err);\r\n};\r\n\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n},{\"buffer\":9,\"component-bind\":32,\"stream\":28,\"util\":31}],3:[function(require,module,exports){\r\n(function (Buffer){\r\nvar Socket = require('./socket');\r\nvar IOStream = require('./iostream');\r\nvar BlobReadStream = require('./blob-read-stream');\r\n\r\n\r\nexports = module.exports = lookup;\r\n\r\n/**\r\n * Expose Node Buffer for browser.\r\n *\r\n * @api public\r\n */\r\nexports.Buffer = Buffer;\r\n\r\n/**\r\n * Expose Socket constructor.\r\n *\r\n * @api public\r\n */\r\nexports.Socket = Socket;\r\n\r\n/**\r\n * Expose IOStream constructor.\r\n *\r\n * @api public\r\n */\r\nexports.IOStream = IOStream;\r\n\r\n/**\r\n * Forces base 64 encoding when emitting. Must be set to true for Socket.IO v0.9 or lower.\r\n *\r\n * @api public\r\n */\r\nexports.forceBase64 = false;\r\n\r\n/**\r\n * Look up an existing Socket.\r\n *\r\n * @param {socket.io#Socket} socket.io\r\n * @param {Object} options\r\n * @return {Socket} Socket instance\r\n * @api public\r\n */\r\nfunction lookup(sio, options) {\r\n  options = options || {};\r\n  if (null == options.forceBase64) {\r\n    options.forceBase64 = exports.forceBase64;\r\n  }\r\n\r\n  if (!sio._streamSocket) {\r\n    sio._streamSocket = new Socket(sio, options);\r\n  }\r\n  return sio._streamSocket;\r\n}\r\n\r\n/**\r\n * Creates a new duplex stream.\r\n *\r\n * @param {Object} options\r\n * @return {IOStream} duplex stream\r\n * @api public\r\n */\r\nexports.createStream = function(options) {\r\n  return new IOStream(options);\r\n};\r\n\r\n/**\r\n * Creates a new readable stream for Blob/File on browser.\r\n *\r\n * @param {Blob} blob\r\n * @param {Object} options\r\n * @return {BlobReadStream} stream\r\n * @api public\r\n */\r\nexports.createBlobReadStream = function(blob, options) {\r\n  return new BlobReadStream(blob, options);\r\n};\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n},{\"./blob-read-stream\":2,\"./iostream\":4,\"./socket\":6,\"buffer\":9}],4:[function(require,module,exports){\r\nvar util = require('util');\r\nvar Duplex = require('stream').Duplex;\r\nvar bind = require('component-bind');\r\nvar uuid = require('./uuid');\r\nvar debug = require('debug')('socket.io-stream:iostream');\r\n\r\n\r\nmodule.exports = IOStream;\r\n\r\nutil.inherits(IOStream, Duplex);\r\n\r\n/**\r\n * Duplex\r\n *\r\n * @param {Object} options\r\n * @api private\r\n */\r\nfunction IOStream(options) {\r\n  if (!(this instanceof IOStream)) {\r\n    return new IOStream(options);\r\n  }\r\n\r\n  IOStream.super_.call(this, options);\r\n\r\n  this.options = options;\r\n  this.id = uuid();\r\n  this.socket = null;\r\n\r\n  // Buffers\r\n  this.pushBuffer = [];\r\n  this.writeBuffer = [];\r\n\r\n  // Op states\r\n  this._readable = false;\r\n  this._writable = false;\r\n  this.destroyed = false;\r\n\r\n  // default to *not* allowing half open sockets\r\n  this.allowHalfOpen = options && options.allowHalfOpen || false;\r\n\r\n  this.on('finish', this._onfinish);\r\n  this.on('end', this._onend);\r\n  this.on('error', this._onerror);\r\n}\r\n\r\n/**\r\n * Ensures that no more I/O activity happens on this stream.\r\n * Not necessary in the usual case.\r\n *\r\n * @api public\r\n */\r\nIOStream.prototype.destroy = function() {\r\n  debug('destroy');\r\n\r\n  if (this.destroyed) {\r\n    debug('already destroyed');\r\n    return;\r\n  }\r\n\r\n  this.readable = this.writable = false;\r\n\r\n  if (this.socket) {\r\n    debug('clean up');\r\n    this.socket.cleanup(this.id);\r\n    this.socket = null;\r\n  }\r\n\r\n  this.destroyed = true;\r\n};\r\n\r\n/**\r\n * Local read\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._read = function(size) {\r\n  var push;\r\n\r\n  // We can not read from the socket if it's destroyed obviously ...\r\n  if (this.destroyed) return;\r\n\r\n  if (this.pushBuffer.length) {\r\n    // flush buffer and end if it exists.\r\n    while (push = this.pushBuffer.shift()) {\r\n      if (!push()) break;\r\n    }\r\n    return;\r\n  }\r\n\r\n  this._readable = true;\r\n\r\n  // Go get data from remote stream\r\n  // Calls\r\n  // ._onread remotely\r\n  // then\r\n  // ._onwrite locally\r\n  this.socket._read(this.id, size);\r\n};\r\n\r\n\r\n/**\r\n * Read from remote stream\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._onread = function(size) {\r\n  var write = this.writeBuffer.shift();\r\n  if (write) return write();\r\n\r\n  this._writable = true;\r\n};\r\n\r\n/**\r\n * Write local data to remote stream\r\n * Calls\r\n * remtote ._onwrite\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._write = function(chunk, encoding, callback) {\r\n  var self = this;\r\n\r\n  function write() {\r\n    // We can not write to the socket if it's destroyed obviously ...\r\n    if (self.destroyed) return;\r\n\r\n    self._writable = false;\r\n    self.socket._write(self.id, chunk, encoding, callback);\r\n  }\r\n\r\n  if (this._writable) {\r\n    write();\r\n  } else {\r\n    this.writeBuffer.push(write);\r\n  }\r\n};\r\n\r\n/**\r\n * Write the data fetched remotely\r\n * so that we can now read locally\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._onwrite = function(chunk, encoding, callback) {\r\n  var self = this;\r\n\r\n  function push() {\r\n    self._readable = false;\r\n    var ret = self.push(chunk || '', encoding);\r\n    callback();\r\n    return ret;\r\n  }\r\n\r\n  if (this._readable) {\r\n    push();\r\n  } else {\r\n    this.pushBuffer.push(push);\r\n  }\r\n};\r\n\r\n/**\r\n * When ending send 'end' event to remote stream\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._end = function() {\r\n  if (this.pushBuffer.length) {\r\n    // end after flushing buffer.\r\n    this.pushBuffer.push(bind(this, '_done'));\r\n  } else {\r\n    this._done();\r\n  }\r\n};\r\n\r\n/**\r\n * Remote stream just ended\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._done = function() {\r\n  this._readable = false;\r\n\r\n  // signal the end of the data.\r\n  return this.push(null);\r\n};\r\n\r\n/**\r\n * the user has called .end(), and all the bytes have been\r\n * sent out to the other side.\r\n * If allowHalfOpen is false, or if the readable side has\r\n * ended already, then destroy.\r\n * If allowHalfOpen is true, then we need to set writable false,\r\n * so that only the writable side will be cleaned up.\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._onfinish = function() {\r\n  debug('_onfinish');\r\n  // Local socket just finished\r\n  // send 'end' event to remote\r\n  if (this.socket) {\r\n    this.socket._end(this.id);\r\n  }\r\n\r\n  this.writable = false;\r\n  this._writableState.ended = true;\r\n\r\n  if (!this.readable || this._readableState.ended) {\r\n    debug('_onfinish: ended, destroy %s', this._readableState);\r\n    return this.destroy();\r\n  }\r\n\r\n  debug('_onfinish: not ended');\r\n\r\n  if (!this.allowHalfOpen) {\r\n    this.push(null);\r\n\r\n    // just in case we're waiting for an EOF.\r\n    if (this.readable && !this._readableState.endEmitted) {\r\n      this.read(0);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * the EOF has been received, and no more bytes are coming.\r\n * if the writable side has ended already, then clean everything\r\n * up.\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._onend = function() {\r\n  debug('_onend');\r\n  this.readable = false;\r\n  this._readableState.ended = true;\r\n\r\n  if (!this.writable || this._writableState.finished) {\r\n    debug('_onend: %s', this._writableState);\r\n    return this.destroy();\r\n  }\r\n\r\n  debug('_onend: not finished');\r\n\r\n  if (!this.allowHalfOpen) {\r\n    this.end();\r\n  }\r\n};\r\n\r\n/**\r\n * When error in local stream\r\n * notyify remote\r\n * if err.remote = true\r\n * then error happened on remote stream\r\n *\r\n * @api private\r\n */\r\nIOStream.prototype._onerror = function(err) {\r\n  // check if the error came from remote stream.\r\n  if (!err.remote && this.socket) {\r\n    // notify the error to the corresponding remote stream.\r\n    this.socket._error(this.id, err);\r\n  }\r\n\r\n  this.destroy();\r\n};\r\n\r\n},{\"./uuid\":7,\"component-bind\":32,\"debug\":33,\"stream\":28,\"util\":31}],5:[function(require,module,exports){\r\nvar util = require('util');\r\nvar EventEmitter = require('events').EventEmitter;\r\nvar IOStream = require('./iostream');\r\nvar slice = Array.prototype.slice;\r\n\r\nexports.Encoder = Encoder;\r\nexports.Decoder = Decoder;\r\n\r\nutil.inherits(Encoder, EventEmitter);\r\n\r\nfunction Encoder() {\r\n  EventEmitter.call(this);\r\n}\r\n\r\n/**\r\n * Encode streams to placeholder objects.\r\n *\r\n * @api public\r\n */\r\nEncoder.prototype.encode = function(v) {\r\n  if (v instanceof IOStream) {\r\n    return this.encodeStream(v);\r\n  } else if (util.isArray(v)) {\r\n    return this.encodeArray(v);\r\n  } else if (v && 'object' == typeof v) {\r\n    return this.encodeObject(v);\r\n  }\r\n  return v;\r\n}\r\n\r\nEncoder.prototype.encodeStream = function(stream) {\r\n  this.emit('stream', stream);\r\n\r\n  // represent a stream in an object.\r\n  var v = { '$stream': stream.id };\r\n  if (stream.options) {\r\n    v.options = stream.options;\r\n  }\r\n  return v;\r\n}\r\n\r\nEncoder.prototype.encodeArray = function(arr) {\r\n  var v = [];\r\n  for (var i = 0, len = arr.length; i < len; i++) {\r\n    v.push(this.encode(arr[i]));\r\n  }\r\n  return v;\r\n}\r\n\r\nEncoder.prototype.encodeObject = function(obj) {\r\n  var v = {};\r\n  for (var k in obj) {\r\n    if (obj.hasOwnProperty(k)) {\r\n      v[k] = this.encode(obj[k]);\r\n    }\r\n  }\r\n  return v;\r\n}\r\n\r\nutil.inherits(Decoder, EventEmitter);\r\n\r\nfunction Decoder() {\r\n  EventEmitter.call(this);\r\n}\r\n\r\n/**\r\n * Decode placeholder objects to streams.\r\n *\r\n * @api public\r\n */\r\nDecoder.prototype.decode = function(v) {\r\n  if (v && v['$stream']) {\r\n    return this.decodeStream(v);\r\n  } else if (util.isArray(v)) {\r\n    return this.decodeArray(v);\r\n  } else if (v && 'object' == typeof v) {\r\n    return this.decodeObject(v);\r\n  }\r\n  return v;\r\n}\r\n\r\nDecoder.prototype.decodeStream = function(obj) {\r\n  var stream = new IOStream(obj.options);\r\n  stream.id = obj['$stream'];\r\n  this.emit('stream', stream);\r\n  return stream;\r\n}\r\n\r\nDecoder.prototype.decodeArray = function(arr) {\r\n  var v = [];\r\n  for (var i = 0, len = arr.length; i < len; i++) {\r\n    v.push(this.decode(arr[i]));\r\n  }\r\n  return v;\r\n}\r\n\r\nDecoder.prototype.decodeObject = function(obj) {\r\n  var v = {};\r\n  for (var k in obj) {\r\n    if (obj.hasOwnProperty(k)) {\r\n      v[k] = this.decode(obj[k]);\r\n    }\r\n  }\r\n  return v;\r\n}\r\n\r\n},{\"./iostream\":4,\"events\":13,\"util\":31}],6:[function(require,module,exports){\r\n(function (global,Buffer){\r\nvar util = require('util');\r\nvar EventEmitter = require('events').EventEmitter;\r\nvar bind = require('component-bind');\r\nvar IOStream = require('./iostream');\r\nvar parser = require('./parser');\r\nvar debug = require('debug')('socket.io-stream:socket');\r\nvar emit = EventEmitter.prototype.emit;\r\nvar on = EventEmitter.prototype.on;\r\nvar slice = Array.prototype.slice;\r\n\r\n\r\nexports = module.exports = Socket;\r\n\r\n/**\r\n * Base event name for messaging.\r\n *\r\n * @api public\r\n */\r\nexports.event = '$stream';\r\n\r\nexports.events = [\r\n  'error',\r\n  'newListener',\r\n  'removeListener'\r\n];\r\n\r\nutil.inherits(Socket, EventEmitter);\r\n\r\n/**\r\n * Bidirectional stream socket which wraps Socket.IO.\r\n *\r\n * @param {socket.io#Socket} socket.io\r\n * @api public\r\n */\r\nfunction Socket(sio, options) {\r\n  if (!(this instanceof Socket)) {\r\n    return new Socket(sio, options);\r\n  }\r\n\r\n  EventEmitter.call(this);\r\n\r\n  options = options || {};\r\n\r\n  this.sio = sio;\r\n  this.forceBase64 = !!options.forceBase64;\r\n  this.streams = {};\r\n  this.encoder = new parser.Encoder();\r\n  this.decoder = new parser.Decoder();\r\n\r\n  var eventName = exports.event;\r\n  sio.on(eventName, bind(this, emit));\r\n  sio.on(eventName + '-read', bind(this, '_onread'));\r\n  sio.on(eventName + '-write', bind(this, '_onwrite'));\r\n  sio.on(eventName + '-end', bind(this, '_onend'));\r\n  sio.on(eventName + '-error', bind(this, '_onerror'));\r\n  sio.on('error', bind(this, emit, 'error'));\r\n  sio.on('disconnect', bind(this, '_ondisconnect'));\r\n\r\n  this.encoder.on('stream', bind(this, '_onencode'));\r\n  this.decoder.on('stream', bind(this, '_ondecode'));\r\n}\r\n\r\n/**\r\n * Original emit function.\r\n *\r\n * @api private\r\n */\r\nSocket.prototype.$emit = emit;\r\n\r\n/**\r\n * Emits streams to this corresponding server/client.\r\n *\r\n * @return {Socket} self\r\n * @api public\r\n */\r\nSocket.prototype.emit = function(type) {\r\n  if (~exports.events.indexOf(type)) {\r\n    return emit.apply(this, arguments);\r\n  }\r\n  this._stream.apply(this, arguments);\r\n  return this;\r\n};\r\n\r\nSocket.prototype.on = function(type, listener) {\r\n  if (~exports.events.indexOf(type)) {\r\n    return on.apply(this, arguments);\r\n  }\r\n\r\n  this._onstream(type, listener);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Sends a new stream request.\r\n *\r\n * @param {String} event type\r\n * @api private\r\n */\r\nSocket.prototype._stream = function(type) {\r\n  debug('sending new streams');\r\n\r\n  var self = this;\r\n  var args = slice.call(arguments, 1);\r\n  var ack = args[args.length - 1];\r\n  if ('function' == typeof ack) {\r\n    args[args.length - 1] = function() {\r\n      var args = slice.call(arguments);\r\n      args = self.decoder.decode(args);\r\n      ack.apply(this, args);\r\n    };\r\n  }\r\n\r\n  args = this.encoder.encode(args);\r\n  var sio = this.sio;\r\n  sio.emit.apply(sio, [exports.event, type].concat(args));\r\n};\r\n\r\n/**\r\n * Notifies the read event.\r\n *\r\n * @api private\r\n */\r\nSocket.prototype._read = function(id, size) {\r\n  this.sio.emit(exports.event + '-read', id, size);\r\n};\r\n\r\n/**\r\n * Requests to write a chunk.\r\n *\r\n * @api private\r\n */\r\nSocket.prototype._write = function(id, chunk, encoding, callback) {\r\n  if (Buffer.isBuffer(chunk)) {\r\n    if (this.forceBase64) {\r\n      encoding = 'base64';\r\n      chunk = chunk.toString(encoding);\r\n    } else if (!global.Buffer) {\r\n      // socket.io can't handle Buffer when using browserify.\r\n      chunk = chunk.toArrayBuffer();\r\n    }\r\n  }\r\n  this.sio.emit(exports.event + '-write', id, chunk, encoding, callback);\r\n};\r\n\r\nSocket.prototype._end = function(id) {\r\n  this.sio.emit(exports.event + '-end', id);\r\n};\r\n\r\nSocket.prototype._error = function(id, err) {\r\n  this.sio.emit(exports.event + '-error', id, err.message || err);\r\n};\r\n\r\n/**\r\n * Handles a new stream request.\r\n *\r\n * @param {String} event type\r\n * @param {Function} listener\r\n *\r\n * @api private\r\n */\r\nSocket.prototype._onstream = function(type, listener) {\r\n  if ('function' != typeof listener) {\r\n    throw TypeError('listener must be a function');\r\n  }\r\n\r\n  function onstream() {\r\n    debug('new streams');\r\n    var self = this;\r\n    var args = slice.call(arguments);\r\n    var ack = args[args.length - 1];\r\n    if ('function' == typeof ack) {\r\n      args[args.length - 1] = function() {\r\n        var args = slice.call(arguments);\r\n        args = self.encoder.encode(args);\r\n        ack.apply(this, args);\r\n      };\r\n    }\r\n\r\n    args = this.decoder.decode(args);\r\n    listener.apply(this, args);\r\n  }\r\n\r\n  // for removeListener\r\n  onstream.listener = listener;\r\n\r\n  on.call(this, type, onstream);\r\n};\r\n\r\nSocket.prototype._onread = function(id, size) {\r\n  debug('read: \"%s\"', id);\r\n\r\n  var stream = this.streams[id];\r\n  if (stream) {\r\n    stream._onread(size);\r\n  } else {\r\n    this._error(id, 'invalid stream id');\r\n  }\r\n};\r\n\r\nSocket.prototype._onwrite = function(id, chunk, encoding, callback) {\r\n  debug('write: \"%s\"', id);\r\n\r\n  var stream = this.streams[id];\r\n  if (!stream) {\r\n    this._error(id, 'invalid stream id');\r\n    return;\r\n  }\r\n\r\n  if (global.ArrayBuffer && chunk instanceof ArrayBuffer) {\r\n    // make sure that chunk is a buffer for stream\r\n    chunk = new Buffer(new Uint8Array(chunk));\r\n  }\r\n  stream._onwrite(chunk, encoding, callback);\r\n};\r\n\r\nSocket.prototype._onend = function(id) {\r\n  debug('end: \"%s\"', id);\r\n\r\n  var stream = this.streams[id];\r\n  if (!stream) {\r\n    debug('ignore non-existent stream id: \"%s\"', id);\r\n    return;\r\n  }\r\n\r\n  stream._end();\r\n};\r\n\r\nSocket.prototype._onerror = function(id, message) {\r\n  debug('error: \"%s\", \"%s\"', id, message);\r\n\r\n  var stream = this.streams[id];\r\n  if (!stream) {\r\n    debug('invalid stream id: \"%s\"', id);\r\n    return;\r\n  }\r\n\r\n  var err = new Error(message);\r\n  err.remote = true;\r\n  stream.emit('error', err);\r\n};\r\n\r\nSocket.prototype._ondisconnect = function() {\r\n  var stream;\r\n  for (var id in this.streams) {\r\n    stream = this.streams[id];\r\n    stream.destroy();\r\n\r\n    // Close streams when the underlaying\r\n    // socket.io connection is closed (regardless why)\r\n    stream.emit('close');\r\n    stream.emit('error', new Error('Connection aborted'));\r\n  }\r\n};\r\n\r\nSocket.prototype._onencode = function(stream) {\r\n  if (stream.socket || stream.destroyed) {\r\n    throw new Error('stream has already been sent.');\r\n  }\r\n\r\n  var id = stream.id;\r\n  if (this.streams[id]) {\r\n    throw new Error('Encoded stream already exists: ' + id);\r\n  }\r\n\r\n  this.streams[id] = stream;\r\n  stream.socket = this;\r\n};\r\n\r\nSocket.prototype._ondecode = function(stream) {\r\n  var id = stream.id;\r\n  if (this.streams[id]) {\r\n    this._error(id, new Error('Decoded stream already exists: ' + id));\r\n    return;\r\n  }\r\n\r\n  this.streams[id] = stream;\r\n  stream.socket = this;\r\n};\r\n\r\nSocket.prototype.cleanup = function(id) {\r\n  delete this.streams[id];\r\n};\r\n\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {},require(\"buffer\").Buffer)\r\n},{\"./iostream\":4,\"./parser\":5,\"buffer\":9,\"component-bind\":32,\"debug\":33,\"events\":13,\"util\":31}],7:[function(require,module,exports){\r\n// UUID function from https://gist.github.com/jed/982883\r\n// More lightweight than node-uuid\r\nfunction b(\r\n  a                  // placeholder\r\n){\r\n  return a           // if the placeholder was passed, return\r\n    ? (              // a random number from 0 to 15\r\n      a ^            // unless b is 8,\r\n      Math.random()  // in which case\r\n      * 16           // a random number from\r\n      >> a/4         // 8 to 11\r\n      ).toString(16) // in hexadecimal\r\n    : (              // or otherwise a concatenated string:\r\n      [1e7] +        // 10000000 +\r\n      -1e3 +         // -1000 +\r\n      -4e3 +         // -4000 +\r\n      -8e3 +         // -80000000 +\r\n      -1e11          // -100000000000,\r\n      ).replace(     // replacing\r\n        /[018]/g,    // zeroes, ones, and eights with\r\n        b            // random hex digits\r\n      )\r\n}\r\n\r\nmodule.exports = b;\r\n\r\n},{}],8:[function(require,module,exports){\r\n\r\n},{}],9:[function(require,module,exports){\r\n/*!\r\n * The buffer module from node.js, for the browser.\r\n *\r\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\r\n * @license  MIT\r\n */\r\n\r\nvar base64 = require('base64-js')\r\nvar ieee754 = require('ieee754')\r\nvar isArray = require('is-array')\r\n\r\nexports.Buffer = Buffer\r\nexports.SlowBuffer = SlowBuffer\r\nexports.INSPECT_MAX_BYTES = 50\r\nBuffer.poolSize = 8192 // not used by this implementation\r\n\r\nvar kMaxLength = 0x3fffffff\r\nvar rootParent = {}\r\n\r\n/**\r\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\r\n *   === true    Use Uint8Array implementation (fastest)\r\n *   === false   Use Object implementation (most compatible, even IE6)\r\n *\r\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\r\n * Opera 11.6+, iOS 4.2+.\r\n *\r\n * Note:\r\n *\r\n * - Implementation must support adding new properties to `Uint8Array` instances.\r\n *   Firefox 4-29 lacked support, fixed in Firefox 30+.\r\n *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\r\n *\r\n *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\r\n *\r\n *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\r\n *    incorrect length in some situations.\r\n *\r\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will\r\n * get the Object implementation, which is slower but will work correctly.\r\n */\r\nBuffer.TYPED_ARRAY_SUPPORT = (function () {\r\n  try {\r\n    var buf = new ArrayBuffer(0)\r\n    var arr = new Uint8Array(buf)\r\n    arr.foo = function () { return 42 }\r\n    return arr.foo() === 42 && // typed array instances can be augmented\r\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\r\n        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\r\n  } catch (e) {\r\n    return false\r\n  }\r\n})()\r\n\r\n/**\r\n * Class: Buffer\r\n * =============\r\n *\r\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\r\n * with function properties for all the node `Buffer` API functions. We use\r\n * `Uint8Array` so that square bracket notation works as expected -- it returns\r\n * a single octet.\r\n *\r\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\r\n * prototype.\r\n */\r\nfunction Buffer (arg) {\r\n  if (!(this instanceof Buffer)) {\r\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\r\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\r\n    return new Buffer(arg)\r\n  }\r\n\r\n  this.length = 0\r\n  this.parent = undefined\r\n\r\n  // Common case.\r\n  if (typeof arg === 'number') {\r\n    return fromNumber(this, arg)\r\n  }\r\n\r\n  // Slightly less common case.\r\n  if (typeof arg === 'string') {\r\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\r\n  }\r\n\r\n  // Unusual.\r\n  return fromObject(this, arg)\r\n}\r\n\r\nfunction fromNumber (that, length) {\r\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\r\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\r\n    for (var i = 0; i < length; i++) {\r\n      that[i] = 0\r\n    }\r\n  }\r\n  return that\r\n}\r\n\r\nfunction fromString (that, string, encoding) {\r\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\r\n\r\n  // Assumption: byteLength() return value is always < kMaxLength.\r\n  var length = byteLength(string, encoding) | 0\r\n  that = allocate(that, length)\r\n\r\n  that.write(string, encoding) | 0\r\n  return that\r\n}\r\n\r\nfunction fromObject (that, object) {\r\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\r\n\r\n  if (isArray(object)) return fromArray(that, object)\r\n\r\n  if (object == null) {\r\n    throw new TypeError('must start with number, buffer, array or string')\r\n  }\r\n\r\n  if (typeof ArrayBuffer !== 'undefined' && object.buffer instanceof ArrayBuffer) {\r\n    return fromTypedArray(that, object)\r\n  }\r\n\r\n  if (object.length) return fromArrayLike(that, object)\r\n\r\n  return fromJsonObject(that, object)\r\n}\r\n\r\nfunction fromBuffer (that, buffer) {\r\n  var length = checked(buffer.length) | 0\r\n  that = allocate(that, length)\r\n  buffer.copy(that, 0, 0, length)\r\n  return that\r\n}\r\n\r\nfunction fromArray (that, array) {\r\n  var length = checked(array.length) | 0\r\n  that = allocate(that, length)\r\n  for (var i = 0; i < length; i += 1) {\r\n    that[i] = array[i] & 255\r\n  }\r\n  return that\r\n}\r\n\r\n// Duplicate of fromArray() to keep fromArray() monomorphic.\r\nfunction fromTypedArray (that, array) {\r\n  var length = checked(array.length) | 0\r\n  that = allocate(that, length)\r\n  // Truncating the elements is probably not what people expect from typed\r\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\r\n  // of the old Buffer constructor.\r\n  for (var i = 0; i < length; i += 1) {\r\n    that[i] = array[i] & 255\r\n  }\r\n  return that\r\n}\r\n\r\nfunction fromArrayLike (that, array) {\r\n  var length = checked(array.length) | 0\r\n  that = allocate(that, length)\r\n  for (var i = 0; i < length; i += 1) {\r\n    that[i] = array[i] & 255\r\n  }\r\n  return that\r\n}\r\n\r\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\r\n// Returns a zero-length buffer for inputs that don't conform to the spec.\r\nfunction fromJsonObject (that, object) {\r\n  var array\r\n  var length = 0\r\n\r\n  if (object.type === 'Buffer' && isArray(object.data)) {\r\n    array = object.data\r\n    length = checked(array.length) | 0\r\n  }\r\n  that = allocate(that, length)\r\n\r\n  for (var i = 0; i < length; i += 1) {\r\n    that[i] = array[i] & 255\r\n  }\r\n  return that\r\n}\r\n\r\nfunction allocate (that, length) {\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    // Return an augmented `Uint8Array` instance, for best performance\r\n    that = Buffer._augment(new Uint8Array(length))\r\n  } else {\r\n    // Fallback: Return an object instance of the Buffer class\r\n    that.length = length\r\n    that._isBuffer = true\r\n  }\r\n\r\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\r\n  if (fromPool) that.parent = rootParent\r\n\r\n  return that\r\n}\r\n\r\nfunction checked (length) {\r\n  // Note: cannot use `length < kMaxLength` here because that fails when\r\n  // length is NaN (which is otherwise coerced to zero.)\r\n  if (length >= kMaxLength) {\r\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\r\n                         'size: 0x' + kMaxLength.toString(16) + ' bytes')\r\n  }\r\n  return length >>> 0\r\n}\r\n\r\nfunction SlowBuffer (subject, encoding) {\r\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\r\n\r\n  var buf = new Buffer(subject, encoding)\r\n  delete buf.parent\r\n  return buf\r\n}\r\n\r\nBuffer.isBuffer = function isBuffer (b) {\r\n  return !!(b != null && b._isBuffer)\r\n}\r\n\r\nBuffer.compare = function compare (a, b) {\r\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\r\n    throw new TypeError('Arguments must be Buffers')\r\n  }\r\n\r\n  if (a === b) return 0\r\n\r\n  var x = a.length\r\n  var y = b.length\r\n  for (var i = 0, len = Math.min(x, y); i < len && a[i] === b[i]; i++) {}\r\n  if (i !== len) {\r\n    x = a[i]\r\n    y = b[i]\r\n  }\r\n  if (x < y) return -1\r\n  if (y < x) return 1\r\n  return 0\r\n}\r\n\r\nBuffer.isEncoding = function isEncoding (encoding) {\r\n  switch (String(encoding).toLowerCase()) {\r\n    case 'hex':\r\n    case 'utf8':\r\n    case 'utf-8':\r\n    case 'ascii':\r\n    case 'binary':\r\n    case 'base64':\r\n    case 'raw':\r\n    case 'ucs2':\r\n    case 'ucs-2':\r\n    case 'utf16le':\r\n    case 'utf-16le':\r\n      return true\r\n    default:\r\n      return false\r\n  }\r\n}\r\n\r\nBuffer.concat = function concat (list, length) {\r\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\r\n\r\n  if (list.length === 0) {\r\n    return new Buffer(0)\r\n  } else if (list.length === 1) {\r\n    return list[0]\r\n  }\r\n\r\n  var i\r\n  if (length === undefined) {\r\n    length = 0\r\n    for (i = 0; i < list.length; i++) {\r\n      length += list[i].length\r\n    }\r\n  }\r\n\r\n  var buf = new Buffer(length)\r\n  var pos = 0\r\n  for (i = 0; i < list.length; i++) {\r\n    var item = list[i]\r\n    item.copy(buf, pos)\r\n    pos += item.length\r\n  }\r\n  return buf\r\n}\r\n\r\nfunction byteLength (string, encoding) {\r\n  if (typeof string !== 'string') string = String(string)\r\n\r\n  if (string.length === 0) return 0\r\n\r\n  switch (encoding || 'utf8') {\r\n    case 'ascii':\r\n    case 'binary':\r\n    case 'raw':\r\n      return string.length\r\n    case 'ucs2':\r\n    case 'ucs-2':\r\n    case 'utf16le':\r\n    case 'utf-16le':\r\n      return string.length * 2\r\n    case 'hex':\r\n      return string.length >>> 1\r\n    case 'utf8':\r\n    case 'utf-8':\r\n      return utf8ToBytes(string).length\r\n    case 'base64':\r\n      return base64ToBytes(string).length\r\n    default:\r\n      return string.length\r\n  }\r\n}\r\nBuffer.byteLength = byteLength\r\n\r\n// pre-set for values that may exist in the future\r\nBuffer.prototype.length = undefined\r\nBuffer.prototype.parent = undefined\r\n\r\n// toString(encoding, start=0, end=buffer.length)\r\nBuffer.prototype.toString = function toString (encoding, start, end) {\r\n  var loweredCase = false\r\n\r\n  start = start >>> 0\r\n  end = end === undefined || end === Infinity ? this.length : end >>> 0\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n  if (start < 0) start = 0\r\n  if (end > this.length) end = this.length\r\n  if (end <= start) return ''\r\n\r\n  while (true) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexSlice(this, start, end)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Slice(this, start, end)\r\n\r\n      case 'ascii':\r\n        return asciiSlice(this, start, end)\r\n\r\n      case 'binary':\r\n        return binarySlice(this, start, end)\r\n\r\n      case 'base64':\r\n        return base64Slice(this, start, end)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return utf16leSlice(this, start, end)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = (encoding + '').toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\nBuffer.prototype.equals = function equals (b) {\r\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\r\n  if (this === b) return true\r\n  return Buffer.compare(this, b) === 0\r\n}\r\n\r\nBuffer.prototype.inspect = function inspect () {\r\n  var str = ''\r\n  var max = exports.INSPECT_MAX_BYTES\r\n  if (this.length > 0) {\r\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\r\n    if (this.length > max) str += ' ... '\r\n  }\r\n  return '<Buffer ' + str + '>'\r\n}\r\n\r\nBuffer.prototype.compare = function compare (b) {\r\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\r\n  if (this === b) return 0\r\n  return Buffer.compare(this, b)\r\n}\r\n\r\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\r\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\r\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\r\n  byteOffset >>= 0\r\n\r\n  if (this.length === 0) return -1\r\n  if (byteOffset >= this.length) return -1\r\n\r\n  // Negative offsets start from the end of the buffer\r\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\r\n\r\n  if (typeof val === 'string') {\r\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\r\n    return String.prototype.indexOf.call(this, val, byteOffset)\r\n  }\r\n  if (Buffer.isBuffer(val)) {\r\n    return arrayIndexOf(this, val, byteOffset)\r\n  }\r\n  if (typeof val === 'number') {\r\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\r\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\r\n    }\r\n    return arrayIndexOf(this, [ val ], byteOffset)\r\n  }\r\n\r\n  function arrayIndexOf (arr, val, byteOffset) {\r\n    var foundIndex = -1\r\n    for (var i = 0; byteOffset + i < arr.length; i++) {\r\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\r\n        if (foundIndex === -1) foundIndex = i\r\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\r\n      } else {\r\n        foundIndex = -1\r\n      }\r\n    }\r\n    return -1\r\n  }\r\n\r\n  throw new TypeError('val must be string, number or Buffer')\r\n}\r\n\r\n// `get` will be removed in Node 0.13+\r\nBuffer.prototype.get = function get (offset) {\r\n  console.log('.get() is deprecated. Access using array indexes instead.')\r\n  return this.readUInt8(offset)\r\n}\r\n\r\n// `set` will be removed in Node 0.13+\r\nBuffer.prototype.set = function set (v, offset) {\r\n  console.log('.set() is deprecated. Access using array indexes instead.')\r\n  return this.writeUInt8(v, offset)\r\n}\r\n\r\nfunction hexWrite (buf, string, offset, length) {\r\n  offset = Number(offset) || 0\r\n  var remaining = buf.length - offset\r\n  if (!length) {\r\n    length = remaining\r\n  } else {\r\n    length = Number(length)\r\n    if (length > remaining) {\r\n      length = remaining\r\n    }\r\n  }\r\n\r\n  // must be an even number of digits\r\n  var strLen = string.length\r\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\r\n\r\n  if (length > strLen / 2) {\r\n    length = strLen / 2\r\n  }\r\n  for (var i = 0; i < length; i++) {\r\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\r\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\r\n    buf[offset + i] = parsed\r\n  }\r\n  return i\r\n}\r\n\r\nfunction utf8Write (buf, string, offset, length) {\r\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nfunction asciiWrite (buf, string, offset, length) {\r\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction binaryWrite (buf, string, offset, length) {\r\n  return asciiWrite(buf, string, offset, length)\r\n}\r\n\r\nfunction base64Write (buf, string, offset, length) {\r\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction ucs2Write (buf, string, offset, length) {\r\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nBuffer.prototype.write = function write (string, offset, length, encoding) {\r\n  // Buffer#write(string)\r\n  if (offset === undefined) {\r\n    encoding = 'utf8'\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, encoding)\r\n  } else if (length === undefined && typeof offset === 'string') {\r\n    encoding = offset\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, offset[, length][, encoding])\r\n  } else if (isFinite(offset)) {\r\n    offset = offset >>> 0\r\n    if (isFinite(length)) {\r\n      length = length >>> 0\r\n      if (encoding === undefined) encoding = 'utf8'\r\n    } else {\r\n      encoding = length\r\n      length = undefined\r\n    }\r\n  // legacy write(string, encoding, offset, length) - remove in v0.13\r\n  } else {\r\n    var swap = encoding\r\n    encoding = offset\r\n    offset = length >>> 0\r\n    length = swap\r\n  }\r\n\r\n  var remaining = this.length - offset\r\n  if (length === undefined || length > remaining) length = remaining\r\n\r\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\r\n    throw new RangeError('attempt to write outside buffer bounds')\r\n  }\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n\r\n  var loweredCase = false\r\n  for (;;) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexWrite(this, string, offset, length)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Write(this, string, offset, length)\r\n\r\n      case 'ascii':\r\n        return asciiWrite(this, string, offset, length)\r\n\r\n      case 'binary':\r\n        return binaryWrite(this, string, offset, length)\r\n\r\n      case 'base64':\r\n        // Warning: maxLength not taken into account in base64Write\r\n        return base64Write(this, string, offset, length)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return ucs2Write(this, string, offset, length)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = ('' + encoding).toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\nBuffer.prototype.toJSON = function toJSON () {\r\n  return {\r\n    type: 'Buffer',\r\n    data: Array.prototype.slice.call(this._arr || this, 0)\r\n  }\r\n}\r\n\r\nfunction base64Slice (buf, start, end) {\r\n  if (start === 0 && end === buf.length) {\r\n    return base64.fromByteArray(buf)\r\n  } else {\r\n    return base64.fromByteArray(buf.slice(start, end))\r\n  }\r\n}\r\n\r\nfunction utf8Slice (buf, start, end) {\r\n  var res = ''\r\n  var tmp = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; i++) {\r\n    if (buf[i] <= 0x7F) {\r\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\r\n      tmp = ''\r\n    } else {\r\n      tmp += '%' + buf[i].toString(16)\r\n    }\r\n  }\r\n\r\n  return res + decodeUtf8Char(tmp)\r\n}\r\n\r\nfunction asciiSlice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; i++) {\r\n    ret += String.fromCharCode(buf[i] & 0x7F)\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction binarySlice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; i++) {\r\n    ret += String.fromCharCode(buf[i])\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction hexSlice (buf, start, end) {\r\n  var len = buf.length\r\n\r\n  if (!start || start < 0) start = 0\r\n  if (!end || end < 0 || end > len) end = len\r\n\r\n  var out = ''\r\n  for (var i = start; i < end; i++) {\r\n    out += toHex(buf[i])\r\n  }\r\n  return out\r\n}\r\n\r\nfunction utf16leSlice (buf, start, end) {\r\n  var bytes = buf.slice(start, end)\r\n  var res = ''\r\n  for (var i = 0; i < bytes.length; i += 2) {\r\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\r\n  }\r\n  return res\r\n}\r\n\r\nBuffer.prototype.slice = function slice (start, end) {\r\n  var len = this.length\r\n  start = ~~start\r\n  end = end === undefined ? len : ~~end\r\n\r\n  if (start < 0) {\r\n    start += len\r\n    if (start < 0) start = 0\r\n  } else if (start > len) {\r\n    start = len\r\n  }\r\n\r\n  if (end < 0) {\r\n    end += len\r\n    if (end < 0) end = 0\r\n  } else if (end > len) {\r\n    end = len\r\n  }\r\n\r\n  if (end < start) end = start\r\n\r\n  var newBuf\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    newBuf = Buffer._augment(this.subarray(start, end))\r\n  } else {\r\n    var sliceLen = end - start\r\n    newBuf = new Buffer(sliceLen, undefined)\r\n    for (var i = 0; i < sliceLen; i++) {\r\n      newBuf[i] = this[i + start]\r\n    }\r\n  }\r\n\r\n  if (newBuf.length) newBuf.parent = this.parent || this\r\n\r\n  return newBuf\r\n}\r\n\r\n/*\r\n * Need to make sure that buffer isn't trying to write out of bounds.\r\n */\r\nfunction checkOffset (offset, ext, length) {\r\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\r\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\r\n}\r\n\r\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    checkOffset(offset, byteLength, this.length)\r\n  }\r\n\r\n  var val = this[offset + --byteLength]\r\n  var mul = 1\r\n  while (byteLength > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --byteLength] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  return this[offset]\r\n}\r\n\r\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return this[offset] | (this[offset + 1] << 8)\r\n}\r\n\r\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return (this[offset] << 8) | this[offset + 1]\r\n}\r\n\r\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return ((this[offset]) |\r\n      (this[offset + 1] << 8) |\r\n      (this[offset + 2] << 16)) +\r\n      (this[offset + 3] * 0x1000000)\r\n}\r\n\r\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] * 0x1000000) +\r\n    ((this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var i = byteLength\r\n  var mul = 1\r\n  var val = this[offset + --i]\r\n  while (i > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  if (!(this[offset] & 0x80)) return (this[offset])\r\n  return ((0xff - this[offset] + 1) * -1)\r\n}\r\n\r\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset] | (this[offset + 1] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset + 1] | (this[offset] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset]) |\r\n    (this[offset + 1] << 8) |\r\n    (this[offset + 2] << 16) |\r\n    (this[offset + 3] << 24)\r\n}\r\n\r\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] << 24) |\r\n    (this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    (this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, true, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, false, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, true, 52, 8)\r\n}\r\n\r\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, false, 52, 8)\r\n}\r\n\r\nfunction checkInt (buf, value, offset, ext, max, min) {\r\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\r\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\r\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\r\n}\r\n\r\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\r\n\r\n  var mul = 1\r\n  var i = 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) >>> 0 & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) >>> 0 & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\r\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\r\n  this[offset] = value\r\n  return offset + 1\r\n}\r\n\r\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\r\n  if (value < 0) value = 0xffff + value + 1\r\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\r\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\r\n      (littleEndian ? i : 1 - i) * 8\r\n  }\r\n}\r\n\r\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = value\r\n    this[offset + 1] = (value >>> 8)\r\n  } else {\r\n    objectWriteUInt16(this, value, offset, true)\r\n  }\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = (value >>> 8)\r\n    this[offset + 1] = value\r\n  } else {\r\n    objectWriteUInt16(this, value, offset, false)\r\n  }\r\n  return offset + 2\r\n}\r\n\r\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\r\n  if (value < 0) value = 0xffffffff + value + 1\r\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\r\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\r\n  }\r\n}\r\n\r\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset + 3] = (value >>> 24)\r\n    this[offset + 2] = (value >>> 16)\r\n    this[offset + 1] = (value >>> 8)\r\n    this[offset] = value\r\n  } else {\r\n    objectWriteUInt32(this, value, offset, true)\r\n  }\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = (value >>> 24)\r\n    this[offset + 1] = (value >>> 16)\r\n    this[offset + 2] = (value >>> 8)\r\n    this[offset + 3] = value\r\n  } else {\r\n    objectWriteUInt32(this, value, offset, false)\r\n  }\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkInt(\r\n      this, value, offset, byteLength,\r\n      Math.pow(2, 8 * byteLength - 1) - 1,\r\n      -Math.pow(2, 8 * byteLength - 1)\r\n    )\r\n  }\r\n\r\n  var i = 0\r\n  var mul = 1\r\n  var sub = value < 0 ? 1 : 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkInt(\r\n      this, value, offset, byteLength,\r\n      Math.pow(2, 8 * byteLength - 1) - 1,\r\n      -Math.pow(2, 8 * byteLength - 1)\r\n    )\r\n  }\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  var sub = value < 0 ? 1 : 0\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\r\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\r\n  if (value < 0) value = 0xff + value + 1\r\n  this[offset] = value\r\n  return offset + 1\r\n}\r\n\r\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = value\r\n    this[offset + 1] = (value >>> 8)\r\n  } else {\r\n    objectWriteUInt16(this, value, offset, true)\r\n  }\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = (value >>> 8)\r\n    this[offset + 1] = value\r\n  } else {\r\n    objectWriteUInt16(this, value, offset, false)\r\n  }\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = value\r\n    this[offset + 1] = (value >>> 8)\r\n    this[offset + 2] = (value >>> 16)\r\n    this[offset + 3] = (value >>> 24)\r\n  } else {\r\n    objectWriteUInt32(this, value, offset, true)\r\n  }\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  if (value < 0) value = 0xffffffff + value + 1\r\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n    this[offset] = (value >>> 24)\r\n    this[offset + 1] = (value >>> 16)\r\n    this[offset + 2] = (value >>> 8)\r\n    this[offset + 3] = value\r\n  } else {\r\n    objectWriteUInt32(this, value, offset, false)\r\n  }\r\n  return offset + 4\r\n}\r\n\r\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\r\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\r\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\r\n  if (offset < 0) throw new RangeError('index out of range')\r\n}\r\n\r\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, false, noAssert)\r\n}\r\n\r\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\r\n  return offset + 8\r\n}\r\n\r\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, false, noAssert)\r\n}\r\n\r\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\r\nBuffer.prototype.copy = function copy (target, target_start, start, end) {\r\n  if (!start) start = 0\r\n  if (!end && end !== 0) end = this.length\r\n  if (target_start >= target.length) target_start = target.length\r\n  if (!target_start) target_start = 0\r\n  if (end > 0 && end < start) end = start\r\n\r\n  // Copy 0 bytes; we're done\r\n  if (end === start) return 0\r\n  if (target.length === 0 || this.length === 0) return 0\r\n\r\n  // Fatal error conditions\r\n  if (target_start < 0) {\r\n    throw new RangeError('targetStart out of bounds')\r\n  }\r\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\r\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\r\n\r\n  // Are we oob?\r\n  if (end > this.length) end = this.length\r\n  if (target.length - target_start < end - start) {\r\n    end = target.length - target_start + start\r\n  }\r\n\r\n  var len = end - start\r\n\r\n  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\r\n    for (var i = 0; i < len; i++) {\r\n      target[i + target_start] = this[i + start]\r\n    }\r\n  } else {\r\n    target._set(this.subarray(start, start + len), target_start)\r\n  }\r\n\r\n  return len\r\n}\r\n\r\n// fill(value, start=0, end=buffer.length)\r\nBuffer.prototype.fill = function fill (value, start, end) {\r\n  if (!value) value = 0\r\n  if (!start) start = 0\r\n  if (!end) end = this.length\r\n\r\n  if (end < start) throw new RangeError('end < start')\r\n\r\n  // Fill 0 bytes; we're done\r\n  if (end === start) return\r\n  if (this.length === 0) return\r\n\r\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\r\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\r\n\r\n  var i\r\n  if (typeof value === 'number') {\r\n    for (i = start; i < end; i++) {\r\n      this[i] = value\r\n    }\r\n  } else {\r\n    var bytes = utf8ToBytes(value.toString())\r\n    var len = bytes.length\r\n    for (i = start; i < end; i++) {\r\n      this[i] = bytes[i % len]\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n/**\r\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\r\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\r\n */\r\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\r\n  if (typeof Uint8Array !== 'undefined') {\r\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n      return (new Buffer(this)).buffer\r\n    } else {\r\n      var buf = new Uint8Array(this.length)\r\n      for (var i = 0, len = buf.length; i < len; i += 1) {\r\n        buf[i] = this[i]\r\n      }\r\n      return buf.buffer\r\n    }\r\n  } else {\r\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\r\n  }\r\n}\r\n\r\n// HELPER FUNCTIONS\r\n// ================\r\n\r\nvar BP = Buffer.prototype\r\n\r\n/**\r\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\r\n */\r\nBuffer._augment = function _augment (arr) {\r\n  arr.constructor = Buffer\r\n  arr._isBuffer = true\r\n\r\n  // save reference to original Uint8Array set method before overwriting\r\n  arr._set = arr.set\r\n\r\n  // deprecated, will be removed in node 0.13+\r\n  arr.get = BP.get\r\n  arr.set = BP.set\r\n\r\n  arr.write = BP.write\r\n  arr.toString = BP.toString\r\n  arr.toLocaleString = BP.toString\r\n  arr.toJSON = BP.toJSON\r\n  arr.equals = BP.equals\r\n  arr.compare = BP.compare\r\n  arr.indexOf = BP.indexOf\r\n  arr.copy = BP.copy\r\n  arr.slice = BP.slice\r\n  arr.readUIntLE = BP.readUIntLE\r\n  arr.readUIntBE = BP.readUIntBE\r\n  arr.readUInt8 = BP.readUInt8\r\n  arr.readUInt16LE = BP.readUInt16LE\r\n  arr.readUInt16BE = BP.readUInt16BE\r\n  arr.readUInt32LE = BP.readUInt32LE\r\n  arr.readUInt32BE = BP.readUInt32BE\r\n  arr.readIntLE = BP.readIntLE\r\n  arr.readIntBE = BP.readIntBE\r\n  arr.readInt8 = BP.readInt8\r\n  arr.readInt16LE = BP.readInt16LE\r\n  arr.readInt16BE = BP.readInt16BE\r\n  arr.readInt32LE = BP.readInt32LE\r\n  arr.readInt32BE = BP.readInt32BE\r\n  arr.readFloatLE = BP.readFloatLE\r\n  arr.readFloatBE = BP.readFloatBE\r\n  arr.readDoubleLE = BP.readDoubleLE\r\n  arr.readDoubleBE = BP.readDoubleBE\r\n  arr.writeUInt8 = BP.writeUInt8\r\n  arr.writeUIntLE = BP.writeUIntLE\r\n  arr.writeUIntBE = BP.writeUIntBE\r\n  arr.writeUInt16LE = BP.writeUInt16LE\r\n  arr.writeUInt16BE = BP.writeUInt16BE\r\n  arr.writeUInt32LE = BP.writeUInt32LE\r\n  arr.writeUInt32BE = BP.writeUInt32BE\r\n  arr.writeIntLE = BP.writeIntLE\r\n  arr.writeIntBE = BP.writeIntBE\r\n  arr.writeInt8 = BP.writeInt8\r\n  arr.writeInt16LE = BP.writeInt16LE\r\n  arr.writeInt16BE = BP.writeInt16BE\r\n  arr.writeInt32LE = BP.writeInt32LE\r\n  arr.writeInt32BE = BP.writeInt32BE\r\n  arr.writeFloatLE = BP.writeFloatLE\r\n  arr.writeFloatBE = BP.writeFloatBE\r\n  arr.writeDoubleLE = BP.writeDoubleLE\r\n  arr.writeDoubleBE = BP.writeDoubleBE\r\n  arr.fill = BP.fill\r\n  arr.inspect = BP.inspect\r\n  arr.toArrayBuffer = BP.toArrayBuffer\r\n\r\n  return arr\r\n}\r\n\r\nvar INVALID_BASE64_RE = /[^+\\/0-9A-z\\-]/g\r\n\r\nfunction base64clean (str) {\r\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\r\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\r\n  // Node converts strings with length < 2 to ''\r\n  if (str.length < 2) return ''\r\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\r\n  while (str.length % 4 !== 0) {\r\n    str = str + '='\r\n  }\r\n  return str\r\n}\r\n\r\nfunction stringtrim (str) {\r\n  if (str.trim) return str.trim()\r\n  return str.replace(/^\\s+|\\s+$/g, '')\r\n}\r\n\r\nfunction toHex (n) {\r\n  if (n < 16) return '0' + n.toString(16)\r\n  return n.toString(16)\r\n}\r\n\r\nfunction utf8ToBytes (string, units) {\r\n  units = units || Infinity\r\n  var codePoint\r\n  var length = string.length\r\n  var leadSurrogate = null\r\n  var bytes = []\r\n  var i = 0\r\n\r\n  for (; i < length; i++) {\r\n    codePoint = string.charCodeAt(i)\r\n\r\n    // is surrogate component\r\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\r\n      // last char was a lead\r\n      if (leadSurrogate) {\r\n        // 2 leads in a row\r\n        if (codePoint < 0xDC00) {\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          leadSurrogate = codePoint\r\n          continue\r\n        } else {\r\n          // valid surrogate pair\r\n          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000\r\n          leadSurrogate = null\r\n        }\r\n      } else {\r\n        // no lead yet\r\n\r\n        if (codePoint > 0xDBFF) {\r\n          // unexpected trail\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        } else if (i + 1 === length) {\r\n          // unpaired lead\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        } else {\r\n          // valid lead\r\n          leadSurrogate = codePoint\r\n          continue\r\n        }\r\n      }\r\n    } else if (leadSurrogate) {\r\n      // valid bmp char, but last char was a lead\r\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n      leadSurrogate = null\r\n    }\r\n\r\n    // encode utf8\r\n    if (codePoint < 0x80) {\r\n      if ((units -= 1) < 0) break\r\n      bytes.push(codePoint)\r\n    } else if (codePoint < 0x800) {\r\n      if ((units -= 2) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x6 | 0xC0,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x10000) {\r\n      if ((units -= 3) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0xC | 0xE0,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x200000) {\r\n      if ((units -= 4) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x12 | 0xF0,\r\n        codePoint >> 0xC & 0x3F | 0x80,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else {\r\n      throw new Error('Invalid code point')\r\n    }\r\n  }\r\n\r\n  return bytes\r\n}\r\n\r\nfunction asciiToBytes (str) {\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; i++) {\r\n    // Node's code seems to be doing this and not & 0x7F..\r\n    byteArray.push(str.charCodeAt(i) & 0xFF)\r\n  }\r\n  return byteArray\r\n}\r\n\r\nfunction utf16leToBytes (str, units) {\r\n  var c, hi, lo\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; i++) {\r\n    if ((units -= 2) < 0) break\r\n\r\n    c = str.charCodeAt(i)\r\n    hi = c >> 8\r\n    lo = c % 256\r\n    byteArray.push(lo)\r\n    byteArray.push(hi)\r\n  }\r\n\r\n  return byteArray\r\n}\r\n\r\nfunction base64ToBytes (str) {\r\n  return base64.toByteArray(base64clean(str))\r\n}\r\n\r\nfunction blitBuffer (src, dst, offset, length) {\r\n  for (var i = 0; i < length; i++) {\r\n    if ((i + offset >= dst.length) || (i >= src.length)) break\r\n    dst[i + offset] = src[i]\r\n  }\r\n  return i\r\n}\r\n\r\nfunction decodeUtf8Char (str) {\r\n  try {\r\n    return decodeURIComponent(str)\r\n  } catch (err) {\r\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\r\n  }\r\n}\r\n\r\n},{\"base64-js\":10,\"ieee754\":11,\"is-array\":12}],10:[function(require,module,exports){\r\nvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n;(function (exports) {\r\n\t'use strict';\r\n\r\n  var Arr = (typeof Uint8Array !== 'undefined')\r\n    ? Uint8Array\r\n    : Array\r\n\r\n\tvar PLUS   = '+'.charCodeAt(0)\r\n\tvar SLASH  = '/'.charCodeAt(0)\r\n\tvar NUMBER = '0'.charCodeAt(0)\r\n\tvar LOWER  = 'a'.charCodeAt(0)\r\n\tvar UPPER  = 'A'.charCodeAt(0)\r\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\r\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\r\n\r\n\tfunction decode (elt) {\r\n\t\tvar code = elt.charCodeAt(0)\r\n\t\tif (code === PLUS ||\r\n\t\t    code === PLUS_URL_SAFE)\r\n\t\t\treturn 62 // '+'\r\n\t\tif (code === SLASH ||\r\n\t\t    code === SLASH_URL_SAFE)\r\n\t\t\treturn 63 // '/'\r\n\t\tif (code < NUMBER)\r\n\t\t\treturn -1 //no match\r\n\t\tif (code < NUMBER + 10)\r\n\t\t\treturn code - NUMBER + 26 + 26\r\n\t\tif (code < UPPER + 26)\r\n\t\t\treturn code - UPPER\r\n\t\tif (code < LOWER + 26)\r\n\t\t\treturn code - LOWER + 26\r\n\t}\r\n\r\n\tfunction b64ToByteArray (b64) {\r\n\t\tvar i, j, l, tmp, placeHolders, arr\r\n\r\n\t\tif (b64.length % 4 > 0) {\r\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\r\n\t\t}\r\n\r\n\t\t// the number of equal signs (place holders)\r\n\t\t// if there are two placeholders, than the two characters before it\r\n\t\t// represent one byte\r\n\t\t// if there is only one, then the three characters before it represent 2 bytes\r\n\t\t// this is just a cheap hack to not do indexOf twice\r\n\t\tvar len = b64.length\r\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\r\n\r\n\t\t// base64 is 4/3 + up to two characters of the original data\r\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\r\n\r\n\t\t// if there are placeholders, only get up to the last complete 4 chars\r\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\r\n\r\n\t\tvar L = 0\r\n\r\n\t\tfunction push (v) {\r\n\t\t\tarr[L++] = v\r\n\t\t}\r\n\r\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\r\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\r\n\t\t\tpush((tmp & 0xFF0000) >> 16)\r\n\t\t\tpush((tmp & 0xFF00) >> 8)\r\n\t\t\tpush(tmp & 0xFF)\r\n\t\t}\r\n\r\n\t\tif (placeHolders === 2) {\r\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\r\n\t\t\tpush(tmp & 0xFF)\r\n\t\t} else if (placeHolders === 1) {\r\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\r\n\t\t\tpush((tmp >> 8) & 0xFF)\r\n\t\t\tpush(tmp & 0xFF)\r\n\t\t}\r\n\r\n\t\treturn arr\r\n\t}\r\n\r\n\tfunction uint8ToBase64 (uint8) {\r\n\t\tvar i,\r\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\r\n\t\t\toutput = \"\",\r\n\t\t\ttemp, length\r\n\r\n\t\tfunction encode (num) {\r\n\t\t\treturn lookup.charAt(num)\r\n\t\t}\r\n\r\n\t\tfunction tripletToBase64 (num) {\r\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\r\n\t\t}\r\n\r\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\r\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\r\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\r\n\t\t\toutput += tripletToBase64(temp)\r\n\t\t}\r\n\r\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\r\n\t\tswitch (extraBytes) {\r\n\t\t\tcase 1:\r\n\t\t\t\ttemp = uint8[uint8.length - 1]\r\n\t\t\t\toutput += encode(temp >> 2)\r\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\r\n\t\t\t\toutput += '=='\r\n\t\t\t\tbreak\r\n\t\t\tcase 2:\r\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\r\n\t\t\t\toutput += encode(temp >> 10)\r\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\r\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\r\n\t\t\t\toutput += '='\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn output\r\n\t}\r\n\r\n\texports.toByteArray = b64ToByteArray\r\n\texports.fromByteArray = uint8ToBase64\r\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\r\n\r\n},{}],11:[function(require,module,exports){\r\nexports.read = function(buffer, offset, isLE, mLen, nBytes) {\r\n  var e, m,\r\n      eLen = nBytes * 8 - mLen - 1,\r\n      eMax = (1 << eLen) - 1,\r\n      eBias = eMax >> 1,\r\n      nBits = -7,\r\n      i = isLE ? (nBytes - 1) : 0,\r\n      d = isLE ? -1 : 1,\r\n      s = buffer[offset + i];\r\n\r\n  i += d;\r\n\r\n  e = s & ((1 << (-nBits)) - 1);\r\n  s >>= (-nBits);\r\n  nBits += eLen;\r\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);\r\n\r\n  m = e & ((1 << (-nBits)) - 1);\r\n  e >>= (-nBits);\r\n  nBits += mLen;\r\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);\r\n\r\n  if (e === 0) {\r\n    e = 1 - eBias;\r\n  } else if (e === eMax) {\r\n    return m ? NaN : ((s ? -1 : 1) * Infinity);\r\n  } else {\r\n    m = m + Math.pow(2, mLen);\r\n    e = e - eBias;\r\n  }\r\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\r\n};\r\n\r\nexports.write = function(buffer, value, offset, isLE, mLen, nBytes) {\r\n  var e, m, c,\r\n      eLen = nBytes * 8 - mLen - 1,\r\n      eMax = (1 << eLen) - 1,\r\n      eBias = eMax >> 1,\r\n      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),\r\n      i = isLE ? 0 : (nBytes - 1),\r\n      d = isLE ? 1 : -1,\r\n      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\r\n\r\n  value = Math.abs(value);\r\n\r\n  if (isNaN(value) || value === Infinity) {\r\n    m = isNaN(value) ? 1 : 0;\r\n    e = eMax;\r\n  } else {\r\n    e = Math.floor(Math.log(value) / Math.LN2);\r\n    if (value * (c = Math.pow(2, -e)) < 1) {\r\n      e--;\r\n      c *= 2;\r\n    }\r\n    if (e + eBias >= 1) {\r\n      value += rt / c;\r\n    } else {\r\n      value += rt * Math.pow(2, 1 - eBias);\r\n    }\r\n    if (value * c >= 2) {\r\n      e++;\r\n      c /= 2;\r\n    }\r\n\r\n    if (e + eBias >= eMax) {\r\n      m = 0;\r\n      e = eMax;\r\n    } else if (e + eBias >= 1) {\r\n      m = (value * c - 1) * Math.pow(2, mLen);\r\n      e = e + eBias;\r\n    } else {\r\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\r\n      e = 0;\r\n    }\r\n  }\r\n\r\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);\r\n\r\n  e = (e << mLen) | m;\r\n  eLen += mLen;\r\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);\r\n\r\n  buffer[offset + i - d] |= s * 128;\r\n};\r\n\r\n},{}],12:[function(require,module,exports){\r\n\r\n/**\r\n * isArray\r\n */\r\n\r\nvar isArray = Array.isArray;\r\n\r\n/**\r\n * toString\r\n */\r\n\r\nvar str = Object.prototype.toString;\r\n\r\n/**\r\n * Whether or not the given `val`\r\n * is an array.\r\n *\r\n * example:\r\n *\r\n *        isArray([]);\r\n *        // > true\r\n *        isArray(arguments);\r\n *        // > false\r\n *        isArray('');\r\n *        // > false\r\n *\r\n * @param {mixed} val\r\n * @return {bool}\r\n */\r\n\r\nmodule.exports = isArray || function (val) {\r\n  return !! val && '[object Array]' == str.call(val);\r\n};\r\n\r\n},{}],13:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nfunction EventEmitter() {\r\n  this._events = this._events || {};\r\n  this._maxListeners = this._maxListeners || undefined;\r\n}\r\nmodule.exports = EventEmitter;\r\n\r\n// Backwards-compat with node 0.10.x\r\nEventEmitter.EventEmitter = EventEmitter;\r\n\r\nEventEmitter.prototype._events = undefined;\r\nEventEmitter.prototype._maxListeners = undefined;\r\n\r\n// By default EventEmitters will print a warning if more than 10 listeners are\r\n// added to it. This is a useful default which helps finding memory leaks.\r\nEventEmitter.defaultMaxListeners = 10;\r\n\r\n// Obviously not all Emitters should be limited to 10. This function allows\r\n// that to be increased. Set to zero for unlimited.\r\nEventEmitter.prototype.setMaxListeners = function(n) {\r\n  if (!isNumber(n) || n < 0 || isNaN(n))\r\n    throw TypeError('n must be a positive number');\r\n  this._maxListeners = n;\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.emit = function(type) {\r\n  var er, handler, len, args, i, listeners;\r\n\r\n  if (!this._events)\r\n    this._events = {};\r\n\r\n  // If there is no 'error' event listener then throw.\r\n  if (type === 'error') {\r\n    if (!this._events.error ||\r\n        (isObject(this._events.error) && !this._events.error.length)) {\r\n      er = arguments[1];\r\n      if (er instanceof Error) {\r\n        throw er; // Unhandled 'error' event\r\n      }\r\n      throw TypeError('Uncaught, unspecified \"error\" event.');\r\n    }\r\n  }\r\n\r\n  handler = this._events[type];\r\n\r\n  if (isUndefined(handler))\r\n    return false;\r\n\r\n  if (isFunction(handler)) {\r\n    switch (arguments.length) {\r\n      // fast cases\r\n      case 1:\r\n        handler.call(this);\r\n        break;\r\n      case 2:\r\n        handler.call(this, arguments[1]);\r\n        break;\r\n      case 3:\r\n        handler.call(this, arguments[1], arguments[2]);\r\n        break;\r\n      // slower\r\n      default:\r\n        len = arguments.length;\r\n        args = new Array(len - 1);\r\n        for (i = 1; i < len; i++)\r\n          args[i - 1] = arguments[i];\r\n        handler.apply(this, args);\r\n    }\r\n  } else if (isObject(handler)) {\r\n    len = arguments.length;\r\n    args = new Array(len - 1);\r\n    for (i = 1; i < len; i++)\r\n      args[i - 1] = arguments[i];\r\n\r\n    listeners = handler.slice();\r\n    len = listeners.length;\r\n    for (i = 0; i < len; i++)\r\n      listeners[i].apply(this, args);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nEventEmitter.prototype.addListener = function(type, listener) {\r\n  var m;\r\n\r\n  if (!isFunction(listener))\r\n    throw TypeError('listener must be a function');\r\n\r\n  if (!this._events)\r\n    this._events = {};\r\n\r\n  // To avoid recursion in the case that type === \"newListener\"! Before\r\n  // adding it to the listeners, first emit \"newListener\".\r\n  if (this._events.newListener)\r\n    this.emit('newListener', type,\r\n              isFunction(listener.listener) ?\r\n              listener.listener : listener);\r\n\r\n  if (!this._events[type])\r\n    // Optimize the case of one listener. Don't need the extra array object.\r\n    this._events[type] = listener;\r\n  else if (isObject(this._events[type]))\r\n    // If we've already got an array, just append.\r\n    this._events[type].push(listener);\r\n  else\r\n    // Adding the second element, need to change to array.\r\n    this._events[type] = [this._events[type], listener];\r\n\r\n  // Check for listener leak\r\n  if (isObject(this._events[type]) && !this._events[type].warned) {\r\n    var m;\r\n    if (!isUndefined(this._maxListeners)) {\r\n      m = this._maxListeners;\r\n    } else {\r\n      m = EventEmitter.defaultMaxListeners;\r\n    }\r\n\r\n    if (m && m > 0 && this._events[type].length > m) {\r\n      this._events[type].warned = true;\r\n      console.error('(node) warning: possible EventEmitter memory ' +\r\n                    'leak detected. %d listeners added. ' +\r\n                    'Use emitter.setMaxListeners() to increase limit.',\r\n                    this._events[type].length);\r\n      if (typeof console.trace === 'function') {\r\n        // not supported in IE 10\r\n        console.trace();\r\n      }\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\r\n\r\nEventEmitter.prototype.once = function(type, listener) {\r\n  if (!isFunction(listener))\r\n    throw TypeError('listener must be a function');\r\n\r\n  var fired = false;\r\n\r\n  function g() {\r\n    this.removeListener(type, g);\r\n\r\n    if (!fired) {\r\n      fired = true;\r\n      listener.apply(this, arguments);\r\n    }\r\n  }\r\n\r\n  g.listener = listener;\r\n  this.on(type, g);\r\n\r\n  return this;\r\n};\r\n\r\n// emits a 'removeListener' event iff the listener was removed\r\nEventEmitter.prototype.removeListener = function(type, listener) {\r\n  var list, position, length, i;\r\n\r\n  if (!isFunction(listener))\r\n    throw TypeError('listener must be a function');\r\n\r\n  if (!this._events || !this._events[type])\r\n    return this;\r\n\r\n  list = this._events[type];\r\n  length = list.length;\r\n  position = -1;\r\n\r\n  if (list === listener ||\r\n      (isFunction(list.listener) && list.listener === listener)) {\r\n    delete this._events[type];\r\n    if (this._events.removeListener)\r\n      this.emit('removeListener', type, listener);\r\n\r\n  } else if (isObject(list)) {\r\n    for (i = length; i-- > 0;) {\r\n      if (list[i] === listener ||\r\n          (list[i].listener && list[i].listener === listener)) {\r\n        position = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (position < 0)\r\n      return this;\r\n\r\n    if (list.length === 1) {\r\n      list.length = 0;\r\n      delete this._events[type];\r\n    } else {\r\n      list.splice(position, 1);\r\n    }\r\n\r\n    if (this._events.removeListener)\r\n      this.emit('removeListener', type, listener);\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.removeAllListeners = function(type) {\r\n  var key, listeners;\r\n\r\n  if (!this._events)\r\n    return this;\r\n\r\n  // not listening for removeListener, no need to emit\r\n  if (!this._events.removeListener) {\r\n    if (arguments.length === 0)\r\n      this._events = {};\r\n    else if (this._events[type])\r\n      delete this._events[type];\r\n    return this;\r\n  }\r\n\r\n  // emit removeListener for all listeners on all events\r\n  if (arguments.length === 0) {\r\n    for (key in this._events) {\r\n      if (key === 'removeListener') continue;\r\n      this.removeAllListeners(key);\r\n    }\r\n    this.removeAllListeners('removeListener');\r\n    this._events = {};\r\n    return this;\r\n  }\r\n\r\n  listeners = this._events[type];\r\n\r\n  if (isFunction(listeners)) {\r\n    this.removeListener(type, listeners);\r\n  } else {\r\n    // LIFO order\r\n    while (listeners.length)\r\n      this.removeListener(type, listeners[listeners.length - 1]);\r\n  }\r\n  delete this._events[type];\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.listeners = function(type) {\r\n  var ret;\r\n  if (!this._events || !this._events[type])\r\n    ret = [];\r\n  else if (isFunction(this._events[type]))\r\n    ret = [this._events[type]];\r\n  else\r\n    ret = this._events[type].slice();\r\n  return ret;\r\n};\r\n\r\nEventEmitter.listenerCount = function(emitter, type) {\r\n  var ret;\r\n  if (!emitter._events || !emitter._events[type])\r\n    ret = 0;\r\n  else if (isFunction(emitter._events[type]))\r\n    ret = 1;\r\n  else\r\n    ret = emitter._events[type].length;\r\n  return ret;\r\n};\r\n\r\nfunction isFunction(arg) {\r\n  return typeof arg === 'function';\r\n}\r\n\r\nfunction isNumber(arg) {\r\n  return typeof arg === 'number';\r\n}\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === 'object' && arg !== null;\r\n}\r\n\r\nfunction isUndefined(arg) {\r\n  return arg === void 0;\r\n}\r\n\r\n},{}],14:[function(require,module,exports){\r\nif (typeof Object.create === 'function') {\r\n  // implementation from standard node.js 'util' module\r\n  module.exports = function inherits(ctor, superCtor) {\r\n    ctor.super_ = superCtor\r\n    ctor.prototype = Object.create(superCtor.prototype, {\r\n      constructor: {\r\n        value: ctor,\r\n        enumerable: false,\r\n        writable: true,\r\n        configurable: true\r\n      }\r\n    });\r\n  };\r\n} else {\r\n  // old school shim for old browsers\r\n  module.exports = function inherits(ctor, superCtor) {\r\n    ctor.super_ = superCtor\r\n    var TempCtor = function () {}\r\n    TempCtor.prototype = superCtor.prototype\r\n    ctor.prototype = new TempCtor()\r\n    ctor.prototype.constructor = ctor\r\n  }\r\n}\r\n\r\n},{}],15:[function(require,module,exports){\r\nmodule.exports = Array.isArray || function (arr) {\r\n  return Object.prototype.toString.call(arr) == '[object Array]';\r\n};\r\n\r\n},{}],16:[function(require,module,exports){\r\n// shim for using process in browser\r\n\r\nvar process = module.exports = {};\r\nvar queue = [];\r\nvar draining = false;\r\n\r\nfunction drainQueue() {\r\n    if (draining) {\r\n        return;\r\n    }\r\n    draining = true;\r\n    var currentQueue;\r\n    var len = queue.length;\r\n    while(len) {\r\n        currentQueue = queue;\r\n        queue = [];\r\n        var i = -1;\r\n        while (++i < len) {\r\n            currentQueue[i]();\r\n        }\r\n        len = queue.length;\r\n    }\r\n    draining = false;\r\n}\r\nprocess.nextTick = function (fun) {\r\n    queue.push(fun);\r\n    if (!draining) {\r\n        setTimeout(drainQueue, 0);\r\n    }\r\n};\r\n\r\nprocess.title = 'browser';\r\nprocess.browser = true;\r\nprocess.env = {};\r\nprocess.argv = [];\r\nprocess.version = ''; // empty string to avoid regexp issues\r\nprocess.versions = {};\r\n\r\nfunction noop() {}\r\n\r\nprocess.on = noop;\r\nprocess.addListener = noop;\r\nprocess.once = noop;\r\nprocess.off = noop;\r\nprocess.removeListener = noop;\r\nprocess.removeAllListeners = noop;\r\nprocess.emit = noop;\r\n\r\nprocess.binding = function (name) {\r\n    throw new Error('process.binding is not supported');\r\n};\r\n\r\n// TODO(shtylman)\r\nprocess.cwd = function () { return '/' };\r\nprocess.chdir = function (dir) {\r\n    throw new Error('process.chdir is not supported');\r\n};\r\nprocess.umask = function() { return 0; };\r\n\r\n},{}],17:[function(require,module,exports){\r\nmodule.exports = require(\"./lib/_stream_duplex.js\")\r\n\r\n},{\"./lib/_stream_duplex.js\":18}],18:[function(require,module,exports){\r\n(function (process){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// a duplex stream is just a stream that is both readable and writable.\r\n// Since JS doesn't have multiple prototypal inheritance, this class\r\n// prototypally inherits from Readable, and then parasitically from\r\n// Writable.\r\n\r\nmodule.exports = Duplex;\r\n\r\n/*<replacement>*/\r\nvar objectKeys = Object.keys || function (obj) {\r\n  var keys = [];\r\n  for (var key in obj) keys.push(key);\r\n  return keys;\r\n}\r\n/*</replacement>*/\r\n\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nvar Readable = require('./_stream_readable');\r\nvar Writable = require('./_stream_writable');\r\n\r\nutil.inherits(Duplex, Readable);\r\n\r\nforEach(objectKeys(Writable.prototype), function(method) {\r\n  if (!Duplex.prototype[method])\r\n    Duplex.prototype[method] = Writable.prototype[method];\r\n});\r\n\r\nfunction Duplex(options) {\r\n  if (!(this instanceof Duplex))\r\n    return new Duplex(options);\r\n\r\n  Readable.call(this, options);\r\n  Writable.call(this, options);\r\n\r\n  if (options && options.readable === false)\r\n    this.readable = false;\r\n\r\n  if (options && options.writable === false)\r\n    this.writable = false;\r\n\r\n  this.allowHalfOpen = true;\r\n  if (options && options.allowHalfOpen === false)\r\n    this.allowHalfOpen = false;\r\n\r\n  this.once('end', onend);\r\n}\r\n\r\n// the no-half-open enforcer\r\nfunction onend() {\r\n  // if we allow half-open state, or if the writable side ended,\r\n  // then we're ok.\r\n  if (this.allowHalfOpen || this._writableState.ended)\r\n    return;\r\n\r\n  // no more data can be written.\r\n  // But allow more writes to happen in this tick.\r\n  process.nextTick(this.end.bind(this));\r\n}\r\n\r\nfunction forEach (xs, f) {\r\n  for (var i = 0, l = xs.length; i < l; i++) {\r\n    f(xs[i], i);\r\n  }\r\n}\r\n\r\n}).call(this,require('_process'))\r\n},{\"./_stream_readable\":20,\"./_stream_writable\":22,\"_process\":16,\"core-util-is\":23,\"inherits\":14}],19:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// a passthrough stream.\r\n// basically just the most minimal sort of Transform stream.\r\n// Every written chunk gets output as-is.\r\n\r\nmodule.exports = PassThrough;\r\n\r\nvar Transform = require('./_stream_transform');\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nutil.inherits(PassThrough, Transform);\r\n\r\nfunction PassThrough(options) {\r\n  if (!(this instanceof PassThrough))\r\n    return new PassThrough(options);\r\n\r\n  Transform.call(this, options);\r\n}\r\n\r\nPassThrough.prototype._transform = function(chunk, encoding, cb) {\r\n  cb(null, chunk);\r\n};\r\n\r\n},{\"./_stream_transform\":21,\"core-util-is\":23,\"inherits\":14}],20:[function(require,module,exports){\r\n(function (process){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nmodule.exports = Readable;\r\n\r\n/*<replacement>*/\r\nvar isArray = require('isarray');\r\n/*</replacement>*/\r\n\r\n\r\n/*<replacement>*/\r\nvar Buffer = require('buffer').Buffer;\r\n/*</replacement>*/\r\n\r\nReadable.ReadableState = ReadableState;\r\n\r\nvar EE = require('events').EventEmitter;\r\n\r\n/*<replacement>*/\r\nif (!EE.listenerCount) EE.listenerCount = function(emitter, type) {\r\n  return emitter.listeners(type).length;\r\n};\r\n/*</replacement>*/\r\n\r\nvar Stream = require('stream');\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nvar StringDecoder;\r\n\r\n\r\n/*<replacement>*/\r\nvar debug = require('util');\r\nif (debug && debug.debuglog) {\r\n  debug = debug.debuglog('stream');\r\n} else {\r\n  debug = function () {};\r\n}\r\n/*</replacement>*/\r\n\r\n\r\nutil.inherits(Readable, Stream);\r\n\r\nfunction ReadableState(options, stream) {\r\n  var Duplex = require('./_stream_duplex');\r\n\r\n  options = options || {};\r\n\r\n  // the point at which it stops calling _read() to fill the buffer\r\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\r\n  var hwm = options.highWaterMark;\r\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\r\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\r\n\r\n  // cast to ints.\r\n  this.highWaterMark = ~~this.highWaterMark;\r\n\r\n  this.buffer = [];\r\n  this.length = 0;\r\n  this.pipes = null;\r\n  this.pipesCount = 0;\r\n  this.flowing = null;\r\n  this.ended = false;\r\n  this.endEmitted = false;\r\n  this.reading = false;\r\n\r\n  // a flag to be able to tell if the onwrite cb is called immediately,\r\n  // or on a later tick.  We set this to true at first, because any\r\n  // actions that shouldn't happen until \"later\" should generally also\r\n  // not happen before the first write call.\r\n  this.sync = true;\r\n\r\n  // whenever we return null, then we set a flag to say\r\n  // that we're awaiting a 'readable' event emission.\r\n  this.needReadable = false;\r\n  this.emittedReadable = false;\r\n  this.readableListening = false;\r\n\r\n\r\n  // object stream flag. Used to make read(n) ignore n and to\r\n  // make all the buffer merging and length checks go away\r\n  this.objectMode = !!options.objectMode;\r\n\r\n  if (stream instanceof Duplex)\r\n    this.objectMode = this.objectMode || !!options.readableObjectMode;\r\n\r\n  // Crypto is kind of old and crusty.  Historically, its default string\r\n  // encoding is 'binary' so we have to make this configurable.\r\n  // Everything else in the universe uses 'utf8', though.\r\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\r\n\r\n  // when piping, we only care about 'readable' events that happen\r\n  // after read()ing all the bytes and not getting any pushback.\r\n  this.ranOut = false;\r\n\r\n  // the number of writers that are awaiting a drain event in .pipe()s\r\n  this.awaitDrain = 0;\r\n\r\n  // if true, a maybeReadMore has been scheduled\r\n  this.readingMore = false;\r\n\r\n  this.decoder = null;\r\n  this.encoding = null;\r\n  if (options.encoding) {\r\n    if (!StringDecoder)\r\n      StringDecoder = require('string_decoder/').StringDecoder;\r\n    this.decoder = new StringDecoder(options.encoding);\r\n    this.encoding = options.encoding;\r\n  }\r\n}\r\n\r\nfunction Readable(options) {\r\n  var Duplex = require('./_stream_duplex');\r\n\r\n  if (!(this instanceof Readable))\r\n    return new Readable(options);\r\n\r\n  this._readableState = new ReadableState(options, this);\r\n\r\n  // legacy\r\n  this.readable = true;\r\n\r\n  Stream.call(this);\r\n}\r\n\r\n// Manually shove something into the read() buffer.\r\n// This returns true if the highWaterMark has not been hit yet,\r\n// similar to how Writable.write() returns true if you should\r\n// write() some more.\r\nReadable.prototype.push = function(chunk, encoding) {\r\n  var state = this._readableState;\r\n\r\n  if (util.isString(chunk) && !state.objectMode) {\r\n    encoding = encoding || state.defaultEncoding;\r\n    if (encoding !== state.encoding) {\r\n      chunk = new Buffer(chunk, encoding);\r\n      encoding = '';\r\n    }\r\n  }\r\n\r\n  return readableAddChunk(this, state, chunk, encoding, false);\r\n};\r\n\r\n// Unshift should *always* be something directly out of read()\r\nReadable.prototype.unshift = function(chunk) {\r\n  var state = this._readableState;\r\n  return readableAddChunk(this, state, chunk, '', true);\r\n};\r\n\r\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\r\n  var er = chunkInvalid(state, chunk);\r\n  if (er) {\r\n    stream.emit('error', er);\r\n  } else if (util.isNullOrUndefined(chunk)) {\r\n    state.reading = false;\r\n    if (!state.ended)\r\n      onEofChunk(stream, state);\r\n  } else if (state.objectMode || chunk && chunk.length > 0) {\r\n    if (state.ended && !addToFront) {\r\n      var e = new Error('stream.push() after EOF');\r\n      stream.emit('error', e);\r\n    } else if (state.endEmitted && addToFront) {\r\n      var e = new Error('stream.unshift() after end event');\r\n      stream.emit('error', e);\r\n    } else {\r\n      if (state.decoder && !addToFront && !encoding)\r\n        chunk = state.decoder.write(chunk);\r\n\r\n      if (!addToFront)\r\n        state.reading = false;\r\n\r\n      // if we want the data now, just emit it.\r\n      if (state.flowing && state.length === 0 && !state.sync) {\r\n        stream.emit('data', chunk);\r\n        stream.read(0);\r\n      } else {\r\n        // update the buffer info.\r\n        state.length += state.objectMode ? 1 : chunk.length;\r\n        if (addToFront)\r\n          state.buffer.unshift(chunk);\r\n        else\r\n          state.buffer.push(chunk);\r\n\r\n        if (state.needReadable)\r\n          emitReadable(stream);\r\n      }\r\n\r\n      maybeReadMore(stream, state);\r\n    }\r\n  } else if (!addToFront) {\r\n    state.reading = false;\r\n  }\r\n\r\n  return needMoreData(state);\r\n}\r\n\r\n\r\n\r\n// if it's past the high water mark, we can push in some more.\r\n// Also, if we have no data yet, we can stand some\r\n// more bytes.  This is to work around cases where hwm=0,\r\n// such as the repl.  Also, if the push() triggered a\r\n// readable event, and the user called read(largeNumber) such that\r\n// needReadable was set, then we ought to push more, so that another\r\n// 'readable' event will be triggered.\r\nfunction needMoreData(state) {\r\n  return !state.ended &&\r\n         (state.needReadable ||\r\n          state.length < state.highWaterMark ||\r\n          state.length === 0);\r\n}\r\n\r\n// backwards compatibility.\r\nReadable.prototype.setEncoding = function(enc) {\r\n  if (!StringDecoder)\r\n    StringDecoder = require('string_decoder/').StringDecoder;\r\n  this._readableState.decoder = new StringDecoder(enc);\r\n  this._readableState.encoding = enc;\r\n  return this;\r\n};\r\n\r\n// Don't raise the hwm > 128MB\r\nvar MAX_HWM = 0x800000;\r\nfunction roundUpToNextPowerOf2(n) {\r\n  if (n >= MAX_HWM) {\r\n    n = MAX_HWM;\r\n  } else {\r\n    // Get the next highest power of 2\r\n    n--;\r\n    for (var p = 1; p < 32; p <<= 1) n |= n >> p;\r\n    n++;\r\n  }\r\n  return n;\r\n}\r\n\r\nfunction howMuchToRead(n, state) {\r\n  if (state.length === 0 && state.ended)\r\n    return 0;\r\n\r\n  if (state.objectMode)\r\n    return n === 0 ? 0 : 1;\r\n\r\n  if (isNaN(n) || util.isNull(n)) {\r\n    // only flow one buffer at a time\r\n    if (state.flowing && state.buffer.length)\r\n      return state.buffer[0].length;\r\n    else\r\n      return state.length;\r\n  }\r\n\r\n  if (n <= 0)\r\n    return 0;\r\n\r\n  // If we're asking for more than the target buffer level,\r\n  // then raise the water mark.  Bump up to the next highest\r\n  // power of 2, to prevent increasing it excessively in tiny\r\n  // amounts.\r\n  if (n > state.highWaterMark)\r\n    state.highWaterMark = roundUpToNextPowerOf2(n);\r\n\r\n  // don't have that much.  return null, unless we've ended.\r\n  if (n > state.length) {\r\n    if (!state.ended) {\r\n      state.needReadable = true;\r\n      return 0;\r\n    } else\r\n      return state.length;\r\n  }\r\n\r\n  return n;\r\n}\r\n\r\n// you can override either this method, or the async _read(n) below.\r\nReadable.prototype.read = function(n) {\r\n  debug('read', n);\r\n  var state = this._readableState;\r\n  var nOrig = n;\r\n\r\n  if (!util.isNumber(n) || n > 0)\r\n    state.emittedReadable = false;\r\n\r\n  // if we're doing read(0) to trigger a readable event, but we\r\n  // already have a bunch of data in the buffer, then just trigger\r\n  // the 'readable' event and move on.\r\n  if (n === 0 &&\r\n      state.needReadable &&\r\n      (state.length >= state.highWaterMark || state.ended)) {\r\n    debug('read: emitReadable', state.length, state.ended);\r\n    if (state.length === 0 && state.ended)\r\n      endReadable(this);\r\n    else\r\n      emitReadable(this);\r\n    return null;\r\n  }\r\n\r\n  n = howMuchToRead(n, state);\r\n\r\n  // if we've ended, and we're now clear, then finish it up.\r\n  if (n === 0 && state.ended) {\r\n    if (state.length === 0)\r\n      endReadable(this);\r\n    return null;\r\n  }\r\n\r\n  // All the actual chunk generation logic needs to be\r\n  // *below* the call to _read.  The reason is that in certain\r\n  // synthetic stream cases, such as passthrough streams, _read\r\n  // may be a completely synchronous operation which may change\r\n  // the state of the read buffer, providing enough data when\r\n  // before there was *not* enough.\r\n  //\r\n  // So, the steps are:\r\n  // 1. Figure out what the state of things will be after we do\r\n  // a read from the buffer.\r\n  //\r\n  // 2. If that resulting state will trigger a _read, then call _read.\r\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\r\n  // deeply ugly to write APIs this way, but that still doesn't mean\r\n  // that the Readable class should behave improperly, as streams are\r\n  // designed to be sync/async agnostic.\r\n  // Take note if the _read call is sync or async (ie, if the read call\r\n  // has returned yet), so that we know whether or not it's safe to emit\r\n  // 'readable' etc.\r\n  //\r\n  // 3. Actually pull the requested chunks out of the buffer and return.\r\n\r\n  // if we need a readable event, then we need to do some reading.\r\n  var doRead = state.needReadable;\r\n  debug('need readable', doRead);\r\n\r\n  // if we currently have less than the highWaterMark, then also read some\r\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\r\n    doRead = true;\r\n    debug('length less than watermark', doRead);\r\n  }\r\n\r\n  // however, if we've ended, then there's no point, and if we're already\r\n  // reading, then it's unnecessary.\r\n  if (state.ended || state.reading) {\r\n    doRead = false;\r\n    debug('reading or ended', doRead);\r\n  }\r\n\r\n  if (doRead) {\r\n    debug('do read');\r\n    state.reading = true;\r\n    state.sync = true;\r\n    // if the length is currently zero, then we *need* a readable event.\r\n    if (state.length === 0)\r\n      state.needReadable = true;\r\n    // call internal read method\r\n    this._read(state.highWaterMark);\r\n    state.sync = false;\r\n  }\r\n\r\n  // If _read pushed data synchronously, then `reading` will be false,\r\n  // and we need to re-evaluate how much data we can return to the user.\r\n  if (doRead && !state.reading)\r\n    n = howMuchToRead(nOrig, state);\r\n\r\n  var ret;\r\n  if (n > 0)\r\n    ret = fromList(n, state);\r\n  else\r\n    ret = null;\r\n\r\n  if (util.isNull(ret)) {\r\n    state.needReadable = true;\r\n    n = 0;\r\n  }\r\n\r\n  state.length -= n;\r\n\r\n  // If we have nothing in the buffer, then we want to know\r\n  // as soon as we *do* get something into the buffer.\r\n  if (state.length === 0 && !state.ended)\r\n    state.needReadable = true;\r\n\r\n  // If we tried to read() past the EOF, then emit end on the next tick.\r\n  if (nOrig !== n && state.ended && state.length === 0)\r\n    endReadable(this);\r\n\r\n  if (!util.isNull(ret))\r\n    this.emit('data', ret);\r\n\r\n  return ret;\r\n};\r\n\r\nfunction chunkInvalid(state, chunk) {\r\n  var er = null;\r\n  if (!util.isBuffer(chunk) &&\r\n      !util.isString(chunk) &&\r\n      !util.isNullOrUndefined(chunk) &&\r\n      !state.objectMode) {\r\n    er = new TypeError('Invalid non-string/buffer chunk');\r\n  }\r\n  return er;\r\n}\r\n\r\n\r\nfunction onEofChunk(stream, state) {\r\n  if (state.decoder && !state.ended) {\r\n    var chunk = state.decoder.end();\r\n    if (chunk && chunk.length) {\r\n      state.buffer.push(chunk);\r\n      state.length += state.objectMode ? 1 : chunk.length;\r\n    }\r\n  }\r\n  state.ended = true;\r\n\r\n  // emit 'readable' now to make sure it gets picked up.\r\n  emitReadable(stream);\r\n}\r\n\r\n// Don't emit readable right away in sync mode, because this can trigger\r\n// another read() call => stack overflow.  This way, it might trigger\r\n// a nextTick recursion warning, but that's not so bad.\r\nfunction emitReadable(stream) {\r\n  var state = stream._readableState;\r\n  state.needReadable = false;\r\n  if (!state.emittedReadable) {\r\n    debug('emitReadable', state.flowing);\r\n    state.emittedReadable = true;\r\n    if (state.sync)\r\n      process.nextTick(function() {\r\n        emitReadable_(stream);\r\n      });\r\n    else\r\n      emitReadable_(stream);\r\n  }\r\n}\r\n\r\nfunction emitReadable_(stream) {\r\n  debug('emit readable');\r\n  stream.emit('readable');\r\n  flow(stream);\r\n}\r\n\r\n\r\n// at this point, the user has presumably seen the 'readable' event,\r\n// and called read() to consume some data.  that may have triggered\r\n// in turn another _read(n) call, in which case reading = true if\r\n// it's in progress.\r\n// However, if we're not ended, or reading, and the length < hwm,\r\n// then go ahead and try to read some more preemptively.\r\nfunction maybeReadMore(stream, state) {\r\n  if (!state.readingMore) {\r\n    state.readingMore = true;\r\n    process.nextTick(function() {\r\n      maybeReadMore_(stream, state);\r\n    });\r\n  }\r\n}\r\n\r\nfunction maybeReadMore_(stream, state) {\r\n  var len = state.length;\r\n  while (!state.reading && !state.flowing && !state.ended &&\r\n         state.length < state.highWaterMark) {\r\n    debug('maybeReadMore read 0');\r\n    stream.read(0);\r\n    if (len === state.length)\r\n      // didn't get any data, stop spinning.\r\n      break;\r\n    else\r\n      len = state.length;\r\n  }\r\n  state.readingMore = false;\r\n}\r\n\r\n// abstract method.  to be overridden in specific implementation classes.\r\n// call cb(er, data) where data is <= n in length.\r\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\r\n// arbitrary, and perhaps not very meaningful.\r\nReadable.prototype._read = function(n) {\r\n  this.emit('error', new Error('not implemented'));\r\n};\r\n\r\nReadable.prototype.pipe = function(dest, pipeOpts) {\r\n  var src = this;\r\n  var state = this._readableState;\r\n\r\n  switch (state.pipesCount) {\r\n    case 0:\r\n      state.pipes = dest;\r\n      break;\r\n    case 1:\r\n      state.pipes = [state.pipes, dest];\r\n      break;\r\n    default:\r\n      state.pipes.push(dest);\r\n      break;\r\n  }\r\n  state.pipesCount += 1;\r\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\r\n\r\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&\r\n              dest !== process.stdout &&\r\n              dest !== process.stderr;\r\n\r\n  var endFn = doEnd ? onend : cleanup;\r\n  if (state.endEmitted)\r\n    process.nextTick(endFn);\r\n  else\r\n    src.once('end', endFn);\r\n\r\n  dest.on('unpipe', onunpipe);\r\n  function onunpipe(readable) {\r\n    debug('onunpipe');\r\n    if (readable === src) {\r\n      cleanup();\r\n    }\r\n  }\r\n\r\n  function onend() {\r\n    debug('onend');\r\n    dest.end();\r\n  }\r\n\r\n  // when the dest drains, it reduces the awaitDrain counter\r\n  // on the source.  This would be more elegant with a .once()\r\n  // handler in flow(), but adding and removing repeatedly is\r\n  // too slow.\r\n  var ondrain = pipeOnDrain(src);\r\n  dest.on('drain', ondrain);\r\n\r\n  function cleanup() {\r\n    debug('cleanup');\r\n    // cleanup event handlers once the pipe is broken\r\n    dest.removeListener('close', onclose);\r\n    dest.removeListener('finish', onfinish);\r\n    dest.removeListener('drain', ondrain);\r\n    dest.removeListener('error', onerror);\r\n    dest.removeListener('unpipe', onunpipe);\r\n    src.removeListener('end', onend);\r\n    src.removeListener('end', cleanup);\r\n    src.removeListener('data', ondata);\r\n\r\n    // if the reader is waiting for a drain event from this\r\n    // specific writer, then it would cause it to never start\r\n    // flowing again.\r\n    // So, if this is awaiting a drain, then we just call it now.\r\n    // If we don't know, then assume that we are waiting for one.\r\n    if (state.awaitDrain &&\r\n        (!dest._writableState || dest._writableState.needDrain))\r\n      ondrain();\r\n  }\r\n\r\n  src.on('data', ondata);\r\n  function ondata(chunk) {\r\n    debug('ondata');\r\n    var ret = dest.write(chunk);\r\n    if (false === ret) {\r\n      debug('false write response, pause',\r\n            src._readableState.awaitDrain);\r\n      src._readableState.awaitDrain++;\r\n      src.pause();\r\n    }\r\n  }\r\n\r\n  // if the dest has an error, then stop piping into it.\r\n  // however, don't suppress the throwing behavior for this.\r\n  function onerror(er) {\r\n    debug('onerror', er);\r\n    unpipe();\r\n    dest.removeListener('error', onerror);\r\n    if (EE.listenerCount(dest, 'error') === 0)\r\n      dest.emit('error', er);\r\n  }\r\n  // This is a brutally ugly hack to make sure that our error handler\r\n  // is attached before any userland ones.  NEVER DO THIS.\r\n  if (!dest._events || !dest._events.error)\r\n    dest.on('error', onerror);\r\n  else if (isArray(dest._events.error))\r\n    dest._events.error.unshift(onerror);\r\n  else\r\n    dest._events.error = [onerror, dest._events.error];\r\n\r\n\r\n\r\n  // Both close and finish should trigger unpipe, but only once.\r\n  function onclose() {\r\n    dest.removeListener('finish', onfinish);\r\n    unpipe();\r\n  }\r\n  dest.once('close', onclose);\r\n  function onfinish() {\r\n    debug('onfinish');\r\n    dest.removeListener('close', onclose);\r\n    unpipe();\r\n  }\r\n  dest.once('finish', onfinish);\r\n\r\n  function unpipe() {\r\n    debug('unpipe');\r\n    src.unpipe(dest);\r\n  }\r\n\r\n  // tell the dest that it's being piped to\r\n  dest.emit('pipe', src);\r\n\r\n  // start the flow if it hasn't been started already.\r\n  if (!state.flowing) {\r\n    debug('pipe resume');\r\n    src.resume();\r\n  }\r\n\r\n  return dest;\r\n};\r\n\r\nfunction pipeOnDrain(src) {\r\n  return function() {\r\n    var state = src._readableState;\r\n    debug('pipeOnDrain', state.awaitDrain);\r\n    if (state.awaitDrain)\r\n      state.awaitDrain--;\r\n    if (state.awaitDrain === 0 && EE.listenerCount(src, 'data')) {\r\n      state.flowing = true;\r\n      flow(src);\r\n    }\r\n  };\r\n}\r\n\r\n\r\nReadable.prototype.unpipe = function(dest) {\r\n  var state = this._readableState;\r\n\r\n  // if we're not piping anywhere, then do nothing.\r\n  if (state.pipesCount === 0)\r\n    return this;\r\n\r\n  // just one destination.  most common case.\r\n  if (state.pipesCount === 1) {\r\n    // passed in one, but it's not the right one.\r\n    if (dest && dest !== state.pipes)\r\n      return this;\r\n\r\n    if (!dest)\r\n      dest = state.pipes;\r\n\r\n    // got a match.\r\n    state.pipes = null;\r\n    state.pipesCount = 0;\r\n    state.flowing = false;\r\n    if (dest)\r\n      dest.emit('unpipe', this);\r\n    return this;\r\n  }\r\n\r\n  // slow case. multiple pipe destinations.\r\n\r\n  if (!dest) {\r\n    // remove all.\r\n    var dests = state.pipes;\r\n    var len = state.pipesCount;\r\n    state.pipes = null;\r\n    state.pipesCount = 0;\r\n    state.flowing = false;\r\n\r\n    for (var i = 0; i < len; i++)\r\n      dests[i].emit('unpipe', this);\r\n    return this;\r\n  }\r\n\r\n  // try to find the right one.\r\n  var i = indexOf(state.pipes, dest);\r\n  if (i === -1)\r\n    return this;\r\n\r\n  state.pipes.splice(i, 1);\r\n  state.pipesCount -= 1;\r\n  if (state.pipesCount === 1)\r\n    state.pipes = state.pipes[0];\r\n\r\n  dest.emit('unpipe', this);\r\n\r\n  return this;\r\n};\r\n\r\n// set up data events if they are asked for\r\n// Ensure readable listeners eventually get something\r\nReadable.prototype.on = function(ev, fn) {\r\n  var res = Stream.prototype.on.call(this, ev, fn);\r\n\r\n  // If listening to data, and it has not explicitly been paused,\r\n  // then call resume to start the flow of data on the next tick.\r\n  if (ev === 'data' && false !== this._readableState.flowing) {\r\n    this.resume();\r\n  }\r\n\r\n  if (ev === 'readable' && this.readable) {\r\n    var state = this._readableState;\r\n    if (!state.readableListening) {\r\n      state.readableListening = true;\r\n      state.emittedReadable = false;\r\n      state.needReadable = true;\r\n      if (!state.reading) {\r\n        var self = this;\r\n        process.nextTick(function() {\r\n          debug('readable nexttick read 0');\r\n          self.read(0);\r\n        });\r\n      } else if (state.length) {\r\n        emitReadable(this, state);\r\n      }\r\n    }\r\n  }\r\n\r\n  return res;\r\n};\r\nReadable.prototype.addListener = Readable.prototype.on;\r\n\r\n// pause() and resume() are remnants of the legacy readable stream API\r\n// If the user uses them, then switch into old mode.\r\nReadable.prototype.resume = function() {\r\n  var state = this._readableState;\r\n  if (!state.flowing) {\r\n    debug('resume');\r\n    state.flowing = true;\r\n    if (!state.reading) {\r\n      debug('resume read 0');\r\n      this.read(0);\r\n    }\r\n    resume(this, state);\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction resume(stream, state) {\r\n  if (!state.resumeScheduled) {\r\n    state.resumeScheduled = true;\r\n    process.nextTick(function() {\r\n      resume_(stream, state);\r\n    });\r\n  }\r\n}\r\n\r\nfunction resume_(stream, state) {\r\n  state.resumeScheduled = false;\r\n  stream.emit('resume');\r\n  flow(stream);\r\n  if (state.flowing && !state.reading)\r\n    stream.read(0);\r\n}\r\n\r\nReadable.prototype.pause = function() {\r\n  debug('call pause flowing=%j', this._readableState.flowing);\r\n  if (false !== this._readableState.flowing) {\r\n    debug('pause');\r\n    this._readableState.flowing = false;\r\n    this.emit('pause');\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction flow(stream) {\r\n  var state = stream._readableState;\r\n  debug('flow', state.flowing);\r\n  if (state.flowing) {\r\n    do {\r\n      var chunk = stream.read();\r\n    } while (null !== chunk && state.flowing);\r\n  }\r\n}\r\n\r\n// wrap an old-style stream as the async data source.\r\n// This is *not* part of the readable stream interface.\r\n// It is an ugly unfortunate mess of history.\r\nReadable.prototype.wrap = function(stream) {\r\n  var state = this._readableState;\r\n  var paused = false;\r\n\r\n  var self = this;\r\n  stream.on('end', function() {\r\n    debug('wrapped end');\r\n    if (state.decoder && !state.ended) {\r\n      var chunk = state.decoder.end();\r\n      if (chunk && chunk.length)\r\n        self.push(chunk);\r\n    }\r\n\r\n    self.push(null);\r\n  });\r\n\r\n  stream.on('data', function(chunk) {\r\n    debug('wrapped data');\r\n    if (state.decoder)\r\n      chunk = state.decoder.write(chunk);\r\n    if (!chunk || !state.objectMode && !chunk.length)\r\n      return;\r\n\r\n    var ret = self.push(chunk);\r\n    if (!ret) {\r\n      paused = true;\r\n      stream.pause();\r\n    }\r\n  });\r\n\r\n  // proxy all the other methods.\r\n  // important when wrapping filters and duplexes.\r\n  for (var i in stream) {\r\n    if (util.isFunction(stream[i]) && util.isUndefined(this[i])) {\r\n      this[i] = function(method) { return function() {\r\n        return stream[method].apply(stream, arguments);\r\n      }}(i);\r\n    }\r\n  }\r\n\r\n  // proxy certain important events.\r\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\r\n  forEach(events, function(ev) {\r\n    stream.on(ev, self.emit.bind(self, ev));\r\n  });\r\n\r\n  // when we try to consume some more bytes, simply unpause the\r\n  // underlying stream.\r\n  self._read = function(n) {\r\n    debug('wrapped _read', n);\r\n    if (paused) {\r\n      paused = false;\r\n      stream.resume();\r\n    }\r\n  };\r\n\r\n  return self;\r\n};\r\n\r\n\r\n\r\n// exposed for testing purposes only.\r\nReadable._fromList = fromList;\r\n\r\n// Pluck off n bytes from an array of buffers.\r\n// Length is the combined lengths of all the buffers in the list.\r\nfunction fromList(n, state) {\r\n  var list = state.buffer;\r\n  var length = state.length;\r\n  var stringMode = !!state.decoder;\r\n  var objectMode = !!state.objectMode;\r\n  var ret;\r\n\r\n  // nothing in the list, definitely empty.\r\n  if (list.length === 0)\r\n    return null;\r\n\r\n  if (length === 0)\r\n    ret = null;\r\n  else if (objectMode)\r\n    ret = list.shift();\r\n  else if (!n || n >= length) {\r\n    // read it all, truncate the array.\r\n    if (stringMode)\r\n      ret = list.join('');\r\n    else\r\n      ret = Buffer.concat(list, length);\r\n    list.length = 0;\r\n  } else {\r\n    // read just some of it.\r\n    if (n < list[0].length) {\r\n      // just take a part of the first list item.\r\n      // slice is the same for buffers and strings.\r\n      var buf = list[0];\r\n      ret = buf.slice(0, n);\r\n      list[0] = buf.slice(n);\r\n    } else if (n === list[0].length) {\r\n      // first list is a perfect match\r\n      ret = list.shift();\r\n    } else {\r\n      // complex case.\r\n      // we have enough to cover it, but it spans past the first buffer.\r\n      if (stringMode)\r\n        ret = '';\r\n      else\r\n        ret = new Buffer(n);\r\n\r\n      var c = 0;\r\n      for (var i = 0, l = list.length; i < l && c < n; i++) {\r\n        var buf = list[0];\r\n        var cpy = Math.min(n - c, buf.length);\r\n\r\n        if (stringMode)\r\n          ret += buf.slice(0, cpy);\r\n        else\r\n          buf.copy(ret, c, 0, cpy);\r\n\r\n        if (cpy < buf.length)\r\n          list[0] = buf.slice(cpy);\r\n        else\r\n          list.shift();\r\n\r\n        c += cpy;\r\n      }\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nfunction endReadable(stream) {\r\n  var state = stream._readableState;\r\n\r\n  // If we get here before consuming all the bytes, then that is a\r\n  // bug in node.  Should never happen.\r\n  if (state.length > 0)\r\n    throw new Error('endReadable called on non-empty stream');\r\n\r\n  if (!state.endEmitted) {\r\n    state.ended = true;\r\n    process.nextTick(function() {\r\n      // Check that we didn't get one last unshift.\r\n      if (!state.endEmitted && state.length === 0) {\r\n        state.endEmitted = true;\r\n        stream.readable = false;\r\n        stream.emit('end');\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction forEach (xs, f) {\r\n  for (var i = 0, l = xs.length; i < l; i++) {\r\n    f(xs[i], i);\r\n  }\r\n}\r\n\r\nfunction indexOf (xs, x) {\r\n  for (var i = 0, l = xs.length; i < l; i++) {\r\n    if (xs[i] === x) return i;\r\n  }\r\n  return -1;\r\n}\r\n\r\n}).call(this,require('_process'))\r\n},{\"./_stream_duplex\":18,\"_process\":16,\"buffer\":9,\"core-util-is\":23,\"events\":13,\"inherits\":14,\"isarray\":15,\"stream\":28,\"string_decoder/\":29,\"util\":8}],21:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n\r\n// a transform stream is a readable/writable stream where you do\r\n// something with the data.  Sometimes it's called a \"filter\",\r\n// but that's not a great name for it, since that implies a thing where\r\n// some bits pass through, and others are simply ignored.  (That would\r\n// be a valid example of a transform, of course.)\r\n//\r\n// While the output is causally related to the input, it's not a\r\n// necessarily symmetric or synchronous transformation.  For example,\r\n// a zlib stream might take multiple plain-text writes(), and then\r\n// emit a single compressed chunk some time in the future.\r\n//\r\n// Here's how this works:\r\n//\r\n// The Transform stream has all the aspects of the readable and writable\r\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\r\n// internally, and returns false if there's a lot of pending writes\r\n// buffered up.  When you call read(), that calls _read(n) until\r\n// there's enough pending readable data buffered up.\r\n//\r\n// In a transform stream, the written data is placed in a buffer.  When\r\n// _read(n) is called, it transforms the queued up data, calling the\r\n// buffered _write cb's as it consumes chunks.  If consuming a single\r\n// written chunk would result in multiple output chunks, then the first\r\n// outputted bit calls the readcb, and subsequent chunks just go into\r\n// the read buffer, and will cause it to emit 'readable' if necessary.\r\n//\r\n// This way, back-pressure is actually determined by the reading side,\r\n// since _read has to be called to start processing a new chunk.  However,\r\n// a pathological inflate type of transform can cause excessive buffering\r\n// here.  For example, imagine a stream where every byte of input is\r\n// interpreted as an integer from 0-255, and then results in that many\r\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\r\n// 1kb of data being output.  In this case, you could write a very small\r\n// amount of input, and end up with a very large amount of output.  In\r\n// such a pathological inflating mechanism, there'd be no way to tell\r\n// the system to stop doing the transform.  A single 4MB write could\r\n// cause the system to run out of memory.\r\n//\r\n// However, even in such a pathological case, only a single written chunk\r\n// would be consumed, and then the rest would wait (un-transformed) until\r\n// the results of the previous transformed chunk were consumed.\r\n\r\nmodule.exports = Transform;\r\n\r\nvar Duplex = require('./_stream_duplex');\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nutil.inherits(Transform, Duplex);\r\n\r\n\r\nfunction TransformState(options, stream) {\r\n  this.afterTransform = function(er, data) {\r\n    return afterTransform(stream, er, data);\r\n  };\r\n\r\n  this.needTransform = false;\r\n  this.transforming = false;\r\n  this.writecb = null;\r\n  this.writechunk = null;\r\n}\r\n\r\nfunction afterTransform(stream, er, data) {\r\n  var ts = stream._transformState;\r\n  ts.transforming = false;\r\n\r\n  var cb = ts.writecb;\r\n\r\n  if (!cb)\r\n    return stream.emit('error', new Error('no writecb in Transform class'));\r\n\r\n  ts.writechunk = null;\r\n  ts.writecb = null;\r\n\r\n  if (!util.isNullOrUndefined(data))\r\n    stream.push(data);\r\n\r\n  if (cb)\r\n    cb(er);\r\n\r\n  var rs = stream._readableState;\r\n  rs.reading = false;\r\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\r\n    stream._read(rs.highWaterMark);\r\n  }\r\n}\r\n\r\n\r\nfunction Transform(options) {\r\n  if (!(this instanceof Transform))\r\n    return new Transform(options);\r\n\r\n  Duplex.call(this, options);\r\n\r\n  this._transformState = new TransformState(options, this);\r\n\r\n  // when the writable side finishes, then flush out anything remaining.\r\n  var stream = this;\r\n\r\n  // start out asking for a readable event once data is transformed.\r\n  this._readableState.needReadable = true;\r\n\r\n  // we have implemented the _read method, and done the other things\r\n  // that Readable wants before the first _read call, so unset the\r\n  // sync guard flag.\r\n  this._readableState.sync = false;\r\n\r\n  this.once('prefinish', function() {\r\n    if (util.isFunction(this._flush))\r\n      this._flush(function(er) {\r\n        done(stream, er);\r\n      });\r\n    else\r\n      done(stream);\r\n  });\r\n}\r\n\r\nTransform.prototype.push = function(chunk, encoding) {\r\n  this._transformState.needTransform = false;\r\n  return Duplex.prototype.push.call(this, chunk, encoding);\r\n};\r\n\r\n// This is the part where you do stuff!\r\n// override this function in implementation classes.\r\n// 'chunk' is an input chunk.\r\n//\r\n// Call `push(newChunk)` to pass along transformed output\r\n// to the readable side.  You may call 'push' zero or more times.\r\n//\r\n// Call `cb(err)` when you are done with this chunk.  If you pass\r\n// an error, then that'll put the hurt on the whole operation.  If you\r\n// never call cb(), then you'll never get another chunk.\r\nTransform.prototype._transform = function(chunk, encoding, cb) {\r\n  throw new Error('not implemented');\r\n};\r\n\r\nTransform.prototype._write = function(chunk, encoding, cb) {\r\n  var ts = this._transformState;\r\n  ts.writecb = cb;\r\n  ts.writechunk = chunk;\r\n  ts.writeencoding = encoding;\r\n  if (!ts.transforming) {\r\n    var rs = this._readableState;\r\n    if (ts.needTransform ||\r\n        rs.needReadable ||\r\n        rs.length < rs.highWaterMark)\r\n      this._read(rs.highWaterMark);\r\n  }\r\n};\r\n\r\n// Doesn't matter what the args are here.\r\n// _transform does all the work.\r\n// That we got here means that the readable side wants more data.\r\nTransform.prototype._read = function(n) {\r\n  var ts = this._transformState;\r\n\r\n  if (!util.isNull(ts.writechunk) && ts.writecb && !ts.transforming) {\r\n    ts.transforming = true;\r\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\r\n  } else {\r\n    // mark that we need a transform, so that any data that comes in\r\n    // will get processed, now that we've asked for it.\r\n    ts.needTransform = true;\r\n  }\r\n};\r\n\r\n\r\nfunction done(stream, er) {\r\n  if (er)\r\n    return stream.emit('error', er);\r\n\r\n  // if there's nothing in the write buffer, then that means\r\n  // that nothing more will ever be provided\r\n  var ws = stream._writableState;\r\n  var ts = stream._transformState;\r\n\r\n  if (ws.length)\r\n    throw new Error('calling transform done when ws.length != 0');\r\n\r\n  if (ts.transforming)\r\n    throw new Error('calling transform done when still transforming');\r\n\r\n  return stream.push(null);\r\n}\r\n\r\n},{\"./_stream_duplex\":18,\"core-util-is\":23,\"inherits\":14}],22:[function(require,module,exports){\r\n(function (process){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// A bit simpler than readable streams.\r\n// Implement an async ._write(chunk, cb), and it'll handle all\r\n// the drain event emission and buffering.\r\n\r\nmodule.exports = Writable;\r\n\r\n/*<replacement>*/\r\nvar Buffer = require('buffer').Buffer;\r\n/*</replacement>*/\r\n\r\nWritable.WritableState = WritableState;\r\n\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nvar Stream = require('stream');\r\n\r\nutil.inherits(Writable, Stream);\r\n\r\nfunction WriteReq(chunk, encoding, cb) {\r\n  this.chunk = chunk;\r\n  this.encoding = encoding;\r\n  this.callback = cb;\r\n}\r\n\r\nfunction WritableState(options, stream) {\r\n  var Duplex = require('./_stream_duplex');\r\n\r\n  options = options || {};\r\n\r\n  // the point at which write() starts returning false\r\n  // Note: 0 is a valid value, means that we always return false if\r\n  // the entire buffer is not flushed immediately on write()\r\n  var hwm = options.highWaterMark;\r\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\r\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\r\n\r\n  // object stream flag to indicate whether or not this stream\r\n  // contains buffers or objects.\r\n  this.objectMode = !!options.objectMode;\r\n\r\n  if (stream instanceof Duplex)\r\n    this.objectMode = this.objectMode || !!options.writableObjectMode;\r\n\r\n  // cast to ints.\r\n  this.highWaterMark = ~~this.highWaterMark;\r\n\r\n  this.needDrain = false;\r\n  // at the start of calling end()\r\n  this.ending = false;\r\n  // when end() has been called, and returned\r\n  this.ended = false;\r\n  // when 'finish' is emitted\r\n  this.finished = false;\r\n\r\n  // should we decode strings into buffers before passing to _write?\r\n  // this is here so that some node-core streams can optimize string\r\n  // handling at a lower level.\r\n  var noDecode = options.decodeStrings === false;\r\n  this.decodeStrings = !noDecode;\r\n\r\n  // Crypto is kind of old and crusty.  Historically, its default string\r\n  // encoding is 'binary' so we have to make this configurable.\r\n  // Everything else in the universe uses 'utf8', though.\r\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\r\n\r\n  // not an actual buffer we keep track of, but a measurement\r\n  // of how much we're waiting to get pushed to some underlying\r\n  // socket or file.\r\n  this.length = 0;\r\n\r\n  // a flag to see when we're in the middle of a write.\r\n  this.writing = false;\r\n\r\n  // when true all writes will be buffered until .uncork() call\r\n  this.corked = 0;\r\n\r\n  // a flag to be able to tell if the onwrite cb is called immediately,\r\n  // or on a later tick.  We set this to true at first, because any\r\n  // actions that shouldn't happen until \"later\" should generally also\r\n  // not happen before the first write call.\r\n  this.sync = true;\r\n\r\n  // a flag to know if we're processing previously buffered items, which\r\n  // may call the _write() callback in the same tick, so that we don't\r\n  // end up in an overlapped onwrite situation.\r\n  this.bufferProcessing = false;\r\n\r\n  // the callback that's passed to _write(chunk,cb)\r\n  this.onwrite = function(er) {\r\n    onwrite(stream, er);\r\n  };\r\n\r\n  // the callback that the user supplies to write(chunk,encoding,cb)\r\n  this.writecb = null;\r\n\r\n  // the amount that is being written when _write is called.\r\n  this.writelen = 0;\r\n\r\n  this.buffer = [];\r\n\r\n  // number of pending user-supplied write callbacks\r\n  // this must be 0 before 'finish' can be emitted\r\n  this.pendingcb = 0;\r\n\r\n  // emit prefinish if the only thing we're waiting for is _write cbs\r\n  // This is relevant for synchronous Transform streams\r\n  this.prefinished = false;\r\n\r\n  // True if the error was already emitted and should not be thrown again\r\n  this.errorEmitted = false;\r\n}\r\n\r\nfunction Writable(options) {\r\n  var Duplex = require('./_stream_duplex');\r\n\r\n  // Writable ctor is applied to Duplexes, though they're not\r\n  // instanceof Writable, they're instanceof Readable.\r\n  if (!(this instanceof Writable) && !(this instanceof Duplex))\r\n    return new Writable(options);\r\n\r\n  this._writableState = new WritableState(options, this);\r\n\r\n  // legacy.\r\n  this.writable = true;\r\n\r\n  Stream.call(this);\r\n}\r\n\r\n// Otherwise people can pipe Writable streams, which is just wrong.\r\nWritable.prototype.pipe = function() {\r\n  this.emit('error', new Error('Cannot pipe. Not readable.'));\r\n};\r\n\r\n\r\nfunction writeAfterEnd(stream, state, cb) {\r\n  var er = new Error('write after end');\r\n  // TODO: defer error events consistently everywhere, not just the cb\r\n  stream.emit('error', er);\r\n  process.nextTick(function() {\r\n    cb(er);\r\n  });\r\n}\r\n\r\n// If we get something that is not a buffer, string, null, or undefined,\r\n// and we're not in objectMode, then that's an error.\r\n// Otherwise stream chunks are all considered to be of length=1, and the\r\n// watermarks determine how many objects to keep in the buffer, rather than\r\n// how many bytes or characters.\r\nfunction validChunk(stream, state, chunk, cb) {\r\n  var valid = true;\r\n  if (!util.isBuffer(chunk) &&\r\n      !util.isString(chunk) &&\r\n      !util.isNullOrUndefined(chunk) &&\r\n      !state.objectMode) {\r\n    var er = new TypeError('Invalid non-string/buffer chunk');\r\n    stream.emit('error', er);\r\n    process.nextTick(function() {\r\n      cb(er);\r\n    });\r\n    valid = false;\r\n  }\r\n  return valid;\r\n}\r\n\r\nWritable.prototype.write = function(chunk, encoding, cb) {\r\n  var state = this._writableState;\r\n  var ret = false;\r\n\r\n  if (util.isFunction(encoding)) {\r\n    cb = encoding;\r\n    encoding = null;\r\n  }\r\n\r\n  if (util.isBuffer(chunk))\r\n    encoding = 'buffer';\r\n  else if (!encoding)\r\n    encoding = state.defaultEncoding;\r\n\r\n  if (!util.isFunction(cb))\r\n    cb = function() {};\r\n\r\n  if (state.ended)\r\n    writeAfterEnd(this, state, cb);\r\n  else if (validChunk(this, state, chunk, cb)) {\r\n    state.pendingcb++;\r\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\r\n  }\r\n\r\n  return ret;\r\n};\r\n\r\nWritable.prototype.cork = function() {\r\n  var state = this._writableState;\r\n\r\n  state.corked++;\r\n};\r\n\r\nWritable.prototype.uncork = function() {\r\n  var state = this._writableState;\r\n\r\n  if (state.corked) {\r\n    state.corked--;\r\n\r\n    if (!state.writing &&\r\n        !state.corked &&\r\n        !state.finished &&\r\n        !state.bufferProcessing &&\r\n        state.buffer.length)\r\n      clearBuffer(this, state);\r\n  }\r\n};\r\n\r\nfunction decodeChunk(state, chunk, encoding) {\r\n  if (!state.objectMode &&\r\n      state.decodeStrings !== false &&\r\n      util.isString(chunk)) {\r\n    chunk = new Buffer(chunk, encoding);\r\n  }\r\n  return chunk;\r\n}\r\n\r\n// if we're already writing something, then just put this\r\n// in the queue, and wait our turn.  Otherwise, call _write\r\n// If we return false, then we need a drain event, so set that flag.\r\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\r\n  chunk = decodeChunk(state, chunk, encoding);\r\n  if (util.isBuffer(chunk))\r\n    encoding = 'buffer';\r\n  var len = state.objectMode ? 1 : chunk.length;\r\n\r\n  state.length += len;\r\n\r\n  var ret = state.length < state.highWaterMark;\r\n  // we must ensure that previous needDrain will not be reset to false.\r\n  if (!ret)\r\n    state.needDrain = true;\r\n\r\n  if (state.writing || state.corked)\r\n    state.buffer.push(new WriteReq(chunk, encoding, cb));\r\n  else\r\n    doWrite(stream, state, false, len, chunk, encoding, cb);\r\n\r\n  return ret;\r\n}\r\n\r\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\r\n  state.writelen = len;\r\n  state.writecb = cb;\r\n  state.writing = true;\r\n  state.sync = true;\r\n  if (writev)\r\n    stream._writev(chunk, state.onwrite);\r\n  else\r\n    stream._write(chunk, encoding, state.onwrite);\r\n  state.sync = false;\r\n}\r\n\r\nfunction onwriteError(stream, state, sync, er, cb) {\r\n  if (sync)\r\n    process.nextTick(function() {\r\n      state.pendingcb--;\r\n      cb(er);\r\n    });\r\n  else {\r\n    state.pendingcb--;\r\n    cb(er);\r\n  }\r\n\r\n  stream._writableState.errorEmitted = true;\r\n  stream.emit('error', er);\r\n}\r\n\r\nfunction onwriteStateUpdate(state) {\r\n  state.writing = false;\r\n  state.writecb = null;\r\n  state.length -= state.writelen;\r\n  state.writelen = 0;\r\n}\r\n\r\nfunction onwrite(stream, er) {\r\n  var state = stream._writableState;\r\n  var sync = state.sync;\r\n  var cb = state.writecb;\r\n\r\n  onwriteStateUpdate(state);\r\n\r\n  if (er)\r\n    onwriteError(stream, state, sync, er, cb);\r\n  else {\r\n    // Check if we're actually ready to finish, but don't emit yet\r\n    var finished = needFinish(stream, state);\r\n\r\n    if (!finished &&\r\n        !state.corked &&\r\n        !state.bufferProcessing &&\r\n        state.buffer.length) {\r\n      clearBuffer(stream, state);\r\n    }\r\n\r\n    if (sync) {\r\n      process.nextTick(function() {\r\n        afterWrite(stream, state, finished, cb);\r\n      });\r\n    } else {\r\n      afterWrite(stream, state, finished, cb);\r\n    }\r\n  }\r\n}\r\n\r\nfunction afterWrite(stream, state, finished, cb) {\r\n  if (!finished)\r\n    onwriteDrain(stream, state);\r\n  state.pendingcb--;\r\n  cb();\r\n  finishMaybe(stream, state);\r\n}\r\n\r\n// Must force callback to be called on nextTick, so that we don't\r\n// emit 'drain' before the write() consumer gets the 'false' return\r\n// value, and has a chance to attach a 'drain' listener.\r\nfunction onwriteDrain(stream, state) {\r\n  if (state.length === 0 && state.needDrain) {\r\n    state.needDrain = false;\r\n    stream.emit('drain');\r\n  }\r\n}\r\n\r\n\r\n// if there's something in the buffer waiting, then process it\r\nfunction clearBuffer(stream, state) {\r\n  state.bufferProcessing = true;\r\n\r\n  if (stream._writev && state.buffer.length > 1) {\r\n    // Fast case, write everything using _writev()\r\n    var cbs = [];\r\n    for (var c = 0; c < state.buffer.length; c++)\r\n      cbs.push(state.buffer[c].callback);\r\n\r\n    // count the one we are adding, as well.\r\n    // TODO(isaacs) clean this up\r\n    state.pendingcb++;\r\n    doWrite(stream, state, true, state.length, state.buffer, '', function(err) {\r\n      for (var i = 0; i < cbs.length; i++) {\r\n        state.pendingcb--;\r\n        cbs[i](err);\r\n      }\r\n    });\r\n\r\n    // Clear buffer\r\n    state.buffer = [];\r\n  } else {\r\n    // Slow case, write chunks one-by-one\r\n    for (var c = 0; c < state.buffer.length; c++) {\r\n      var entry = state.buffer[c];\r\n      var chunk = entry.chunk;\r\n      var encoding = entry.encoding;\r\n      var cb = entry.callback;\r\n      var len = state.objectMode ? 1 : chunk.length;\r\n\r\n      doWrite(stream, state, false, len, chunk, encoding, cb);\r\n\r\n      // if we didn't call the onwrite immediately, then\r\n      // it means that we need to wait until it does.\r\n      // also, that means that the chunk and cb are currently\r\n      // being processed, so move the buffer counter past them.\r\n      if (state.writing) {\r\n        c++;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (c < state.buffer.length)\r\n      state.buffer = state.buffer.slice(c);\r\n    else\r\n      state.buffer.length = 0;\r\n  }\r\n\r\n  state.bufferProcessing = false;\r\n}\r\n\r\nWritable.prototype._write = function(chunk, encoding, cb) {\r\n  cb(new Error('not implemented'));\r\n\r\n};\r\n\r\nWritable.prototype._writev = null;\r\n\r\nWritable.prototype.end = function(chunk, encoding, cb) {\r\n  var state = this._writableState;\r\n\r\n  if (util.isFunction(chunk)) {\r\n    cb = chunk;\r\n    chunk = null;\r\n    encoding = null;\r\n  } else if (util.isFunction(encoding)) {\r\n    cb = encoding;\r\n    encoding = null;\r\n  }\r\n\r\n  if (!util.isNullOrUndefined(chunk))\r\n    this.write(chunk, encoding);\r\n\r\n  // .end() fully uncorks\r\n  if (state.corked) {\r\n    state.corked = 1;\r\n    this.uncork();\r\n  }\r\n\r\n  // ignore unnecessary end() calls.\r\n  if (!state.ending && !state.finished)\r\n    endWritable(this, state, cb);\r\n};\r\n\r\n\r\nfunction needFinish(stream, state) {\r\n  return (state.ending &&\r\n          state.length === 0 &&\r\n          !state.finished &&\r\n          !state.writing);\r\n}\r\n\r\nfunction prefinish(stream, state) {\r\n  if (!state.prefinished) {\r\n    state.prefinished = true;\r\n    stream.emit('prefinish');\r\n  }\r\n}\r\n\r\nfunction finishMaybe(stream, state) {\r\n  var need = needFinish(stream, state);\r\n  if (need) {\r\n    if (state.pendingcb === 0) {\r\n      prefinish(stream, state);\r\n      state.finished = true;\r\n      stream.emit('finish');\r\n    } else\r\n      prefinish(stream, state);\r\n  }\r\n  return need;\r\n}\r\n\r\nfunction endWritable(stream, state, cb) {\r\n  state.ending = true;\r\n  finishMaybe(stream, state);\r\n  if (cb) {\r\n    if (state.finished)\r\n      process.nextTick(cb);\r\n    else\r\n      stream.once('finish', cb);\r\n  }\r\n  state.ended = true;\r\n}\r\n\r\n}).call(this,require('_process'))\r\n},{\"./_stream_duplex\":18,\"_process\":16,\"buffer\":9,\"core-util-is\":23,\"inherits\":14,\"stream\":28}],23:[function(require,module,exports){\r\n(function (Buffer){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// NOTE: These type checking functions intentionally don't use `instanceof`\r\n// because it is fragile and can be easily faked with `Object.create()`.\r\nfunction isArray(ar) {\r\n  return Array.isArray(ar);\r\n}\r\nexports.isArray = isArray;\r\n\r\nfunction isBoolean(arg) {\r\n  return typeof arg === 'boolean';\r\n}\r\nexports.isBoolean = isBoolean;\r\n\r\nfunction isNull(arg) {\r\n  return arg === null;\r\n}\r\nexports.isNull = isNull;\r\n\r\nfunction isNullOrUndefined(arg) {\r\n  return arg == null;\r\n}\r\nexports.isNullOrUndefined = isNullOrUndefined;\r\n\r\nfunction isNumber(arg) {\r\n  return typeof arg === 'number';\r\n}\r\nexports.isNumber = isNumber;\r\n\r\nfunction isString(arg) {\r\n  return typeof arg === 'string';\r\n}\r\nexports.isString = isString;\r\n\r\nfunction isSymbol(arg) {\r\n  return typeof arg === 'symbol';\r\n}\r\nexports.isSymbol = isSymbol;\r\n\r\nfunction isUndefined(arg) {\r\n  return arg === void 0;\r\n}\r\nexports.isUndefined = isUndefined;\r\n\r\nfunction isRegExp(re) {\r\n  return isObject(re) && objectToString(re) === '[object RegExp]';\r\n}\r\nexports.isRegExp = isRegExp;\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === 'object' && arg !== null;\r\n}\r\nexports.isObject = isObject;\r\n\r\nfunction isDate(d) {\r\n  return isObject(d) && objectToString(d) === '[object Date]';\r\n}\r\nexports.isDate = isDate;\r\n\r\nfunction isError(e) {\r\n  return isObject(e) &&\r\n      (objectToString(e) === '[object Error]' || e instanceof Error);\r\n}\r\nexports.isError = isError;\r\n\r\nfunction isFunction(arg) {\r\n  return typeof arg === 'function';\r\n}\r\nexports.isFunction = isFunction;\r\n\r\nfunction isPrimitive(arg) {\r\n  return arg === null ||\r\n         typeof arg === 'boolean' ||\r\n         typeof arg === 'number' ||\r\n         typeof arg === 'string' ||\r\n         typeof arg === 'symbol' ||  // ES6 symbol\r\n         typeof arg === 'undefined';\r\n}\r\nexports.isPrimitive = isPrimitive;\r\n\r\nfunction isBuffer(arg) {\r\n  return Buffer.isBuffer(arg);\r\n}\r\nexports.isBuffer = isBuffer;\r\n\r\nfunction objectToString(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\n}).call(this,require(\"buffer\").Buffer)\r\n},{\"buffer\":9}],24:[function(require,module,exports){\r\nmodule.exports = require(\"./lib/_stream_passthrough.js\")\r\n\r\n},{\"./lib/_stream_passthrough.js\":19}],25:[function(require,module,exports){\r\nexports = module.exports = require('./lib/_stream_readable.js');\r\nexports.Stream = require('stream');\r\nexports.Readable = exports;\r\nexports.Writable = require('./lib/_stream_writable.js');\r\nexports.Duplex = require('./lib/_stream_duplex.js');\r\nexports.Transform = require('./lib/_stream_transform.js');\r\nexports.PassThrough = require('./lib/_stream_passthrough.js');\r\n\r\n},{\"./lib/_stream_duplex.js\":18,\"./lib/_stream_passthrough.js\":19,\"./lib/_stream_readable.js\":20,\"./lib/_stream_transform.js\":21,\"./lib/_stream_writable.js\":22,\"stream\":28}],26:[function(require,module,exports){\r\nmodule.exports = require(\"./lib/_stream_transform.js\")\r\n\r\n},{\"./lib/_stream_transform.js\":21}],27:[function(require,module,exports){\r\nmodule.exports = require(\"./lib/_stream_writable.js\")\r\n\r\n},{\"./lib/_stream_writable.js\":22}],28:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nmodule.exports = Stream;\r\n\r\nvar EE = require('events').EventEmitter;\r\nvar inherits = require('inherits');\r\n\r\ninherits(Stream, EE);\r\nStream.Readable = require('readable-stream/readable.js');\r\nStream.Writable = require('readable-stream/writable.js');\r\nStream.Duplex = require('readable-stream/duplex.js');\r\nStream.Transform = require('readable-stream/transform.js');\r\nStream.PassThrough = require('readable-stream/passthrough.js');\r\n\r\n// Backwards-compat with node 0.4.x\r\nStream.Stream = Stream;\r\n\r\n\r\n\r\n// old-style streams.  Note that the pipe method (the only relevant\r\n// part of this class) is overridden in the Readable class.\r\n\r\nfunction Stream() {\r\n  EE.call(this);\r\n}\r\n\r\nStream.prototype.pipe = function(dest, options) {\r\n  var source = this;\r\n\r\n  function ondata(chunk) {\r\n    if (dest.writable) {\r\n      if (false === dest.write(chunk) && source.pause) {\r\n        source.pause();\r\n      }\r\n    }\r\n  }\r\n\r\n  source.on('data', ondata);\r\n\r\n  function ondrain() {\r\n    if (source.readable && source.resume) {\r\n      source.resume();\r\n    }\r\n  }\r\n\r\n  dest.on('drain', ondrain);\r\n\r\n  // If the 'end' option is not supplied, dest.end() will be called when\r\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\r\n  if (!dest._isStdio && (!options || options.end !== false)) {\r\n    source.on('end', onend);\r\n    source.on('close', onclose);\r\n  }\r\n\r\n  var didOnEnd = false;\r\n  function onend() {\r\n    if (didOnEnd) return;\r\n    didOnEnd = true;\r\n\r\n    dest.end();\r\n  }\r\n\r\n\r\n  function onclose() {\r\n    if (didOnEnd) return;\r\n    didOnEnd = true;\r\n\r\n    if (typeof dest.destroy === 'function') dest.destroy();\r\n  }\r\n\r\n  // don't leave dangling pipes when there are errors.\r\n  function onerror(er) {\r\n    cleanup();\r\n    if (EE.listenerCount(this, 'error') === 0) {\r\n      throw er; // Unhandled stream error in pipe.\r\n    }\r\n  }\r\n\r\n  source.on('error', onerror);\r\n  dest.on('error', onerror);\r\n\r\n  // remove all the event listeners that were added.\r\n  function cleanup() {\r\n    source.removeListener('data', ondata);\r\n    dest.removeListener('drain', ondrain);\r\n\r\n    source.removeListener('end', onend);\r\n    source.removeListener('close', onclose);\r\n\r\n    source.removeListener('error', onerror);\r\n    dest.removeListener('error', onerror);\r\n\r\n    source.removeListener('end', cleanup);\r\n    source.removeListener('close', cleanup);\r\n\r\n    dest.removeListener('close', cleanup);\r\n  }\r\n\r\n  source.on('end', cleanup);\r\n  source.on('close', cleanup);\r\n\r\n  dest.on('close', cleanup);\r\n\r\n  dest.emit('pipe', source);\r\n\r\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\r\n  return dest;\r\n};\r\n\r\n},{\"events\":13,\"inherits\":14,\"readable-stream/duplex.js\":17,\"readable-stream/passthrough.js\":24,\"readable-stream/readable.js\":25,\"readable-stream/transform.js\":26,\"readable-stream/writable.js\":27}],29:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nvar Buffer = require('buffer').Buffer;\r\n\r\nvar isBufferEncoding = Buffer.isEncoding\r\n  || function(encoding) {\r\n       switch (encoding && encoding.toLowerCase()) {\r\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\r\n         default: return false;\r\n       }\r\n     }\r\n\r\n\r\nfunction assertEncoding(encoding) {\r\n  if (encoding && !isBufferEncoding(encoding)) {\r\n    throw new Error('Unknown encoding: ' + encoding);\r\n  }\r\n}\r\n\r\n// StringDecoder provides an interface for efficiently splitting a series of\r\n// buffers into a series of JS strings without breaking apart multi-byte\r\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\r\n//\r\n// @TODO Handling all encodings inside a single object makes it very difficult\r\n// to reason about this code, so it should be split up in the future.\r\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\r\n// points as used by CESU-8.\r\nvar StringDecoder = exports.StringDecoder = function(encoding) {\r\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\r\n  assertEncoding(encoding);\r\n  switch (this.encoding) {\r\n    case 'utf8':\r\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\r\n      this.surrogateSize = 3;\r\n      break;\r\n    case 'ucs2':\r\n    case 'utf16le':\r\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\r\n      this.surrogateSize = 2;\r\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\r\n      break;\r\n    case 'base64':\r\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\r\n      this.surrogateSize = 3;\r\n      this.detectIncompleteChar = base64DetectIncompleteChar;\r\n      break;\r\n    default:\r\n      this.write = passThroughWrite;\r\n      return;\r\n  }\r\n\r\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\r\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\r\n  this.charBuffer = new Buffer(6);\r\n  // Number of bytes received for the current incomplete multi-byte character.\r\n  this.charReceived = 0;\r\n  // Number of bytes expected for the current incomplete multi-byte character.\r\n  this.charLength = 0;\r\n};\r\n\r\n\r\n// write decodes the given buffer and returns it as JS string that is\r\n// guaranteed to not contain any partial multi-byte characters. Any partial\r\n// character found at the end of the buffer is buffered up, and will be\r\n// returned when calling write again with the remaining bytes.\r\n//\r\n// Note: Converting a Buffer containing an orphan surrogate to a String\r\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\r\n// Buffer#write) will replace incomplete surrogates with the unicode\r\n// replacement character. See https://codereview.chromium.org/121173009/ .\r\nStringDecoder.prototype.write = function(buffer) {\r\n  var charStr = '';\r\n  // if our last write ended with an incomplete multibyte character\r\n  while (this.charLength) {\r\n    // determine how many remaining bytes this buffer has to offer for this char\r\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\r\n        this.charLength - this.charReceived :\r\n        buffer.length;\r\n\r\n    // add the new bytes to the char buffer\r\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\r\n    this.charReceived += available;\r\n\r\n    if (this.charReceived < this.charLength) {\r\n      // still not enough chars in this buffer? wait for more ...\r\n      return '';\r\n    }\r\n\r\n    // remove bytes belonging to the current character from the buffer\r\n    buffer = buffer.slice(available, buffer.length);\r\n\r\n    // get the character that was split\r\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\r\n\r\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\r\n    var charCode = charStr.charCodeAt(charStr.length - 1);\r\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n      this.charLength += this.surrogateSize;\r\n      charStr = '';\r\n      continue;\r\n    }\r\n    this.charReceived = this.charLength = 0;\r\n\r\n    // if there are no more bytes in this buffer, just emit our char\r\n    if (buffer.length === 0) {\r\n      return charStr;\r\n    }\r\n    break;\r\n  }\r\n\r\n  // determine and set charLength / charReceived\r\n  this.detectIncompleteChar(buffer);\r\n\r\n  var end = buffer.length;\r\n  if (this.charLength) {\r\n    // buffer the incomplete character bytes we got\r\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\r\n    end -= this.charReceived;\r\n  }\r\n\r\n  charStr += buffer.toString(this.encoding, 0, end);\r\n\r\n  var end = charStr.length - 1;\r\n  var charCode = charStr.charCodeAt(end);\r\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\r\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n    var size = this.surrogateSize;\r\n    this.charLength += size;\r\n    this.charReceived += size;\r\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\r\n    buffer.copy(this.charBuffer, 0, 0, size);\r\n    return charStr.substring(0, end);\r\n  }\r\n\r\n  // or just emit the charStr\r\n  return charStr;\r\n};\r\n\r\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\r\n// the end of the given buffer. If so, it sets this.charLength to the byte\r\n// length that character, and sets this.charReceived to the number of bytes\r\n// that are available for this character.\r\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\r\n  // determine how many bytes we have to check at the end of this buffer\r\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\r\n\r\n  // Figure out if one of the last i bytes of our buffer announces an\r\n  // incomplete char.\r\n  for (; i > 0; i--) {\r\n    var c = buffer[buffer.length - i];\r\n\r\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\r\n\r\n    // 110XXXXX\r\n    if (i == 1 && c >> 5 == 0x06) {\r\n      this.charLength = 2;\r\n      break;\r\n    }\r\n\r\n    // 1110XXXX\r\n    if (i <= 2 && c >> 4 == 0x0E) {\r\n      this.charLength = 3;\r\n      break;\r\n    }\r\n\r\n    // 11110XXX\r\n    if (i <= 3 && c >> 3 == 0x1E) {\r\n      this.charLength = 4;\r\n      break;\r\n    }\r\n  }\r\n  this.charReceived = i;\r\n};\r\n\r\nStringDecoder.prototype.end = function(buffer) {\r\n  var res = '';\r\n  if (buffer && buffer.length)\r\n    res = this.write(buffer);\r\n\r\n  if (this.charReceived) {\r\n    var cr = this.charReceived;\r\n    var buf = this.charBuffer;\r\n    var enc = this.encoding;\r\n    res += buf.slice(0, cr).toString(enc);\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nfunction passThroughWrite(buffer) {\r\n  return buffer.toString(this.encoding);\r\n}\r\n\r\nfunction utf16DetectIncompleteChar(buffer) {\r\n  this.charReceived = buffer.length % 2;\r\n  this.charLength = this.charReceived ? 2 : 0;\r\n}\r\n\r\nfunction base64DetectIncompleteChar(buffer) {\r\n  this.charReceived = buffer.length % 3;\r\n  this.charLength = this.charReceived ? 3 : 0;\r\n}\r\n\r\n},{\"buffer\":9}],30:[function(require,module,exports){\r\nmodule.exports = function isBuffer(arg) {\r\n  return arg && typeof arg === 'object'\r\n    && typeof arg.copy === 'function'\r\n    && typeof arg.fill === 'function'\r\n    && typeof arg.readUInt8 === 'function';\r\n}\r\n},{}],31:[function(require,module,exports){\r\n(function (process,global){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nvar formatRegExp = /%[sdj%]/g;\r\nexports.format = function(f) {\r\n  if (!isString(f)) {\r\n    var objects = [];\r\n    for (var i = 0; i < arguments.length; i++) {\r\n      objects.push(inspect(arguments[i]));\r\n    }\r\n    return objects.join(' ');\r\n  }\r\n\r\n  var i = 1;\r\n  var args = arguments;\r\n  var len = args.length;\r\n  var str = String(f).replace(formatRegExp, function(x) {\r\n    if (x === '%%') return '%';\r\n    if (i >= len) return x;\r\n    switch (x) {\r\n      case '%s': return String(args[i++]);\r\n      case '%d': return Number(args[i++]);\r\n      case '%j':\r\n        try {\r\n          return JSON.stringify(args[i++]);\r\n        } catch (_) {\r\n          return '[Circular]';\r\n        }\r\n      default:\r\n        return x;\r\n    }\r\n  });\r\n  for (var x = args[i]; i < len; x = args[++i]) {\r\n    if (isNull(x) || !isObject(x)) {\r\n      str += ' ' + x;\r\n    } else {\r\n      str += ' ' + inspect(x);\r\n    }\r\n  }\r\n  return str;\r\n};\r\n\r\n\r\n// Mark that a method should not be used.\r\n// Returns a modified function which warns once by default.\r\n// If --no-deprecation is set, then it is a no-op.\r\nexports.deprecate = function(fn, msg) {\r\n  // Allow for deprecating things in the process of starting up.\r\n  if (isUndefined(global.process)) {\r\n    return function() {\r\n      return exports.deprecate(fn, msg).apply(this, arguments);\r\n    };\r\n  }\r\n\r\n  if (process.noDeprecation === true) {\r\n    return fn;\r\n  }\r\n\r\n  var warned = false;\r\n  function deprecated() {\r\n    if (!warned) {\r\n      if (process.throwDeprecation) {\r\n        throw new Error(msg);\r\n      } else if (process.traceDeprecation) {\r\n        console.trace(msg);\r\n      } else {\r\n        console.error(msg);\r\n      }\r\n      warned = true;\r\n    }\r\n    return fn.apply(this, arguments);\r\n  }\r\n\r\n  return deprecated;\r\n};\r\n\r\n\r\nvar debugs = {};\r\nvar debugEnviron;\r\nexports.debuglog = function(set) {\r\n  if (isUndefined(debugEnviron))\r\n    debugEnviron = process.env.NODE_DEBUG || '';\r\n  set = set.toUpperCase();\r\n  if (!debugs[set]) {\r\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\r\n      var pid = process.pid;\r\n      debugs[set] = function() {\r\n        var msg = exports.format.apply(exports, arguments);\r\n        console.error('%s %d: %s', set, pid, msg);\r\n      };\r\n    } else {\r\n      debugs[set] = function() {};\r\n    }\r\n  }\r\n  return debugs[set];\r\n};\r\n\r\n\r\n/**\r\n * Echos the value of a value. Trys to print the value out\r\n * in the best way possible given the different types.\r\n *\r\n * @param {Object} obj The object to print out.\r\n * @param {Object} opts Optional options object that alters the output.\r\n */\r\n/* legacy: obj, showHidden, depth, colors*/\r\nfunction inspect(obj, opts) {\r\n  // default options\r\n  var ctx = {\r\n    seen: [],\r\n    stylize: stylizeNoColor\r\n  };\r\n  // legacy...\r\n  if (arguments.length >= 3) ctx.depth = arguments[2];\r\n  if (arguments.length >= 4) ctx.colors = arguments[3];\r\n  if (isBoolean(opts)) {\r\n    // legacy...\r\n    ctx.showHidden = opts;\r\n  } else if (opts) {\r\n    // got an \"options\" object\r\n    exports._extend(ctx, opts);\r\n  }\r\n  // set default options\r\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\r\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\r\n  if (isUndefined(ctx.colors)) ctx.colors = false;\r\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\r\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\r\n  return formatValue(ctx, obj, ctx.depth);\r\n}\r\nexports.inspect = inspect;\r\n\r\n\r\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\r\ninspect.colors = {\r\n  'bold' : [1, 22],\r\n  'italic' : [3, 23],\r\n  'underline' : [4, 24],\r\n  'inverse' : [7, 27],\r\n  'white' : [37, 39],\r\n  'grey' : [90, 39],\r\n  'black' : [30, 39],\r\n  'blue' : [34, 39],\r\n  'cyan' : [36, 39],\r\n  'green' : [32, 39],\r\n  'magenta' : [35, 39],\r\n  'red' : [31, 39],\r\n  'yellow' : [33, 39]\r\n};\r\n\r\n// Don't use 'blue' not visible on cmd.exe\r\ninspect.styles = {\r\n  'special': 'cyan',\r\n  'number': 'yellow',\r\n  'boolean': 'yellow',\r\n  'undefined': 'grey',\r\n  'null': 'bold',\r\n  'string': 'green',\r\n  'date': 'magenta',\r\n  // \"name\": intentionally not styling\r\n  'regexp': 'red'\r\n};\r\n\r\n\r\nfunction stylizeWithColor(str, styleType) {\r\n  var style = inspect.styles[styleType];\r\n\r\n  if (style) {\r\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\r\n           '\\u001b[' + inspect.colors[style][1] + 'm';\r\n  } else {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction stylizeNoColor(str, styleType) {\r\n  return str;\r\n}\r\n\r\n\r\nfunction arrayToHash(array) {\r\n  var hash = {};\r\n\r\n  array.forEach(function(val, idx) {\r\n    hash[val] = true;\r\n  });\r\n\r\n  return hash;\r\n}\r\n\r\n\r\nfunction formatValue(ctx, value, recurseTimes) {\r\n  // Provide a hook for user-specified inspect functions.\r\n  // Check that value is an object with an inspect function on it\r\n  if (ctx.customInspect &&\r\n      value &&\r\n      isFunction(value.inspect) &&\r\n      // Filter out the util module, it's inspect function is special\r\n      value.inspect !== exports.inspect &&\r\n      // Also filter out any prototype objects using the circular check.\r\n      !(value.constructor && value.constructor.prototype === value)) {\r\n    var ret = value.inspect(recurseTimes, ctx);\r\n    if (!isString(ret)) {\r\n      ret = formatValue(ctx, ret, recurseTimes);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  // Primitive types cannot have properties\r\n  var primitive = formatPrimitive(ctx, value);\r\n  if (primitive) {\r\n    return primitive;\r\n  }\r\n\r\n  // Look up the keys of the object.\r\n  var keys = Object.keys(value);\r\n  var visibleKeys = arrayToHash(keys);\r\n\r\n  if (ctx.showHidden) {\r\n    keys = Object.getOwnPropertyNames(value);\r\n  }\r\n\r\n  // IE doesn't make error fields non-enumerable\r\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\r\n  if (isError(value)\r\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\r\n    return formatError(value);\r\n  }\r\n\r\n  // Some type of object without properties can be shortcutted.\r\n  if (keys.length === 0) {\r\n    if (isFunction(value)) {\r\n      var name = value.name ? ': ' + value.name : '';\r\n      return ctx.stylize('[Function' + name + ']', 'special');\r\n    }\r\n    if (isRegExp(value)) {\r\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\r\n    }\r\n    if (isDate(value)) {\r\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\r\n    }\r\n    if (isError(value)) {\r\n      return formatError(value);\r\n    }\r\n  }\r\n\r\n  var base = '', array = false, braces = ['{', '}'];\r\n\r\n  // Make Array say that they are Array\r\n  if (isArray(value)) {\r\n    array = true;\r\n    braces = ['[', ']'];\r\n  }\r\n\r\n  // Make functions say that they are functions\r\n  if (isFunction(value)) {\r\n    var n = value.name ? ': ' + value.name : '';\r\n    base = ' [Function' + n + ']';\r\n  }\r\n\r\n  // Make RegExps say that they are RegExps\r\n  if (isRegExp(value)) {\r\n    base = ' ' + RegExp.prototype.toString.call(value);\r\n  }\r\n\r\n  // Make dates with properties first say the date\r\n  if (isDate(value)) {\r\n    base = ' ' + Date.prototype.toUTCString.call(value);\r\n  }\r\n\r\n  // Make error with message first say the error\r\n  if (isError(value)) {\r\n    base = ' ' + formatError(value);\r\n  }\r\n\r\n  if (keys.length === 0 && (!array || value.length == 0)) {\r\n    return braces[0] + base + braces[1];\r\n  }\r\n\r\n  if (recurseTimes < 0) {\r\n    if (isRegExp(value)) {\r\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\r\n    } else {\r\n      return ctx.stylize('[Object]', 'special');\r\n    }\r\n  }\r\n\r\n  ctx.seen.push(value);\r\n\r\n  var output;\r\n  if (array) {\r\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\r\n  } else {\r\n    output = keys.map(function(key) {\r\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\r\n    });\r\n  }\r\n\r\n  ctx.seen.pop();\r\n\r\n  return reduceToSingleString(output, base, braces);\r\n}\r\n\r\n\r\nfunction formatPrimitive(ctx, value) {\r\n  if (isUndefined(value))\r\n    return ctx.stylize('undefined', 'undefined');\r\n  if (isString(value)) {\r\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\r\n                                             .replace(/'/g, \"\\\\'\")\r\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\r\n    return ctx.stylize(simple, 'string');\r\n  }\r\n  if (isNumber(value))\r\n    return ctx.stylize('' + value, 'number');\r\n  if (isBoolean(value))\r\n    return ctx.stylize('' + value, 'boolean');\r\n  // For some reason typeof null is \"object\", so special case here.\r\n  if (isNull(value))\r\n    return ctx.stylize('null', 'null');\r\n}\r\n\r\n\r\nfunction formatError(value) {\r\n  return '[' + Error.prototype.toString.call(value) + ']';\r\n}\r\n\r\n\r\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\r\n  var output = [];\r\n  for (var i = 0, l = value.length; i < l; ++i) {\r\n    if (hasOwnProperty(value, String(i))) {\r\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\r\n          String(i), true));\r\n    } else {\r\n      output.push('');\r\n    }\r\n  }\r\n  keys.forEach(function(key) {\r\n    if (!key.match(/^\\d+$/)) {\r\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\r\n          key, true));\r\n    }\r\n  });\r\n  return output;\r\n}\r\n\r\n\r\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\r\n  var name, str, desc;\r\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\r\n  if (desc.get) {\r\n    if (desc.set) {\r\n      str = ctx.stylize('[Getter/Setter]', 'special');\r\n    } else {\r\n      str = ctx.stylize('[Getter]', 'special');\r\n    }\r\n  } else {\r\n    if (desc.set) {\r\n      str = ctx.stylize('[Setter]', 'special');\r\n    }\r\n  }\r\n  if (!hasOwnProperty(visibleKeys, key)) {\r\n    name = '[' + key + ']';\r\n  }\r\n  if (!str) {\r\n    if (ctx.seen.indexOf(desc.value) < 0) {\r\n      if (isNull(recurseTimes)) {\r\n        str = formatValue(ctx, desc.value, null);\r\n      } else {\r\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\r\n      }\r\n      if (str.indexOf('\\n') > -1) {\r\n        if (array) {\r\n          str = str.split('\\n').map(function(line) {\r\n            return '  ' + line;\r\n          }).join('\\n').substr(2);\r\n        } else {\r\n          str = '\\n' + str.split('\\n').map(function(line) {\r\n            return '   ' + line;\r\n          }).join('\\n');\r\n        }\r\n      }\r\n    } else {\r\n      str = ctx.stylize('[Circular]', 'special');\r\n    }\r\n  }\r\n  if (isUndefined(name)) {\r\n    if (array && key.match(/^\\d+$/)) {\r\n      return str;\r\n    }\r\n    name = JSON.stringify('' + key);\r\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\r\n      name = name.substr(1, name.length - 2);\r\n      name = ctx.stylize(name, 'name');\r\n    } else {\r\n      name = name.replace(/'/g, \"\\\\'\")\r\n                 .replace(/\\\\\"/g, '\"')\r\n                 .replace(/(^\"|\"$)/g, \"'\");\r\n      name = ctx.stylize(name, 'string');\r\n    }\r\n  }\r\n\r\n  return name + ': ' + str;\r\n}\r\n\r\n\r\nfunction reduceToSingleString(output, base, braces) {\r\n  var numLinesEst = 0;\r\n  var length = output.reduce(function(prev, cur) {\r\n    numLinesEst++;\r\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\r\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\r\n  }, 0);\r\n\r\n  if (length > 60) {\r\n    return braces[0] +\r\n           (base === '' ? '' : base + '\\n ') +\r\n           ' ' +\r\n           output.join(',\\n  ') +\r\n           ' ' +\r\n           braces[1];\r\n  }\r\n\r\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\r\n}\r\n\r\n\r\n// NOTE: These type checking functions intentionally don't use `instanceof`\r\n// because it is fragile and can be easily faked with `Object.create()`.\r\nfunction isArray(ar) {\r\n  return Array.isArray(ar);\r\n}\r\nexports.isArray = isArray;\r\n\r\nfunction isBoolean(arg) {\r\n  return typeof arg === 'boolean';\r\n}\r\nexports.isBoolean = isBoolean;\r\n\r\nfunction isNull(arg) {\r\n  return arg === null;\r\n}\r\nexports.isNull = isNull;\r\n\r\nfunction isNullOrUndefined(arg) {\r\n  return arg == null;\r\n}\r\nexports.isNullOrUndefined = isNullOrUndefined;\r\n\r\nfunction isNumber(arg) {\r\n  return typeof arg === 'number';\r\n}\r\nexports.isNumber = isNumber;\r\n\r\nfunction isString(arg) {\r\n  return typeof arg === 'string';\r\n}\r\nexports.isString = isString;\r\n\r\nfunction isSymbol(arg) {\r\n  return typeof arg === 'symbol';\r\n}\r\nexports.isSymbol = isSymbol;\r\n\r\nfunction isUndefined(arg) {\r\n  return arg === void 0;\r\n}\r\nexports.isUndefined = isUndefined;\r\n\r\nfunction isRegExp(re) {\r\n  return isObject(re) && objectToString(re) === '[object RegExp]';\r\n}\r\nexports.isRegExp = isRegExp;\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === 'object' && arg !== null;\r\n}\r\nexports.isObject = isObject;\r\n\r\nfunction isDate(d) {\r\n  return isObject(d) && objectToString(d) === '[object Date]';\r\n}\r\nexports.isDate = isDate;\r\n\r\nfunction isError(e) {\r\n  return isObject(e) &&\r\n      (objectToString(e) === '[object Error]' || e instanceof Error);\r\n}\r\nexports.isError = isError;\r\n\r\nfunction isFunction(arg) {\r\n  return typeof arg === 'function';\r\n}\r\nexports.isFunction = isFunction;\r\n\r\nfunction isPrimitive(arg) {\r\n  return arg === null ||\r\n         typeof arg === 'boolean' ||\r\n         typeof arg === 'number' ||\r\n         typeof arg === 'string' ||\r\n         typeof arg === 'symbol' ||  // ES6 symbol\r\n         typeof arg === 'undefined';\r\n}\r\nexports.isPrimitive = isPrimitive;\r\n\r\nexports.isBuffer = require('./support/isBuffer');\r\n\r\nfunction objectToString(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\n\r\n\r\nfunction pad(n) {\r\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\r\n}\r\n\r\n\r\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\r\n              'Oct', 'Nov', 'Dec'];\r\n\r\n// 26 Feb 16:19:34\r\nfunction timestamp() {\r\n  var d = new Date();\r\n  var time = [pad(d.getHours()),\r\n              pad(d.getMinutes()),\r\n              pad(d.getSeconds())].join(':');\r\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\r\n}\r\n\r\n\r\n// log is just a thin wrapper to console.log that prepends a timestamp\r\nexports.log = function() {\r\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\r\n};\r\n\r\n\r\n/**\r\n * Inherit the prototype methods from one constructor into another.\r\n *\r\n * The Function.prototype.inherits from lang.js rewritten as a standalone\r\n * function (not on Function.prototype). NOTE: If this file is to be loaded\r\n * during bootstrapping this function needs to be rewritten using some native\r\n * functions as prototype setup using normal JavaScript does not work as\r\n * expected during bootstrapping (see mirror.js in r114903).\r\n *\r\n * @param {function} ctor Constructor function which needs to inherit the\r\n *     prototype.\r\n * @param {function} superCtor Constructor function to inherit prototype from.\r\n */\r\nexports.inherits = require('inherits');\r\n\r\nexports._extend = function(origin, add) {\r\n  // Don't do anything if add isn't an object\r\n  if (!add || !isObject(add)) return origin;\r\n\r\n  var keys = Object.keys(add);\r\n  var i = keys.length;\r\n  while (i--) {\r\n    origin[keys[i]] = add[keys[i]];\r\n  }\r\n  return origin;\r\n};\r\n\r\nfunction hasOwnProperty(obj, prop) {\r\n  return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\r\n\r\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{\"./support/isBuffer\":30,\"_process\":16,\"inherits\":14}],32:[function(require,module,exports){\r\n/**\r\n * Slice reference.\r\n */\r\n\r\nvar slice = [].slice;\r\n\r\n/**\r\n * Bind `obj` to `fn`.\r\n *\r\n * @param {Object} obj\r\n * @param {Function|String} fn or string\r\n * @return {Function}\r\n * @api public\r\n */\r\n\r\nmodule.exports = function(obj, fn){\r\n  if ('string' == typeof fn) fn = obj[fn];\r\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\r\n  var args = slice.call(arguments, 2);\r\n  return function(){\r\n    return fn.apply(obj, args.concat(slice.call(arguments)));\r\n  }\r\n};\r\n\r\n},{}],33:[function(require,module,exports){\r\n\r\n/**\r\n * This is the web browser implementation of `debug()`.\r\n *\r\n * Expose `debug()` as the module.\r\n */\r\n\r\nexports = module.exports = require('./debug');\r\nexports.log = log;\r\nexports.formatArgs = formatArgs;\r\nexports.save = save;\r\nexports.load = load;\r\nexports.useColors = useColors;\r\n\r\n/**\r\n * Use chrome.storage.local if we are in an app\r\n */\r\n\r\nvar storage;\r\n\r\nif (typeof chrome !== 'undefined' && typeof chrome.storage !== 'undefined')\r\n  storage = chrome.storage.local;\r\nelse\r\n  storage = localstorage();\r\n\r\n/**\r\n * Colors.\r\n */\r\n\r\nexports.colors = [\r\n  'lightseagreen',\r\n  'forestgreen',\r\n  'goldenrod',\r\n  'dodgerblue',\r\n  'darkorchid',\r\n  'crimson'\r\n];\r\n\r\n/**\r\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\r\n * and the Firebug extension (any Firefox version) are known\r\n * to support \"%c\" CSS customizations.\r\n *\r\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\r\n */\r\n\r\nfunction useColors() {\r\n  // is webkit? http://stackoverflow.com/a/16459606/376773\r\n  return ('WebkitAppearance' in document.documentElement.style) ||\r\n    // is firebug? http://stackoverflow.com/a/398120/376773\r\n    (window.console && (console.firebug || (console.exception && console.table))) ||\r\n    // is firefox >= v31?\r\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\r\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\r\n}\r\n\r\n/**\r\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\r\n */\r\n\r\nexports.formatters.j = function(v) {\r\n  return JSON.stringify(v);\r\n};\r\n\r\n\r\n/**\r\n * Colorize log arguments if enabled.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction formatArgs() {\r\n  var args = arguments;\r\n  var useColors = this.useColors;\r\n\r\n  args[0] = (useColors ? '%c' : '')\r\n    + this.namespace\r\n    + (useColors ? ' %c' : ' ')\r\n    + args[0]\r\n    + (useColors ? '%c ' : ' ')\r\n    + '+' + exports.humanize(this.diff);\r\n\r\n  if (!useColors) return args;\r\n\r\n  var c = 'color: ' + this.color;\r\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\r\n\r\n  // the final \"%c\" is somewhat tricky, because there could be other\r\n  // arguments passed either before or after the %c, so we need to\r\n  // figure out the correct index to insert the CSS into\r\n  var index = 0;\r\n  var lastC = 0;\r\n  args[0].replace(/%[a-z%]/g, function(match) {\r\n    if ('%%' === match) return;\r\n    index++;\r\n    if ('%c' === match) {\r\n      // we only are interested in the *last* %c\r\n      // (the user may have provided their own)\r\n      lastC = index;\r\n    }\r\n  });\r\n\r\n  args.splice(lastC, 0, c);\r\n  return args;\r\n}\r\n\r\n/**\r\n * Invokes `console.log()` when available.\r\n * No-op when `console.log` is not a \"function\".\r\n *\r\n * @api public\r\n */\r\n\r\nfunction log() {\r\n  // this hackery is required for IE8/9, where\r\n  // the `console.log` function doesn't have 'apply'\r\n  return 'object' === typeof console\r\n    && console.log\r\n    && Function.prototype.apply.call(console.log, console, arguments);\r\n}\r\n\r\n/**\r\n * Save `namespaces`.\r\n *\r\n * @param {String} namespaces\r\n * @api private\r\n */\r\n\r\nfunction save(namespaces) {\r\n  try {\r\n    if (null == namespaces) {\r\n      storage.removeItem('debug');\r\n    } else {\r\n      storage.debug = namespaces;\r\n    }\r\n  } catch(e) {}\r\n}\r\n\r\n/**\r\n * Load `namespaces`.\r\n *\r\n * @return {String} returns the previously persisted debug modes\r\n * @api private\r\n */\r\n\r\nfunction load() {\r\n  var r;\r\n  try {\r\n    r = storage.debug;\r\n  } catch(e) {}\r\n  return r;\r\n}\r\n\r\n/**\r\n * Enable namespaces listed in `localStorage.debug` initially.\r\n */\r\n\r\nexports.enable(load());\r\n\r\n/**\r\n * Localstorage attempts to return the localstorage.\r\n *\r\n * This is necessary because safari throws\r\n * when a user disables cookies/localstorage\r\n * and you attempt to access it.\r\n *\r\n * @return {LocalStorage}\r\n * @api private\r\n */\r\n\r\nfunction localstorage(){\r\n  try {\r\n    return window.localStorage;\r\n  } catch (e) {}\r\n}\r\n\r\n},{\"./debug\":34}],34:[function(require,module,exports){\r\n\r\n/**\r\n * This is the common logic for both the Node.js and web browser\r\n * implementations of `debug()`.\r\n *\r\n * Expose `debug()` as the module.\r\n */\r\n\r\nexports = module.exports = debug;\r\nexports.coerce = coerce;\r\nexports.disable = disable;\r\nexports.enable = enable;\r\nexports.enabled = enabled;\r\nexports.humanize = require('ms');\r\n\r\n/**\r\n * The currently active debug mode names, and names to skip.\r\n */\r\n\r\nexports.names = [];\r\nexports.skips = [];\r\n\r\n/**\r\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\r\n *\r\n * Valid key names are a single, lowercased letter, i.e. \"n\".\r\n */\r\n\r\nexports.formatters = {};\r\n\r\n/**\r\n * Previously assigned color.\r\n */\r\n\r\nvar prevColor = 0;\r\n\r\n/**\r\n * Previous log timestamp.\r\n */\r\n\r\nvar prevTime;\r\n\r\n/**\r\n * Select a color.\r\n *\r\n * @return {Number}\r\n * @api private\r\n */\r\n\r\nfunction selectColor() {\r\n  return exports.colors[prevColor++ % exports.colors.length];\r\n}\r\n\r\n/**\r\n * Create a debugger with the given `namespace`.\r\n *\r\n * @param {String} namespace\r\n * @return {Function}\r\n * @api public\r\n */\r\n\r\nfunction debug(namespace) {\r\n\r\n  // define the `disabled` version\r\n  function disabled() {\r\n  }\r\n  disabled.enabled = false;\r\n\r\n  // define the `enabled` version\r\n  function enabled() {\r\n\r\n    var self = enabled;\r\n\r\n    // set `diff` timestamp\r\n    var curr = +new Date();\r\n    var ms = curr - (prevTime || curr);\r\n    self.diff = ms;\r\n    self.prev = prevTime;\r\n    self.curr = curr;\r\n    prevTime = curr;\r\n\r\n    // add the `color` if not set\r\n    if (null == self.useColors) self.useColors = exports.useColors();\r\n    if (null == self.color && self.useColors) self.color = selectColor();\r\n\r\n    var args = Array.prototype.slice.call(arguments);\r\n\r\n    args[0] = exports.coerce(args[0]);\r\n\r\n    if ('string' !== typeof args[0]) {\r\n      // anything else let's inspect with %o\r\n      args = ['%o'].concat(args);\r\n    }\r\n\r\n    // apply any `formatters` transformations\r\n    var index = 0;\r\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\r\n      // if we encounter an escaped % then don't increase the array index\r\n      if (match === '%%') return match;\r\n      index++;\r\n      var formatter = exports.formatters[format];\r\n      if ('function' === typeof formatter) {\r\n        var val = args[index];\r\n        match = formatter.call(self, val);\r\n\r\n        // now we need to remove `args[index]` since it's inlined in the `format`\r\n        args.splice(index, 1);\r\n        index--;\r\n      }\r\n      return match;\r\n    });\r\n\r\n    if ('function' === typeof exports.formatArgs) {\r\n      args = exports.formatArgs.apply(self, args);\r\n    }\r\n    var logFn = enabled.log || exports.log || console.log.bind(console);\r\n    logFn.apply(self, args);\r\n  }\r\n  enabled.enabled = true;\r\n\r\n  var fn = exports.enabled(namespace) ? enabled : disabled;\r\n\r\n  fn.namespace = namespace;\r\n\r\n  return fn;\r\n}\r\n\r\n/**\r\n * Enables a debug mode by namespaces. This can include modes\r\n * separated by a colon and wildcards.\r\n *\r\n * @param {String} namespaces\r\n * @api public\r\n */\r\n\r\nfunction enable(namespaces) {\r\n  exports.save(namespaces);\r\n\r\n  var split = (namespaces || '').split(/[\\s,]+/);\r\n  var len = split.length;\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    if (!split[i]) continue; // ignore empty strings\r\n    namespaces = split[i].replace(/\\*/g, '.*?');\r\n    if (namespaces[0] === '-') {\r\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\r\n    } else {\r\n      exports.names.push(new RegExp('^' + namespaces + '$'));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Disable debug output.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction disable() {\r\n  exports.enable('');\r\n}\r\n\r\n/**\r\n * Returns true if the given mode name is enabled, false otherwise.\r\n *\r\n * @param {String} name\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nfunction enabled(name) {\r\n  var i, len;\r\n  for (i = 0, len = exports.skips.length; i < len; i++) {\r\n    if (exports.skips[i].test(name)) {\r\n      return false;\r\n    }\r\n  }\r\n  for (i = 0, len = exports.names.length; i < len; i++) {\r\n    if (exports.names[i].test(name)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Coerce `val`.\r\n *\r\n * @param {Mixed} val\r\n * @return {Mixed}\r\n * @api private\r\n */\r\n\r\nfunction coerce(val) {\r\n  if (val instanceof Error) return val.stack || val.message;\r\n  return val;\r\n}\r\n\r\n},{\"ms\":35}],35:[function(require,module,exports){\r\n/**\r\n * Helpers.\r\n */\r\n\r\nvar s = 1000;\r\nvar m = s * 60;\r\nvar h = m * 60;\r\nvar d = h * 24;\r\nvar y = d * 365.25;\r\n\r\n/**\r\n * Parse or format the given `val`.\r\n *\r\n * Options:\r\n *\r\n *  - `long` verbose formatting [false]\r\n *\r\n * @param {String|Number} val\r\n * @param {Object} options\r\n * @return {String|Number}\r\n * @api public\r\n */\r\n\r\nmodule.exports = function(val, options){\r\n  options = options || {};\r\n  if ('string' == typeof val) return parse(val);\r\n  return options.long\r\n    ? long(val)\r\n    : short(val);\r\n};\r\n\r\n/**\r\n * Parse the given `str` and return milliseconds.\r\n *\r\n * @param {String} str\r\n * @return {Number}\r\n * @api private\r\n */\r\n\r\nfunction parse(str) {\r\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\r\n  if (!match) return;\r\n  var n = parseFloat(match[1]);\r\n  var type = (match[2] || 'ms').toLowerCase();\r\n  switch (type) {\r\n    case 'years':\r\n    case 'year':\r\n    case 'yrs':\r\n    case 'yr':\r\n    case 'y':\r\n      return n * y;\r\n    case 'days':\r\n    case 'day':\r\n    case 'd':\r\n      return n * d;\r\n    case 'hours':\r\n    case 'hour':\r\n    case 'hrs':\r\n    case 'hr':\r\n    case 'h':\r\n      return n * h;\r\n    case 'minutes':\r\n    case 'minute':\r\n    case 'mins':\r\n    case 'min':\r\n    case 'm':\r\n      return n * m;\r\n    case 'seconds':\r\n    case 'second':\r\n    case 'secs':\r\n    case 'sec':\r\n    case 's':\r\n      return n * s;\r\n    case 'milliseconds':\r\n    case 'millisecond':\r\n    case 'msecs':\r\n    case 'msec':\r\n    case 'ms':\r\n      return n;\r\n  }\r\n}\r\n\r\n/**\r\n * Short format for `ms`.\r\n *\r\n * @param {Number} ms\r\n * @return {String}\r\n * @api private\r\n */\r\n\r\nfunction short(ms) {\r\n  if (ms >= d) return Math.round(ms / d) + 'd';\r\n  if (ms >= h) return Math.round(ms / h) + 'h';\r\n  if (ms >= m) return Math.round(ms / m) + 'm';\r\n  if (ms >= s) return Math.round(ms / s) + 's';\r\n  return ms + 'ms';\r\n}\r\n\r\n/**\r\n * Long format for `ms`.\r\n *\r\n * @param {Number} ms\r\n * @return {String}\r\n * @api private\r\n */\r\n\r\nfunction long(ms) {\r\n  return plural(ms, d, 'day')\r\n    || plural(ms, h, 'hour')\r\n    || plural(ms, m, 'minute')\r\n    || plural(ms, s, 'second')\r\n    || ms + ' ms';\r\n}\r\n\r\n/**\r\n * Pluralization helper.\r\n */\r\n\r\nfunction plural(ms, n, name) {\r\n  if (ms < n) return;\r\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\r\n  return Math.ceil(ms / n) + ' ' + name + 's';\r\n}\r\n\r\n},{}]},{},[1])(1)\r\n});","!function($) {\r\n\r\n\"use strict\";\r\n\r\nvar FOUNDATION_VERSION = '6.2.2';\r\n\r\n// Global Foundation object\r\n// This is attached to the window, or used as a module for AMD/Browserify\r\nvar Foundation = {\r\n  version: FOUNDATION_VERSION,\r\n\r\n  /**\r\n   * Stores initialized plugins.\r\n   */\r\n  _plugins: {},\r\n\r\n  /**\r\n   * Stores generated unique ids for plugin instances\r\n   */\r\n  _uuids: [],\r\n\r\n  /**\r\n   * Returns a boolean for RTL support\r\n   */\r\n  rtl: function(){\r\n    return $('html').attr('dir') === 'rtl';\r\n  },\r\n  /**\r\n   * Defines a Foundation plugin, adding it to the `Foundation` namespace and the list of plugins to initialize when reflowing.\r\n   * @param {Object} plugin - The constructor of the plugin.\r\n   */\r\n  plugin: function(plugin, name) {\r\n    // Object key to use when adding to global Foundation object\r\n    // Examples: Foundation.Reveal, Foundation.OffCanvas\r\n    var className = (name || functionName(plugin));\r\n    // Object key to use when storing the plugin, also used to create the identifying data attribute for the plugin\r\n    // Examples: data-reveal, data-off-canvas\r\n    var attrName  = hyphenate(className);\r\n\r\n    // Add to the Foundation object and the plugins list (for reflowing)\r\n    this._plugins[attrName] = this[className] = plugin;\r\n  },\r\n  /**\r\n   * @function\r\n   * Populates the _uuids array with pointers to each individual plugin instance.\r\n   * Adds the `zfPlugin` data-attribute to programmatically created plugins to allow use of $(selector).foundation(method) calls.\r\n   * Also fires the initialization event for each plugin, consolidating repetitive code.\r\n   * @param {Object} plugin - an instance of a plugin, usually `this` in context.\r\n   * @param {String} name - the name of the plugin, passed as a camelCased string.\r\n   * @fires Plugin#init\r\n   */\r\n  registerPlugin: function(plugin, name){\r\n    var pluginName = name ? hyphenate(name) : functionName(plugin.constructor).toLowerCase();\r\n    plugin.uuid = this.GetYoDigits(6, pluginName);\r\n\r\n    if(!plugin.$element.attr(`data-${pluginName}`)){ plugin.$element.attr(`data-${pluginName}`, plugin.uuid); }\r\n    if(!plugin.$element.data('zfPlugin')){ plugin.$element.data('zfPlugin', plugin); }\r\n          /**\r\n           * Fires when the plugin has initialized.\r\n           * @event Plugin#init\r\n           */\r\n    plugin.$element.trigger(`init.zf.${pluginName}`);\r\n\r\n    this._uuids.push(plugin.uuid);\r\n\r\n    return;\r\n  },\r\n  /**\r\n   * @function\r\n   * Removes the plugins uuid from the _uuids array.\r\n   * Removes the zfPlugin data attribute, as well as the data-plugin-name attribute.\r\n   * Also fires the destroyed event for the plugin, consolidating repetitive code.\r\n   * @param {Object} plugin - an instance of a plugin, usually `this` in context.\r\n   * @fires Plugin#destroyed\r\n   */\r\n  unregisterPlugin: function(plugin){\r\n    var pluginName = hyphenate(functionName(plugin.$element.data('zfPlugin').constructor));\r\n\r\n    this._uuids.splice(this._uuids.indexOf(plugin.uuid), 1);\r\n    plugin.$element.removeAttr(`data-${pluginName}`).removeData('zfPlugin')\r\n          /**\r\n           * Fires when the plugin has been destroyed.\r\n           * @event Plugin#destroyed\r\n           */\r\n          .trigger(`destroyed.zf.${pluginName}`);\r\n    for(var prop in plugin){\r\n      plugin[prop] = null;//clean up script to prep for garbage collection.\r\n    }\r\n    return;\r\n  },\r\n\r\n  /**\r\n   * @function\r\n   * Causes one or more active plugins to re-initialize, resetting event listeners, recalculating positions, etc.\r\n   * @param {String} plugins - optional string of an individual plugin key, attained by calling `$(element).data('pluginName')`, or string of a plugin class i.e. `'dropdown'`\r\n   * @default If no argument is passed, reflow all currently active plugins.\r\n   */\r\n   reInit: function(plugins){\r\n     var isJQ = plugins instanceof $;\r\n     try{\r\n       if(isJQ){\r\n         plugins.each(function(){\r\n           $(this).data('zfPlugin')._init();\r\n         });\r\n       }else{\r\n         var type = typeof plugins,\r\n         _this = this,\r\n         fns = {\r\n           'object': function(plgs){\r\n             plgs.forEach(function(p){\r\n               p = hyphenate(p);\r\n               $('[data-'+ p +']').foundation('_init');\r\n             });\r\n           },\r\n           'string': function(){\r\n             plugins = hyphenate(plugins);\r\n             $('[data-'+ plugins +']').foundation('_init');\r\n           },\r\n           'undefined': function(){\r\n             this['object'](Object.keys(_this._plugins));\r\n           }\r\n         };\r\n         fns[type](plugins);\r\n       }\r\n     }catch(err){\r\n       console.error(err);\r\n     }finally{\r\n       return plugins;\r\n     }\r\n   },\r\n\r\n  /**\r\n   * returns a random base-36 uid with namespacing\r\n   * @function\r\n   * @param {Number} length - number of random base-36 digits desired. Increase for more random strings.\r\n   * @param {String} namespace - name of plugin to be incorporated in uid, optional.\r\n   * @default {String} '' - if no plugin name is provided, nothing is appended to the uid.\r\n   * @returns {String} - unique id\r\n   */\r\n  GetYoDigits: function(length, namespace){\r\n    length = length || 6;\r\n    return Math.round((Math.pow(36, length + 1) - Math.random() * Math.pow(36, length))).toString(36).slice(1) + (namespace ? `-${namespace}` : '');\r\n  },\r\n  /**\r\n   * Initialize plugins on any elements within `elem` (and `elem` itself) that aren't already initialized.\r\n   * @param {Object} elem - jQuery object containing the element to check inside. Also checks the element itself, unless it's the `document` object.\r\n   * @param {String|Array} plugins - A list of plugins to initialize. Leave this out to initialize everything.\r\n   */\r\n  reflow: function(elem, plugins) {\r\n\r\n    // If plugins is undefined, just grab everything\r\n    if (typeof plugins === 'undefined') {\r\n      plugins = Object.keys(this._plugins);\r\n    }\r\n    // If plugins is a string, convert it to an array with one item\r\n    else if (typeof plugins === 'string') {\r\n      plugins = [plugins];\r\n    }\r\n\r\n    var _this = this;\r\n\r\n    // Iterate through each plugin\r\n    $.each(plugins, function(i, name) {\r\n      // Get the current plugin\r\n      var plugin = _this._plugins[name];\r\n\r\n      // Localize the search to all elements inside elem, as well as elem itself, unless elem === document\r\n      var $elem = $(elem).find('[data-'+name+']').addBack('[data-'+name+']');\r\n\r\n      // For each plugin found, initialize it\r\n      $elem.each(function() {\r\n        var $el = $(this),\r\n            opts = {};\r\n        // Don't double-dip on plugins\r\n        if ($el.data('zfPlugin')) {\r\n          console.warn(\"Tried to initialize \"+name+\" on an element that already has a Foundation plugin.\");\r\n          return;\r\n        }\r\n\r\n        if($el.attr('data-options')){\r\n          var thing = $el.attr('data-options').split(';').forEach(function(e, i){\r\n            var opt = e.split(':').map(function(el){ return el.trim(); });\r\n            if(opt[0]) opts[opt[0]] = parseValue(opt[1]);\r\n          });\r\n        }\r\n        try{\r\n          $el.data('zfPlugin', new plugin($(this), opts));\r\n        }catch(er){\r\n          console.error(er);\r\n        }finally{\r\n          return;\r\n        }\r\n      });\r\n    });\r\n  },\r\n  getFnName: functionName,\r\n  transitionend: function($elem){\r\n    var transitions = {\r\n      'transition': 'transitionend',\r\n      'WebkitTransition': 'webkitTransitionEnd',\r\n      'MozTransition': 'transitionend',\r\n      'OTransition': 'otransitionend'\r\n    };\r\n    var elem = document.createElement('div'),\r\n        end;\r\n\r\n    for (var t in transitions){\r\n      if (typeof elem.style[t] !== 'undefined'){\r\n        end = transitions[t];\r\n      }\r\n    }\r\n    if(end){\r\n      return end;\r\n    }else{\r\n      end = setTimeout(function(){\r\n        $elem.triggerHandler('transitionend', [$elem]);\r\n      }, 1);\r\n      return 'transitionend';\r\n    }\r\n  }\r\n};\r\n\r\nFoundation.util = {\r\n  /**\r\n   * Function for applying a debounce effect to a function call.\r\n   * @function\r\n   * @param {Function} func - Function to be called at end of timeout.\r\n   * @param {Number} delay - Time in ms to delay the call of `func`.\r\n   * @returns function\r\n   */\r\n  throttle: function (func, delay) {\r\n    var timer = null;\r\n\r\n    return function () {\r\n      var context = this, args = arguments;\r\n\r\n      if (timer === null) {\r\n        timer = setTimeout(function () {\r\n          func.apply(context, args);\r\n          timer = null;\r\n        }, delay);\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\n// TODO: consider not making this a jQuery function\r\n// TODO: need way to reflow vs. re-initialize\r\n/**\r\n * The Foundation jQuery method.\r\n * @param {String|Array} method - An action to perform on the current jQuery object.\r\n */\r\nvar foundation = function(method) {\r\n  var type = typeof method,\r\n      $meta = $('meta.foundation-mq'),\r\n      $noJS = $('.no-js');\r\n\r\n  if(!$meta.length){\r\n    $('<meta class=\"foundation-mq\">').appendTo(document.head);\r\n  }\r\n  if($noJS.length){\r\n    $noJS.removeClass('no-js');\r\n  }\r\n\r\n  if(type === 'undefined'){//needs to initialize the Foundation object, or an individual plugin.\r\n    Foundation.MediaQuery._init();\r\n    Foundation.reflow(this);\r\n  }else if(type === 'string'){//an individual method to invoke on a plugin or group of plugins\r\n    var args = Array.prototype.slice.call(arguments, 1);//collect all the arguments, if necessary\r\n    var plugClass = this.data('zfPlugin');//determine the class of plugin\r\n\r\n    if(plugClass !== undefined && plugClass[method] !== undefined){//make sure both the class and method exist\r\n      if(this.length === 1){//if there's only one, call it directly.\r\n          plugClass[method].apply(plugClass, args);\r\n      }else{\r\n        this.each(function(i, el){//otherwise loop through the jQuery collection and invoke the method on each\r\n          plugClass[method].apply($(el).data('zfPlugin'), args);\r\n        });\r\n      }\r\n    }else{//error for no class or no method\r\n      throw new ReferenceError(\"We're sorry, '\" + method + \"' is not an available method for \" + (plugClass ? functionName(plugClass) : 'this element') + '.');\r\n    }\r\n  }else{//error for invalid argument type\r\n    throw new TypeError(`We're sorry, ${type} is not a valid parameter. You must use a string representing the method you wish to invoke.`);\r\n  }\r\n  return this;\r\n};\r\n\r\nwindow.Foundation = Foundation;\r\n$.fn.foundation = foundation;\r\n\r\n// Polyfill for requestAnimationFrame\r\n(function() {\r\n  if (!Date.now || !window.Date.now)\r\n    window.Date.now = Date.now = function() { return new Date().getTime(); };\r\n\r\n  var vendors = ['webkit', 'moz'];\r\n  for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\r\n      var vp = vendors[i];\r\n      window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\r\n      window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame']\r\n                                 || window[vp+'CancelRequestAnimationFrame']);\r\n  }\r\n  if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)\r\n    || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\r\n    var lastTime = 0;\r\n    window.requestAnimationFrame = function(callback) {\r\n        var now = Date.now();\r\n        var nextTime = Math.max(lastTime + 16, now);\r\n        return setTimeout(function() { callback(lastTime = nextTime); },\r\n                          nextTime - now);\r\n    };\r\n    window.cancelAnimationFrame = clearTimeout;\r\n  }\r\n  /**\r\n   * Polyfill for performance.now, required by rAF\r\n   */\r\n  if(!window.performance || !window.performance.now){\r\n    window.performance = {\r\n      start: Date.now(),\r\n      now: function(){ return Date.now() - this.start; }\r\n    };\r\n  }\r\n})();\r\nif (!Function.prototype.bind) {\r\n  Function.prototype.bind = function(oThis) {\r\n    if (typeof this !== 'function') {\r\n      // closest thing possible to the ECMAScript 5\r\n      // internal IsCallable function\r\n      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\r\n    }\r\n\r\n    var aArgs   = Array.prototype.slice.call(arguments, 1),\r\n        fToBind = this,\r\n        fNOP    = function() {},\r\n        fBound  = function() {\r\n          return fToBind.apply(this instanceof fNOP\r\n                 ? this\r\n                 : oThis,\r\n                 aArgs.concat(Array.prototype.slice.call(arguments)));\r\n        };\r\n\r\n    if (this.prototype) {\r\n      // native functions don't have a prototype\r\n      fNOP.prototype = this.prototype;\r\n    }\r\n    fBound.prototype = new fNOP();\r\n\r\n    return fBound;\r\n  };\r\n}\r\n// Polyfill to get the name of a function in IE9\r\nfunction functionName(fn) {\r\n  if (Function.prototype.name === undefined) {\r\n    var funcNameRegex = /function\\s([^(]{1,})\\(/;\r\n    var results = (funcNameRegex).exec((fn).toString());\r\n    return (results && results.length > 1) ? results[1].trim() : \"\";\r\n  }\r\n  else if (fn.prototype === undefined) {\r\n    return fn.constructor.name;\r\n  }\r\n  else {\r\n    return fn.prototype.constructor.name;\r\n  }\r\n}\r\nfunction parseValue(str){\r\n  if(/true/.test(str)) return true;\r\n  else if(/false/.test(str)) return false;\r\n  else if(!isNaN(str * 1)) return parseFloat(str);\r\n  return str;\r\n}\r\n// Convert PascalCase to kebab-case\r\n// Thank you: http://stackoverflow.com/a/8955580\r\nfunction hyphenate(str) {\r\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\n}(jQuery);\r\n","/*******************************************\r\n *                                         *\r\n * This util was created by Marius Olbertz *\r\n * Please thank Marius on GitHub /owlbertz *\r\n * or the web http://www.mariusolbertz.de/ *\r\n *                                         *\r\n ******************************************/\r\n\r\n'use strict';\r\n\r\n!function($) {\r\n\r\nconst keyCodes = {\r\n  9: 'TAB',\r\n  13: 'ENTER',\r\n  27: 'ESCAPE',\r\n  32: 'SPACE',\r\n  37: 'ARROW_LEFT',\r\n  38: 'ARROW_UP',\r\n  39: 'ARROW_RIGHT',\r\n  40: 'ARROW_DOWN'\r\n}\r\n\r\nvar commands = {}\r\n\r\nvar Keyboard = {\r\n  keys: getKeyCodes(keyCodes),\r\n\r\n  /**\r\n   * Parses the (keyboard) event and returns a String that represents its key\r\n   * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\r\n   * @param {Event} event - the event generated by the event handler\r\n   * @return String key - String that represents the key pressed\r\n   */\r\n  parseKey(event) {\r\n    var key = keyCodes[event.which || event.keyCode] || String.fromCharCode(event.which).toUpperCase();\r\n    if (event.shiftKey) key = `SHIFT_${key}`;\r\n    if (event.ctrlKey) key = `CTRL_${key}`;\r\n    if (event.altKey) key = `ALT_${key}`;\r\n    return key;\r\n  },\r\n\r\n  /**\r\n   * Handles the given (keyboard) event\r\n   * @param {Event} event - the event generated by the event handler\r\n   * @param {String} component - Foundation component's name, e.g. Slider or Reveal\r\n   * @param {Objects} functions - collection of functions that are to be executed\r\n   */\r\n  handleKey(event, component, functions) {\r\n    var commandList = commands[component],\r\n      keyCode = this.parseKey(event),\r\n      cmds,\r\n      command,\r\n      fn;\r\n\r\n    if (!commandList) return console.warn('Component not defined!');\r\n\r\n    if (typeof commandList.ltr === 'undefined') { // this component does not differentiate between ltr and rtl\r\n        cmds = commandList; // use plain list\r\n    } else { // merge ltr and rtl: if document is rtl, rtl overwrites ltr and vice versa\r\n        if (Foundation.rtl()) cmds = $.extend({}, commandList.ltr, commandList.rtl);\r\n\r\n        else cmds = $.extend({}, commandList.rtl, commandList.ltr);\r\n    }\r\n    command = cmds[keyCode];\r\n\r\n    fn = functions[command];\r\n    if (fn && typeof fn === 'function') { // execute function  if exists\r\n      var returnValue = fn.apply();\r\n      if (functions.handled || typeof functions.handled === 'function') { // execute function when event was handled\r\n          functions.handled(returnValue);\r\n      }\r\n    } else {\r\n      if (functions.unhandled || typeof functions.unhandled === 'function') { // execute function when event was not handled\r\n          functions.unhandled();\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Finds all focusable elements within the given `$element`\r\n   * @param {jQuery} $element - jQuery object to search within\r\n   * @return {jQuery} $focusable - all focusable elements within `$element`\r\n   */\r\n  findFocusable($element) {\r\n    return $element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function() {\r\n      if (!$(this).is(':visible') || $(this).attr('tabindex') < 0) { return false; } //only have visible elements and those that have a tabindex greater or equal 0\r\n      return true;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Returns the component name name\r\n   * @param {Object} component - Foundation component, e.g. Slider or Reveal\r\n   * @return String componentName\r\n   */\r\n\r\n  register(componentName, cmds) {\r\n    commands[componentName] = cmds;\r\n  }\r\n}\r\n\r\n/*\r\n * Constants for easier comparing.\r\n * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\r\n */\r\nfunction getKeyCodes(kcs) {\r\n  var k = {};\r\n  for (var kc in kcs) k[kcs[kc]] = kcs[kc];\r\n  return k;\r\n}\r\n\r\nFoundation.Keyboard = Keyboard;\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\nFoundation.Box = {\r\n  ImNotTouchingYou: ImNotTouchingYou,\r\n  GetDimensions: GetDimensions,\r\n  GetOffsets: GetOffsets\r\n}\r\n\r\n/**\r\n * Compares the dimensions of an element to a container and determines collision events with container.\r\n * @function\r\n * @param {jQuery} element - jQuery object to test for collisions.\r\n * @param {jQuery} parent - jQuery object to use as bounding container.\r\n * @param {Boolean} lrOnly - set to true to check left and right values only.\r\n * @param {Boolean} tbOnly - set to true to check top and bottom values only.\r\n * @default if no parent object passed, detects collisions with `window`.\r\n * @returns {Boolean} - true if collision free, false if a collision in any direction.\r\n */\r\nfunction ImNotTouchingYou(element, parent, lrOnly, tbOnly) {\r\n  var eleDims = GetDimensions(element),\r\n      top, bottom, left, right;\r\n\r\n  if (parent) {\r\n    var parDims = GetDimensions(parent);\r\n\r\n    bottom = (eleDims.offset.top + eleDims.height <= parDims.height + parDims.offset.top);\r\n    top    = (eleDims.offset.top >= parDims.offset.top);\r\n    left   = (eleDims.offset.left >= parDims.offset.left);\r\n    right  = (eleDims.offset.left + eleDims.width <= parDims.width + parDims.offset.left);\r\n  }\r\n  else {\r\n    bottom = (eleDims.offset.top + eleDims.height <= eleDims.windowDims.height + eleDims.windowDims.offset.top);\r\n    top    = (eleDims.offset.top >= eleDims.windowDims.offset.top);\r\n    left   = (eleDims.offset.left >= eleDims.windowDims.offset.left);\r\n    right  = (eleDims.offset.left + eleDims.width <= eleDims.windowDims.width);\r\n  }\r\n\r\n  var allDirs = [bottom, top, left, right];\r\n\r\n  if (lrOnly) {\r\n    return left === right === true;\r\n  }\r\n\r\n  if (tbOnly) {\r\n    return top === bottom === true;\r\n  }\r\n\r\n  return allDirs.indexOf(false) === -1;\r\n};\r\n\r\n/**\r\n * Uses native methods to return an object of dimension values.\r\n * @function\r\n * @param {jQuery || HTML} element - jQuery object or DOM element for which to get the dimensions. Can be any element other that document or window.\r\n * @returns {Object} - nested object of integer pixel values\r\n * TODO - if element is window, return only those values.\r\n */\r\nfunction GetDimensions(elem, test){\r\n  elem = elem.length ? elem[0] : elem;\r\n\r\n  if (elem === window || elem === document) {\r\n    throw new Error(\"I'm sorry, Dave. I'm afraid I can't do that.\");\r\n  }\r\n\r\n  var rect = elem.getBoundingClientRect(),\r\n      parRect = elem.parentNode.getBoundingClientRect(),\r\n      winRect = document.body.getBoundingClientRect(),\r\n      winY = window.pageYOffset,\r\n      winX = window.pageXOffset;\r\n\r\n  return {\r\n    width: rect.width,\r\n    height: rect.height,\r\n    offset: {\r\n      top: rect.top + winY,\r\n      left: rect.left + winX\r\n    },\r\n    parentDims: {\r\n      width: parRect.width,\r\n      height: parRect.height,\r\n      offset: {\r\n        top: parRect.top + winY,\r\n        left: parRect.left + winX\r\n      }\r\n    },\r\n    windowDims: {\r\n      width: winRect.width,\r\n      height: winRect.height,\r\n      offset: {\r\n        top: winY,\r\n        left: winX\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Returns an object of top and left integer pixel values for dynamically rendered elements,\r\n * such as: Tooltip, Reveal, and Dropdown\r\n * @function\r\n * @param {jQuery} element - jQuery object for the element being positioned.\r\n * @param {jQuery} anchor - jQuery object for the element's anchor point.\r\n * @param {String} position - a string relating to the desired position of the element, relative to it's anchor\r\n * @param {Number} vOffset - integer pixel value of desired vertical separation between anchor and element.\r\n * @param {Number} hOffset - integer pixel value of desired horizontal separation between anchor and element.\r\n * @param {Boolean} isOverflow - if a collision event is detected, sets to true to default the element to full width - any desired offset.\r\n * TODO alter/rewrite to work with `em` values as well/instead of pixels\r\n */\r\nfunction GetOffsets(element, anchor, position, vOffset, hOffset, isOverflow) {\r\n  var $eleDims = GetDimensions(element),\r\n      $anchorDims = anchor ? GetDimensions(anchor) : null;\r\n\r\n  switch (position) {\r\n    case 'top':\r\n      return {\r\n        left: (Foundation.rtl() ? $anchorDims.offset.left - $eleDims.width + $anchorDims.width : $anchorDims.offset.left),\r\n        top: $anchorDims.offset.top - ($eleDims.height + vOffset)\r\n      }\r\n      break;\r\n    case 'left':\r\n      return {\r\n        left: $anchorDims.offset.left - ($eleDims.width + hOffset),\r\n        top: $anchorDims.offset.top\r\n      }\r\n      break;\r\n    case 'right':\r\n      return {\r\n        left: $anchorDims.offset.left + $anchorDims.width + hOffset,\r\n        top: $anchorDims.offset.top\r\n      }\r\n      break;\r\n    case 'center top':\r\n      return {\r\n        left: ($anchorDims.offset.left + ($anchorDims.width / 2)) - ($eleDims.width / 2),\r\n        top: $anchorDims.offset.top - ($eleDims.height + vOffset)\r\n      }\r\n      break;\r\n    case 'center bottom':\r\n      return {\r\n        left: isOverflow ? hOffset : (($anchorDims.offset.left + ($anchorDims.width / 2)) - ($eleDims.width / 2)),\r\n        top: $anchorDims.offset.top + $anchorDims.height + vOffset\r\n      }\r\n      break;\r\n    case 'center left':\r\n      return {\r\n        left: $anchorDims.offset.left - ($eleDims.width + hOffset),\r\n        top: ($anchorDims.offset.top + ($anchorDims.height / 2)) - ($eleDims.height / 2)\r\n      }\r\n      break;\r\n    case 'center right':\r\n      return {\r\n        left: $anchorDims.offset.left + $anchorDims.width + hOffset + 1,\r\n        top: ($anchorDims.offset.top + ($anchorDims.height / 2)) - ($eleDims.height / 2)\r\n      }\r\n      break;\r\n    case 'center':\r\n      return {\r\n        left: ($eleDims.windowDims.offset.left + ($eleDims.windowDims.width / 2)) - ($eleDims.width / 2),\r\n        top: ($eleDims.windowDims.offset.top + ($eleDims.windowDims.height / 2)) - ($eleDims.height / 2)\r\n      }\r\n      break;\r\n    case 'reveal':\r\n      return {\r\n        left: ($eleDims.windowDims.width - $eleDims.width) / 2,\r\n        top: $eleDims.windowDims.offset.top + vOffset\r\n      }\r\n    case 'reveal full':\r\n      return {\r\n        left: $eleDims.windowDims.offset.left,\r\n        top: $eleDims.windowDims.offset.top\r\n      }\r\n      break;\r\n    case 'left bottom':\r\n      return {\r\n        left: $anchorDims.offset.left - ($eleDims.width + hOffset),\r\n        top: $anchorDims.offset.top + $anchorDims.height\r\n      };\r\n      break;\r\n    case 'right bottom':\r\n      return {\r\n        left: $anchorDims.offset.left + $anchorDims.width + hOffset - $eleDims.width,\r\n        top: $anchorDims.offset.top + $anchorDims.height\r\n      };\r\n      break;\r\n    default:\r\n      return {\r\n        left: (Foundation.rtl() ? $anchorDims.offset.left - $eleDims.width + $anchorDims.width : $anchorDims.offset.left),\r\n        top: $anchorDims.offset.top + $anchorDims.height + vOffset\r\n      }\r\n  }\r\n}\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\nconst Nest = {\r\n  Feather(menu, type = 'zf') {\r\n    menu.attr('role', 'menubar');\r\n\r\n    var items = menu.find('li').attr({'role': 'menuitem'}),\r\n        subMenuClass = `is-${type}-submenu`,\r\n        subItemClass = `${subMenuClass}-item`,\r\n        hasSubClass = `is-${type}-submenu-parent`;\r\n\r\n    menu.find('a:first').attr('tabindex', 0);\r\n\r\n    items.each(function() {\r\n      var $item = $(this),\r\n          $sub = $item.children('ul');\r\n\r\n      if ($sub.length) {\r\n        $item\r\n          .addClass(hasSubClass)\r\n          .attr({\r\n            'aria-haspopup': true,\r\n            'aria-expanded': false,\r\n            'aria-label': $item.children('a:first').text()\r\n          });\r\n\r\n        $sub\r\n          .addClass(`submenu ${subMenuClass}`)\r\n          .attr({\r\n            'data-submenu': '',\r\n            'aria-hidden': true,\r\n            'role': 'menu'\r\n          });\r\n      }\r\n\r\n      if ($item.parent('[data-submenu]').length) {\r\n        $item.addClass(`is-submenu-item ${subItemClass}`);\r\n      }\r\n    });\r\n\r\n    return;\r\n  },\r\n\r\n  Burn(menu, type) {\r\n    var items = menu.find('li').removeAttr('tabindex'),\r\n        subMenuClass = `is-${type}-submenu`,\r\n        subItemClass = `${subMenuClass}-item`,\r\n        hasSubClass = `is-${type}-submenu-parent`;\r\n\r\n    menu\r\n      .find('*')\r\n      .removeClass(`${subMenuClass} ${subItemClass} ${hasSubClass} is-submenu-item submenu is-active`)\r\n      .removeAttr('data-submenu').css('display', '');\r\n\r\n    // console.log(      menu.find('.' + subMenuClass + ', .' + subItemClass + ', .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\r\n    //           .removeClass(subMenuClass + ' ' + subItemClass + ' has-submenu is-submenu-item submenu')\r\n    //           .removeAttr('data-submenu'));\r\n    // items.each(function(){\r\n    //   var $item = $(this),\r\n    //       $sub = $item.children('ul');\r\n    //   if($item.parent('[data-submenu]').length){\r\n    //     $item.removeClass('is-submenu-item ' + subItemClass);\r\n    //   }\r\n    //   if($sub.length){\r\n    //     $item.removeClass('has-submenu');\r\n    //     $sub.removeClass('submenu ' + subMenuClass).removeAttr('data-submenu');\r\n    //   }\r\n    // });\r\n  }\r\n}\r\n\r\nFoundation.Nest = Nest;\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n// Default set of media queries\r\nconst defaultQueries = {\r\n  'default' : 'only screen',\r\n  landscape : 'only screen and (orientation: landscape)',\r\n  portrait : 'only screen and (orientation: portrait)',\r\n  retina : 'only screen and (-webkit-min-device-pixel-ratio: 2),' +\r\n    'only screen and (min--moz-device-pixel-ratio: 2),' +\r\n    'only screen and (-o-min-device-pixel-ratio: 2/1),' +\r\n    'only screen and (min-device-pixel-ratio: 2),' +\r\n    'only screen and (min-resolution: 192dpi),' +\r\n    'only screen and (min-resolution: 2dppx)'\r\n};\r\n\r\nvar MediaQuery = {\r\n  queries: [],\r\n\r\n  current: '',\r\n\r\n  /**\r\n   * Initializes the media query helper, by extracting the breakpoint list from the CSS and activating the breakpoint watcher.\r\n   * @function\r\n   * @private\r\n   */\r\n  _init() {\r\n    var self = this;\r\n    var extractedStyles = $('.foundation-mq').css('font-family');\r\n    var namedQueries;\r\n\r\n    namedQueries = parseStyleToObject(extractedStyles);\r\n\r\n    for (var key in namedQueries) {\r\n      if(namedQueries.hasOwnProperty(key)) {\r\n        self.queries.push({\r\n          name: key,\r\n          value: `only screen and (min-width: ${namedQueries[key]})`\r\n        });\r\n      }\r\n    }\r\n\r\n    this.current = this._getCurrentSize();\r\n\r\n    this._watcher();\r\n  },\r\n\r\n  /**\r\n   * Checks if the screen is at least as wide as a breakpoint.\r\n   * @function\r\n   * @param {String} size - Name of the breakpoint to check.\r\n   * @returns {Boolean} `true` if the breakpoint matches, `false` if it's smaller.\r\n   */\r\n  atLeast(size) {\r\n    var query = this.get(size);\r\n\r\n    if (query) {\r\n      return window.matchMedia(query).matches;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  /**\r\n   * Gets the media query of a breakpoint.\r\n   * @function\r\n   * @param {String} size - Name of the breakpoint to get.\r\n   * @returns {String|null} - The media query of the breakpoint, or `null` if the breakpoint doesn't exist.\r\n   */\r\n  get(size) {\r\n    for (var i in this.queries) {\r\n      if(this.queries.hasOwnProperty(i)) {\r\n        var query = this.queries[i];\r\n        if (size === query.name) return query.value;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  /**\r\n   * Gets the current breakpoint name by testing every breakpoint and returning the last one to match (the biggest one).\r\n   * @function\r\n   * @private\r\n   * @returns {String} Name of the current breakpoint.\r\n   */\r\n  _getCurrentSize() {\r\n    var matched;\r\n\r\n    for (var i = 0; i < this.queries.length; i++) {\r\n      var query = this.queries[i];\r\n\r\n      if (window.matchMedia(query.value).matches) {\r\n        matched = query;\r\n      }\r\n    }\r\n\r\n    if (typeof matched === 'object') {\r\n      return matched.name;\r\n    } else {\r\n      return matched;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Activates the breakpoint watcher, which fires an event on the window whenever the breakpoint changes.\r\n   * @function\r\n   * @private\r\n   */\r\n  _watcher() {\r\n    $(window).on('resize.zf.mediaquery', () => {\r\n      var newSize = this._getCurrentSize(), currentSize = this.current;\r\n\r\n      if (newSize !== currentSize) {\r\n        // Change the current media query\r\n        this.current = newSize;\r\n\r\n        // Broadcast the media query change on the window\r\n        $(window).trigger('changed.zf.mediaquery', [newSize, currentSize]);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nFoundation.MediaQuery = MediaQuery;\r\n\r\n// matchMedia() polyfill - Test a CSS media type/query in JS.\r\n// Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license\r\nwindow.matchMedia || (window.matchMedia = function() {\r\n  'use strict';\r\n\r\n  // For browsers that support matchMedium api such as IE 9 and webkit\r\n  var styleMedia = (window.styleMedia || window.media);\r\n\r\n  // For those that don't support matchMedium\r\n  if (!styleMedia) {\r\n    var style   = document.createElement('style'),\r\n    script      = document.getElementsByTagName('script')[0],\r\n    info        = null;\r\n\r\n    style.type  = 'text/css';\r\n    style.id    = 'matchmediajs-test';\r\n\r\n    script.parentNode.insertBefore(style, script);\r\n\r\n    // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\r\n    info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;\r\n\r\n    styleMedia = {\r\n      matchMedium(media) {\r\n        var text = `@media ${media}{ #matchmediajs-test { width: 1px; } }`;\r\n\r\n        // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\r\n        if (style.styleSheet) {\r\n          style.styleSheet.cssText = text;\r\n        } else {\r\n          style.textContent = text;\r\n        }\r\n\r\n        // Test if media query is true or false\r\n        return info.width === '1px';\r\n      }\r\n    }\r\n  }\r\n\r\n  return function(media) {\r\n    return {\r\n      matches: styleMedia.matchMedium(media || 'all'),\r\n      media: media || 'all'\r\n    };\r\n  }\r\n}());\r\n\r\n// Thank you: https://github.com/sindresorhus/query-string\r\nfunction parseStyleToObject(str) {\r\n  var styleObject = {};\r\n\r\n  if (typeof str !== 'string') {\r\n    return styleObject;\r\n  }\r\n\r\n  str = str.trim().slice(1, -1); // browsers re-quote string style values\r\n\r\n  if (!str) {\r\n    return styleObject;\r\n  }\r\n\r\n  styleObject = str.split('&').reduce(function(ret, param) {\r\n    var parts = param.replace(/\\+/g, ' ').split('=');\r\n    var key = parts[0];\r\n    var val = parts[1];\r\n    key = decodeURIComponent(key);\r\n\r\n    // missing `=` should be `null`:\r\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\r\n    val = val === undefined ? null : decodeURIComponent(val);\r\n\r\n    if (!ret.hasOwnProperty(key)) {\r\n      ret[key] = val;\r\n    } else if (Array.isArray(ret[key])) {\r\n      ret[key].push(val);\r\n    } else {\r\n      ret[key] = [ret[key], val];\r\n    }\r\n    return ret;\r\n  }, {});\r\n\r\n  return styleObject;\r\n}\r\n\r\nFoundation.MediaQuery = MediaQuery;\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\nconst MutationObserver = (function () {\r\n  var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\r\n  for (var i=0; i < prefixes.length; i++) {\r\n    if (`${prefixes[i]}MutationObserver` in window) {\r\n      return window[`${prefixes[i]}MutationObserver`];\r\n    }\r\n  }\r\n  return false;\r\n}());\r\n\r\nconst triggers = (el, type) => {\r\n  el.data(type).split(' ').forEach(id => {\r\n    $(`#${id}`)[ type === 'close' ? 'trigger' : 'triggerHandler'](`${type}.zf.trigger`, [el]);\r\n  });\r\n};\r\n// Elements with [data-open] will reveal a plugin that supports it when clicked.\r\n$(document).on('click.zf.trigger', '[data-open]', function() {\r\n  triggers($(this), 'open');\r\n});\r\n\r\n// Elements with [data-close] will close a plugin that supports it when clicked.\r\n// If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\r\n$(document).on('click.zf.trigger', '[data-close]', function() {\r\n  let id = $(this).data('close');\r\n  if (id) {\r\n    triggers($(this), 'close');\r\n  }\r\n  else {\r\n    $(this).trigger('close.zf.trigger');\r\n  }\r\n});\r\n\r\n// Elements with [data-toggle] will toggle a plugin that supports it when clicked.\r\n$(document).on('click.zf.trigger', '[data-toggle]', function() {\r\n  triggers($(this), 'toggle');\r\n});\r\n\r\n// Elements with [data-closable] will respond to close.zf.trigger events.\r\n$(document).on('close.zf.trigger', '[data-closable]', function(e){\r\n  e.stopPropagation();\r\n  let animation = $(this).data('closable');\r\n\r\n  if(animation !== ''){\r\n    Foundation.Motion.animateOut($(this), animation, function() {\r\n      $(this).trigger('closed.zf');\r\n    });\r\n  }else{\r\n    $(this).fadeOut().trigger('closed.zf');\r\n  }\r\n});\r\n\r\n$(document).on('focus.zf.trigger blur.zf.trigger', '[data-toggle-focus]', function() {\r\n  let id = $(this).data('toggle-focus');\r\n  $(`#${id}`).triggerHandler('toggle.zf.trigger', [$(this)]);\r\n});\r\n\r\n/**\r\n* Fires once after all other scripts have loaded\r\n* @function\r\n* @private\r\n*/\r\n$(window).load(() => {\r\n  checkListeners();\r\n});\r\n\r\nfunction checkListeners() {\r\n  eventsListener();\r\n  resizeListener();\r\n  scrollListener();\r\n  closemeListener();\r\n}\r\n\r\n//******** only fires this function once on load, if there's something to watch ********\r\nfunction closemeListener(pluginName) {\r\n  var yetiBoxes = $('[data-yeti-box]'),\r\n      plugNames = ['dropdown', 'tooltip', 'reveal'];\r\n\r\n  if(pluginName){\r\n    if(typeof pluginName === 'string'){\r\n      plugNames.push(pluginName);\r\n    }else if(typeof pluginName === 'object' && typeof pluginName[0] === 'string'){\r\n      plugNames.concat(pluginName);\r\n    }else{\r\n      console.error('Plugin names must be strings');\r\n    }\r\n  }\r\n  if(yetiBoxes.length){\r\n    let listeners = plugNames.map((name) => {\r\n      return `closeme.zf.${name}`;\r\n    }).join(' ');\r\n\r\n    $(window).off(listeners).on(listeners, function(e, pluginId){\r\n      let plugin = e.namespace.split('.')[0];\r\n      let plugins = $(`[data-${plugin}]`).not(`[data-yeti-box=\"${pluginId}\"]`);\r\n\r\n      plugins.each(function(){\r\n        let _this = $(this);\r\n\r\n        _this.triggerHandler('close.zf.trigger', [_this]);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction resizeListener(debounce){\r\n  let timer,\r\n      $nodes = $('[data-resize]');\r\n  if($nodes.length){\r\n    $(window).off('resize.zf.trigger')\r\n    .on('resize.zf.trigger', function(e) {\r\n      if (timer) { clearTimeout(timer); }\r\n\r\n      timer = setTimeout(function(){\r\n\r\n        if(!MutationObserver){//fallback for IE 9\r\n          $nodes.each(function(){\r\n            $(this).triggerHandler('resizeme.zf.trigger');\r\n          });\r\n        }\r\n        //trigger all listening elements and signal a resize event\r\n        $nodes.attr('data-events', \"resize\");\r\n      }, debounce || 10);//default time to emit resize event\r\n    });\r\n  }\r\n}\r\n\r\nfunction scrollListener(debounce){\r\n  let timer,\r\n      $nodes = $('[data-scroll]');\r\n  if($nodes.length){\r\n    $(window).off('scroll.zf.trigger')\r\n    .on('scroll.zf.trigger', function(e){\r\n      if(timer){ clearTimeout(timer); }\r\n\r\n      timer = setTimeout(function(){\r\n\r\n        if(!MutationObserver){//fallback for IE 9\r\n          $nodes.each(function(){\r\n            $(this).triggerHandler('scrollme.zf.trigger');\r\n          });\r\n        }\r\n        //trigger all listening elements and signal a scroll event\r\n        $nodes.attr('data-events', \"scroll\");\r\n      }, debounce || 10);//default time to emit scroll event\r\n    });\r\n  }\r\n}\r\n\r\nfunction eventsListener() {\r\n  if(!MutationObserver){ return false; }\r\n  let nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\r\n\r\n  //element callback\r\n  var listeningElementsMutation = function(mutationRecordsList) {\r\n    var $target = $(mutationRecordsList[0].target);\r\n    //trigger the event handler for the element depending on type\r\n    switch ($target.attr(\"data-events\")) {\r\n\r\n      case \"resize\" :\r\n      $target.triggerHandler('resizeme.zf.trigger', [$target]);\r\n      break;\r\n\r\n      case \"scroll\" :\r\n      $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\r\n      break;\r\n\r\n      // case \"mutate\" :\r\n      // console.log('mutate', $target);\r\n      // $target.triggerHandler('mutate.zf.trigger');\r\n      //\r\n      // //make sure we don't get stuck in an infinite loop from sloppy codeing\r\n      // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\r\n      //   domMutationObserver();\r\n      // }\r\n      // break;\r\n\r\n      default :\r\n      return false;\r\n      //nothing\r\n    }\r\n  }\r\n\r\n  if(nodes.length){\r\n    //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\r\n    for (var i = 0; i <= nodes.length-1; i++) {\r\n      let elementObserver = new MutationObserver(listeningElementsMutation);\r\n      elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree:false, attributeFilter:[\"data-events\"]});\r\n    }\r\n  }\r\n}\r\n\r\n// ------------------------------------\r\n\r\n// [PH]\r\n// Foundation.CheckWatchers = checkWatchers;\r\nFoundation.IHearYou = checkListeners;\r\n// Foundation.ISeeYou = scrollListener;\r\n// Foundation.IFeelYou = closemeListener;\r\n\r\n}(jQuery);\r\n\r\n// function domMutationObserver(debounce) {\r\n//   // !!! This is coming soon and needs more work; not active  !!! //\r\n//   var timer,\r\n//   nodes = document.querySelectorAll('[data-mutate]');\r\n//   //\r\n//   if (nodes.length) {\r\n//     // var MutationObserver = (function () {\r\n//     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\r\n//     //   for (var i=0; i < prefixes.length; i++) {\r\n//     //     if (prefixes[i] + 'MutationObserver' in window) {\r\n//     //       return window[prefixes[i] + 'MutationObserver'];\r\n//     //     }\r\n//     //   }\r\n//     //   return false;\r\n//     // }());\r\n//\r\n//\r\n//     //for the body, we need to listen for all changes effecting the style and class attributes\r\n//     var bodyObserver = new MutationObserver(bodyMutation);\r\n//     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\r\n//\r\n//\r\n//     //body callback\r\n//     function bodyMutation(mutate) {\r\n//       //trigger all listening elements and signal a mutation event\r\n//       if (timer) { clearTimeout(timer); }\r\n//\r\n//       timer = setTimeout(function() {\r\n//         bodyObserver.disconnect();\r\n//         $('[data-mutate]').attr('data-events',\"mutate\");\r\n//       }, debounce || 150);\r\n//     }\r\n//   }\r\n// }\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n/**\r\n * Motion module.\r\n * @module foundation.motion\r\n */\r\n\r\nconst initClasses   = ['mui-enter', 'mui-leave'];\r\nconst activeClasses = ['mui-enter-active', 'mui-leave-active'];\r\n\r\nconst Motion = {\r\n  animateIn: function(element, animation, cb) {\r\n    animate(true, element, animation, cb);\r\n  },\r\n\r\n  animateOut: function(element, animation, cb) {\r\n    animate(false, element, animation, cb);\r\n  }\r\n}\r\n\r\nfunction Move(duration, elem, fn){\r\n  var anim, prog, start = null;\r\n  // console.log('called');\r\n\r\n  function move(ts){\r\n    if(!start) start = window.performance.now();\r\n    // console.log(start, ts);\r\n    prog = ts - start;\r\n    fn.apply(elem);\r\n\r\n    if(prog < duration){ anim = window.requestAnimationFrame(move, elem); }\r\n    else{\r\n      window.cancelAnimationFrame(anim);\r\n      elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\r\n    }\r\n  }\r\n  anim = window.requestAnimationFrame(move);\r\n}\r\n\r\n/**\r\n * Animates an element in or out using a CSS transition class.\r\n * @function\r\n * @private\r\n * @param {Boolean} isIn - Defines if the animation is in or out.\r\n * @param {Object} element - jQuery or HTML object to animate.\r\n * @param {String} animation - CSS class to use.\r\n * @param {Function} cb - Callback to run when animation is finished.\r\n */\r\nfunction animate(isIn, element, animation, cb) {\r\n  element = $(element).eq(0);\r\n\r\n  if (!element.length) return;\r\n\r\n  var initClass = isIn ? initClasses[0] : initClasses[1];\r\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1];\r\n\r\n  // Set up the animation\r\n  reset();\r\n\r\n  element\r\n    .addClass(animation)\r\n    .css('transition', 'none');\r\n\r\n  requestAnimationFrame(() => {\r\n    element.addClass(initClass);\r\n    if (isIn) element.show();\r\n  });\r\n\r\n  // Start the animation\r\n  requestAnimationFrame(() => {\r\n    element[0].offsetWidth;\r\n    element\r\n      .css('transition', '')\r\n      .addClass(activeClass);\r\n  });\r\n\r\n  // Clean up the animation when it finishes\r\n  element.one(Foundation.transitionend(element), finish);\r\n\r\n  // Hides the element (for out animations), resets the element, and runs a callback\r\n  function finish() {\r\n    if (!isIn) element.hide();\r\n    reset();\r\n    if (cb) cb.apply(element);\r\n  }\r\n\r\n  // Resets transitions and removes motion-specific classes\r\n  function reset() {\r\n    element[0].style.transitionDuration = 0;\r\n    element.removeClass(`${initClass} ${activeClass} ${animation}`);\r\n  }\r\n}\r\n\r\nFoundation.Move = Move;\r\nFoundation.Motion = Motion;\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n/**\r\n * DropdownMenu module.\r\n * @module foundation.dropdown-menu\r\n * @requires foundation.util.keyboard\r\n * @requires foundation.util.box\r\n * @requires foundation.util.nest\r\n */\r\n\r\nclass DropdownMenu {\r\n  /**\r\n   * Creates a new instance of DropdownMenu.\r\n   * @class\r\n   * @fires DropdownMenu#init\r\n   * @param {jQuery} element - jQuery object to make into a dropdown menu.\r\n   * @param {Object} options - Overrides to the default plugin settings.\r\n   */\r\n  constructor(element, options) {\r\n    this.$element = element;\r\n    this.options = $.extend({}, DropdownMenu.defaults, this.$element.data(), options);\r\n\r\n    Foundation.Nest.Feather(this.$element, 'dropdown');\r\n    this._init();\r\n\r\n    Foundation.registerPlugin(this, 'DropdownMenu');\r\n    Foundation.Keyboard.register('DropdownMenu', {\r\n      'ENTER': 'open',\r\n      'SPACE': 'open',\r\n      'ARROW_RIGHT': 'next',\r\n      'ARROW_UP': 'up',\r\n      'ARROW_DOWN': 'down',\r\n      'ARROW_LEFT': 'previous',\r\n      'ESCAPE': 'close'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes the plugin, and calls _prepareMenu\r\n   * @private\r\n   * @function\r\n   */\r\n  _init() {\r\n    var subs = this.$element.find('li.is-dropdown-submenu-parent');\r\n    this.$element.children('.is-dropdown-submenu-parent').children('.is-dropdown-submenu').addClass('first-sub');\r\n\r\n    this.$menuItems = this.$element.find('[role=\"menuitem\"]');\r\n    this.$tabs = this.$element.children('[role=\"menuitem\"]');\r\n    this.$tabs.find('ul.is-dropdown-submenu').addClass(this.options.verticalClass);\r\n\r\n    if (this.$element.hasClass(this.options.rightClass) || this.options.alignment === 'right' || Foundation.rtl() || this.$element.parents('.top-bar-right').is('*')) {\r\n      this.options.alignment = 'right';\r\n      subs.addClass('opens-left');\r\n    } else {\r\n      subs.addClass('opens-right');\r\n    }\r\n    this.changed = false;\r\n    this._events();\r\n  };\r\n  /**\r\n   * Adds event listeners to elements within the menu\r\n   * @private\r\n   * @function\r\n   */\r\n  _events() {\r\n    var _this = this,\r\n        hasTouch = 'ontouchstart' in window || (typeof window.ontouchstart !== 'undefined'),\r\n        parClass = 'is-dropdown-submenu-parent';\r\n\r\n    // used for onClick and in the keyboard handlers\r\n    var handleClickFn = function(e) {\r\n      var $elem = $(e.target).parentsUntil('ul', `.${parClass}`),\r\n          hasSub = $elem.hasClass(parClass),\r\n          hasClicked = $elem.attr('data-is-click') === 'true',\r\n          $sub = $elem.children('.is-dropdown-submenu');\r\n\r\n      if (hasSub) {\r\n        if (hasClicked) {\r\n          if (!_this.options.closeOnClick || (!_this.options.clickOpen && !hasTouch) || (_this.options.forceFollow && hasTouch)) { return; }\r\n          else {\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n            _this._hide($elem);\r\n          }\r\n        } else {\r\n          e.preventDefault();\r\n          e.stopImmediatePropagation();\r\n          _this._show($elem.children('.is-dropdown-submenu'));\r\n          $elem.add($elem.parentsUntil(_this.$element, `.${parClass}`)).attr('data-is-click', true);\r\n        }\r\n      } else { return; }\r\n    };\r\n\r\n    if (this.options.clickOpen || hasTouch) {\r\n      this.$menuItems.on('click.zf.dropdownmenu touchstart.zf.dropdownmenu', handleClickFn);\r\n    }\r\n\r\n    if (!this.options.disableHover) {\r\n      this.$menuItems.on('mouseenter.zf.dropdownmenu', function(e) {\r\n        var $elem = $(this),\r\n            hasSub = $elem.hasClass(parClass);\r\n\r\n        if (hasSub) {\r\n          clearTimeout(_this.delay);\r\n          _this.delay = setTimeout(function() {\r\n            _this._show($elem.children('.is-dropdown-submenu'));\r\n          }, _this.options.hoverDelay);\r\n        }\r\n      }).on('mouseleave.zf.dropdownmenu', function(e) {\r\n        var $elem = $(this),\r\n            hasSub = $elem.hasClass(parClass);\r\n        if (hasSub && _this.options.autoclose) {\r\n          if ($elem.attr('data-is-click') === 'true' && _this.options.clickOpen) { return false; }\r\n\r\n          clearTimeout(_this.delay);\r\n          _this.delay = setTimeout(function() {\r\n            _this._hide($elem);\r\n          }, _this.options.closingTime);\r\n        }\r\n      });\r\n    }\r\n    this.$menuItems.on('keydown.zf.dropdownmenu', function(e) {\r\n      var $element = $(e.target).parentsUntil('ul', '[role=\"menuitem\"]'),\r\n          isTab = _this.$tabs.index($element) > -1,\r\n          $elements = isTab ? _this.$tabs : $element.siblings('li').add($element),\r\n          $prevElement,\r\n          $nextElement;\r\n\r\n      $elements.each(function(i) {\r\n        if ($(this).is($element)) {\r\n          $prevElement = $elements.eq(i-1);\r\n          $nextElement = $elements.eq(i+1);\r\n          return;\r\n        }\r\n      });\r\n\r\n      var nextSibling = function() {\r\n        if (!$element.is(':last-child')) {\r\n          $nextElement.children('a:first').focus();\r\n          e.preventDefault();\r\n        }\r\n      }, prevSibling = function() {\r\n        $prevElement.children('a:first').focus();\r\n        e.preventDefault();\r\n      }, openSub = function() {\r\n        var $sub = $element.children('ul.is-dropdown-submenu');\r\n        if ($sub.length) {\r\n          _this._show($sub);\r\n          $element.find('li > a:first').focus();\r\n          e.preventDefault();\r\n        } else { return; }\r\n      }, closeSub = function() {\r\n        //if ($element.is(':first-child')) {\r\n        var close = $element.parent('ul').parent('li');\r\n        close.children('a:first').focus();\r\n        _this._hide(close);\r\n        e.preventDefault();\r\n        //}\r\n      };\r\n      var functions = {\r\n        open: openSub,\r\n        close: function() {\r\n          _this._hide(_this.$element);\r\n          _this.$menuItems.find('a:first').focus(); // focus to first element\r\n          e.preventDefault();\r\n        },\r\n        handled: function() {\r\n          e.stopImmediatePropagation();\r\n        }\r\n      };\r\n\r\n      if (isTab) {\r\n        if (_this.$element.hasClass(_this.options.verticalClass)) { // vertical menu\r\n          if (_this.options.alignment === 'left') { // left aligned\r\n            $.extend(functions, {\r\n              down: nextSibling,\r\n              up: prevSibling,\r\n              next: openSub,\r\n              previous: closeSub\r\n            });\r\n          } else { // right aligned\r\n            $.extend(functions, {\r\n              down: nextSibling,\r\n              up: prevSibling,\r\n              next: closeSub,\r\n              previous: openSub\r\n            });\r\n          }\r\n        } else { // horizontal menu\r\n          $.extend(functions, {\r\n            next: nextSibling,\r\n            previous: prevSibling,\r\n            down: openSub,\r\n            up: closeSub\r\n          });\r\n        }\r\n      } else { // not tabs -> one sub\r\n        if (_this.options.alignment === 'left') { // left aligned\r\n          $.extend(functions, {\r\n            next: openSub,\r\n            previous: closeSub,\r\n            down: nextSibling,\r\n            up: prevSibling\r\n          });\r\n        } else { // right aligned\r\n          $.extend(functions, {\r\n            next: closeSub,\r\n            previous: openSub,\r\n            down: nextSibling,\r\n            up: prevSibling\r\n          });\r\n        }\r\n      }\r\n      Foundation.Keyboard.handleKey(e, 'DropdownMenu', functions);\r\n\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adds an event handler to the body to close any dropdowns on a click.\r\n   * @function\r\n   * @private\r\n   */\r\n  _addBodyHandler() {\r\n    var $body = $(document.body),\r\n        _this = this;\r\n    $body.off('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu')\r\n         .on('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu', function(e) {\r\n           var $link = _this.$element.find(e.target);\r\n           if ($link.length) { return; }\r\n\r\n           _this._hide();\r\n           $body.off('mouseup.zf.dropdownmenu touchend.zf.dropdownmenu');\r\n         });\r\n  }\r\n\r\n  /**\r\n   * Opens a dropdown pane, and checks for collisions first.\r\n   * @param {jQuery} $sub - ul element that is a submenu to show\r\n   * @function\r\n   * @private\r\n   * @fires DropdownMenu#show\r\n   */\r\n  _show($sub) {\r\n    var idx = this.$tabs.index(this.$tabs.filter(function(i, el) {\r\n      return $(el).find($sub).length > 0;\r\n    }));\r\n    var $sibs = $sub.parent('li.is-dropdown-submenu-parent').siblings('li.is-dropdown-submenu-parent');\r\n    this._hide($sibs, idx);\r\n    $sub.css('visibility', 'hidden').addClass('js-dropdown-active').attr({'aria-hidden': false})\r\n        .parent('li.is-dropdown-submenu-parent').addClass('is-active')\r\n        .attr({'aria-expanded': true});\r\n    var clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\r\n    if (!clear) {\r\n      var oldClass = this.options.alignment === 'left' ? '-right' : '-left',\r\n          $parentLi = $sub.parent('.is-dropdown-submenu-parent');\r\n      $parentLi.removeClass(`opens${oldClass}`).addClass(`opens-${this.options.alignment}`);\r\n      clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\r\n      if (!clear) {\r\n        $parentLi.removeClass(`opens-${this.options.alignment}`).addClass('opens-inner');\r\n      }\r\n      this.changed = true;\r\n    }\r\n    $sub.css('visibility', '');\r\n    if (this.options.closeOnClick) { this._addBodyHandler(); }\r\n    /**\r\n     * Fires when the new dropdown pane is visible.\r\n     * @event DropdownMenu#show\r\n     */\r\n    this.$element.trigger('show.zf.dropdownmenu', [$sub]);\r\n  }\r\n\r\n  /**\r\n   * Hides a single, currently open dropdown pane, if passed a parameter, otherwise, hides everything.\r\n   * @function\r\n   * @param {jQuery} $elem - element with a submenu to hide\r\n   * @param {Number} idx - index of the $tabs collection to hide\r\n   * @private\r\n   */\r\n  _hide($elem, idx) {\r\n    var $toClose;\r\n    if ($elem && $elem.length) {\r\n      $toClose = $elem;\r\n    } else if (idx !== undefined) {\r\n      $toClose = this.$tabs.not(function(i, el) {\r\n        return i === idx;\r\n      });\r\n    }\r\n    else {\r\n      $toClose = this.$element;\r\n    }\r\n    var somethingToClose = $toClose.hasClass('is-active') || $toClose.find('.is-active').length > 0;\r\n\r\n    if (somethingToClose) {\r\n      $toClose.find('li.is-active').add($toClose).attr({\r\n        'aria-expanded': false,\r\n        'data-is-click': false\r\n      }).removeClass('is-active');\r\n\r\n      $toClose.find('ul.js-dropdown-active').attr({\r\n        'aria-hidden': true\r\n      }).removeClass('js-dropdown-active');\r\n\r\n      if (this.changed || $toClose.find('opens-inner').length) {\r\n        var oldClass = this.options.alignment === 'left' ? 'right' : 'left';\r\n        $toClose.find('li.is-dropdown-submenu-parent').add($toClose)\r\n                .removeClass(`opens-inner opens-${this.options.alignment}`)\r\n                .addClass(`opens-${oldClass}`);\r\n        this.changed = false;\r\n      }\r\n      /**\r\n       * Fires when the open menus are closed.\r\n       * @event DropdownMenu#hide\r\n       */\r\n      this.$element.trigger('hide.zf.dropdownmenu', [$toClose]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroys the plugin.\r\n   * @function\r\n   */\r\n  destroy() {\r\n    this.$menuItems.off('.zf.dropdownmenu').removeAttr('data-is-click')\r\n        .removeClass('is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner');\r\n    $(document.body).off('.zf.dropdownmenu');\r\n    Foundation.Nest.Burn(this.$element, 'dropdown');\r\n    Foundation.unregisterPlugin(this);\r\n  }\r\n}\r\n\r\n/**\r\n * Default settings for plugin\r\n */\r\nDropdownMenu.defaults = {\r\n  /**\r\n   * Disallows hover events from opening submenus\r\n   * @option\r\n   * @example false\r\n   */\r\n  disableHover: false,\r\n  /**\r\n   * Allow a submenu to automatically close on a mouseleave event, if not clicked open.\r\n   * @option\r\n   * @example true\r\n   */\r\n  autoclose: true,\r\n  /**\r\n   * Amount of time to delay opening a submenu on hover event.\r\n   * @option\r\n   * @example 50\r\n   */\r\n  hoverDelay: 50,\r\n  /**\r\n   * Allow a submenu to open/remain open on parent click event. Allows cursor to move away from menu.\r\n   * @option\r\n   * @example true\r\n   */\r\n  clickOpen: false,\r\n  /**\r\n   * Amount of time to delay closing a submenu on a mouseleave event.\r\n   * @option\r\n   * @example 500\r\n   */\r\n\r\n  closingTime: 500,\r\n  /**\r\n   * Position of the menu relative to what direction the submenus should open. Handled by JS.\r\n   * @option\r\n   * @example 'left'\r\n   */\r\n  alignment: 'left',\r\n  /**\r\n   * Allow clicks on the body to close any open submenus.\r\n   * @option\r\n   * @example true\r\n   */\r\n  closeOnClick: true,\r\n  /**\r\n   * Class applied to vertical oriented menus, Foundation default is `vertical`. Update this if using your own class.\r\n   * @option\r\n   * @example 'vertical'\r\n   */\r\n  verticalClass: 'vertical',\r\n  /**\r\n   * Class applied to right-side oriented menus, Foundation default is `align-right`. Update this if using your own class.\r\n   * @option\r\n   * @example 'align-right'\r\n   */\r\n  rightClass: 'align-right',\r\n  /**\r\n   * Boolean to force overide the clicking of links to perform default action, on second touch event for mobile.\r\n   * @option\r\n   * @example false\r\n   */\r\n  forceFollow: true\r\n};\r\n\r\n// Window exports\r\nFoundation.plugin(DropdownMenu, 'DropdownMenu');\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n/**\r\n * OffCanvas module.\r\n * @module foundation.offcanvas\r\n * @requires foundation.util.mediaQuery\r\n * @requires foundation.util.triggers\r\n * @requires foundation.util.motion\r\n */\r\n\r\nclass OffCanvas {\r\n  /**\r\n   * Creates a new instance of an off-canvas wrapper.\r\n   * @class\r\n   * @fires OffCanvas#init\r\n   * @param {Object} element - jQuery object to initialize.\r\n   * @param {Object} options - Overrides to the default plugin settings.\r\n   */\r\n  constructor(element, options) {\r\n    this.$element = element;\r\n    this.options = $.extend({}, OffCanvas.defaults, this.$element.data(), options);\r\n    this.$lastTrigger = $();\r\n    this.$triggers = $();\r\n\r\n    this._init();\r\n    this._events();\r\n\r\n    Foundation.registerPlugin(this, 'OffCanvas');\r\n  }\r\n\r\n  /**\r\n   * Initializes the off-canvas wrapper by adding the exit overlay (if needed).\r\n   * @function\r\n   * @private\r\n   */\r\n  _init() {\r\n    var id = this.$element.attr('id');\r\n\r\n    this.$element.attr('aria-hidden', 'true');\r\n\r\n    // Find triggers that affect this element and add aria-expanded to them\r\n    this.$triggers = $(document)\r\n      .find('[data-open=\"'+id+'\"], [data-close=\"'+id+'\"], [data-toggle=\"'+id+'\"]')\r\n      .attr('aria-expanded', 'false')\r\n      .attr('aria-controls', id);\r\n\r\n    // Add a close trigger over the body if necessary\r\n    if (this.options.closeOnClick) {\r\n      if ($('.js-off-canvas-exit').length) {\r\n        this.$exiter = $('.js-off-canvas-exit');\r\n      } else {\r\n        var exiter = document.createElement('div');\r\n        exiter.setAttribute('class', 'js-off-canvas-exit');\r\n        $('[data-off-canvas-content]').append(exiter);\r\n\r\n        this.$exiter = $(exiter);\r\n      }\r\n    }\r\n\r\n    this.options.isRevealed = this.options.isRevealed || new RegExp(this.options.revealClass, 'g').test(this.$element[0].className);\r\n\r\n    if (this.options.isRevealed) {\r\n      this.options.revealOn = this.options.revealOn || this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split('-')[2];\r\n      this._setMQChecker();\r\n    }\r\n    if (!this.options.transitionTime) {\r\n      this.options.transitionTime = parseFloat(window.getComputedStyle($('[data-off-canvas-wrapper]')[0]).transitionDuration) * 1000;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds event handlers to the off-canvas wrapper and the exit overlay.\r\n   * @function\r\n   * @private\r\n   */\r\n  _events() {\r\n    this.$element.off('.zf.trigger .zf.offcanvas').on({\r\n      'open.zf.trigger': this.open.bind(this),\r\n      'close.zf.trigger': this.close.bind(this),\r\n      'toggle.zf.trigger': this.toggle.bind(this),\r\n      'keydown.zf.offcanvas': this._handleKeyboard.bind(this)\r\n    });\r\n\r\n    if (this.options.closeOnClick && this.$exiter.length) {\r\n      this.$exiter.on({'click.zf.offcanvas': this.close.bind(this)});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies event listener for elements that will reveal at certain breakpoints.\r\n   * @private\r\n   */\r\n  _setMQChecker() {\r\n    var _this = this;\r\n\r\n    $(window).on('changed.zf.mediaquery', function() {\r\n      if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\r\n        _this.reveal(true);\r\n      } else {\r\n        _this.reveal(false);\r\n      }\r\n    }).one('load.zf.offcanvas', function() {\r\n      if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\r\n        _this.reveal(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handles the revealing/hiding the off-canvas at breakpoints, not the same as open.\r\n   * @param {Boolean} isRevealed - true if element should be revealed.\r\n   * @function\r\n   */\r\n  reveal(isRevealed) {\r\n    var $closer = this.$element.find('[data-close]');\r\n    if (isRevealed) {\r\n      this.close();\r\n      this.isRevealed = true;\r\n      // if (!this.options.forceTop) {\r\n      //   var scrollPos = parseInt(window.pageYOffset);\r\n      //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\r\n      // }\r\n      // if (this.options.isSticky) { this._stick(); }\r\n      this.$element.off('open.zf.trigger toggle.zf.trigger');\r\n      if ($closer.length) { $closer.hide(); }\r\n    } else {\r\n      this.isRevealed = false;\r\n      // if (this.options.isSticky || !this.options.forceTop) {\r\n      //   this.$element[0].style.transform = '';\r\n      //   $(window).off('scroll.zf.offcanvas');\r\n      // }\r\n      this.$element.on({\r\n        'open.zf.trigger': this.open.bind(this),\r\n        'toggle.zf.trigger': this.toggle.bind(this)\r\n      });\r\n      if ($closer.length) {\r\n        $closer.show();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the off-canvas menu.\r\n   * @function\r\n   * @param {Object} event - Event object passed from listener.\r\n   * @param {jQuery} trigger - element that triggered the off-canvas to open.\r\n   * @fires OffCanvas#opened\r\n   */\r\n  open(event, trigger) {\r\n    if (this.$element.hasClass('is-open') || this.isRevealed) { return; }\r\n    var _this = this,\r\n        $body = $(document.body);\r\n\r\n    if (this.options.forceTop) {\r\n      $('body').scrollTop(0);\r\n    }\r\n    // window.pageYOffset = 0;\r\n\r\n    // if (!this.options.forceTop) {\r\n    //   var scrollPos = parseInt(window.pageYOffset);\r\n    //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\r\n    //   if (this.$exiter.length) {\r\n    //     this.$exiter[0].style.transform = 'translate(0,' + scrollPos + 'px)';\r\n    //   }\r\n    // }\r\n    /**\r\n     * Fires when the off-canvas menu opens.\r\n     * @event OffCanvas#opened\r\n     */\r\n    Foundation.Move(this.options.transitionTime, this.$element, function() {\r\n      $('[data-off-canvas-wrapper]').addClass('is-off-canvas-open is-open-'+ _this.options.position);\r\n\r\n      _this.$element\r\n        .addClass('is-open')\r\n\r\n      // if (_this.options.isSticky) {\r\n      //   _this._stick();\r\n      // }\r\n    });\r\n\r\n    this.$triggers.attr('aria-expanded', 'true');\r\n    this.$element.attr('aria-hidden', 'false')\r\n        .trigger('opened.zf.offcanvas');\r\n\r\n    if (this.options.closeOnClick) {\r\n      this.$exiter.addClass('is-visible');\r\n    }\r\n\r\n    if (trigger) {\r\n      this.$lastTrigger = trigger;\r\n    }\r\n\r\n    if (this.options.autoFocus) {\r\n      this.$element.one(Foundation.transitionend(this.$element), function() {\r\n        _this.$element.find('a, button').eq(0).focus();\r\n      });\r\n    }\r\n\r\n    if (this.options.trapFocus) {\r\n      $('[data-off-canvas-content]').attr('tabindex', '-1');\r\n      this._trapFocus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Traps focus within the offcanvas on open.\r\n   * @private\r\n   */\r\n  _trapFocus() {\r\n    var focusable = Foundation.Keyboard.findFocusable(this.$element),\r\n        first = focusable.eq(0),\r\n        last = focusable.eq(-1);\r\n\r\n    focusable.off('.zf.offcanvas').on('keydown.zf.offcanvas', function(e) {\r\n      if (e.which === 9 || e.keycode === 9) {\r\n        if (e.target === last[0] && !e.shiftKey) {\r\n          e.preventDefault();\r\n          first.focus();\r\n        }\r\n        if (e.target === first[0] && e.shiftKey) {\r\n          e.preventDefault();\r\n          last.focus();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Allows the offcanvas to appear sticky utilizing translate properties.\r\n   * @private\r\n   */\r\n  // OffCanvas.prototype._stick = function() {\r\n  //   var elStyle = this.$element[0].style;\r\n  //\r\n  //   if (this.options.closeOnClick) {\r\n  //     var exitStyle = this.$exiter[0].style;\r\n  //   }\r\n  //\r\n  //   $(window).on('scroll.zf.offcanvas', function(e) {\r\n  //     console.log(e);\r\n  //     var pageY = window.pageYOffset;\r\n  //     elStyle.transform = 'translate(0,' + pageY + 'px)';\r\n  //     if (exitStyle !== undefined) { exitStyle.transform = 'translate(0,' + pageY + 'px)'; }\r\n  //   });\r\n  //   // this.$element.trigger('stuck.zf.offcanvas');\r\n  // };\r\n  /**\r\n   * Closes the off-canvas menu.\r\n   * @function\r\n   * @param {Function} cb - optional cb to fire after closure.\r\n   * @fires OffCanvas#closed\r\n   */\r\n  close(cb) {\r\n    if (!this.$element.hasClass('is-open') || this.isRevealed) { return; }\r\n\r\n    var _this = this;\r\n\r\n    //  Foundation.Move(this.options.transitionTime, this.$element, function() {\r\n    $('[data-off-canvas-wrapper]').removeClass(`is-off-canvas-open is-open-${_this.options.position}`);\r\n    _this.$element.removeClass('is-open');\r\n      // Foundation._reflow();\r\n    // });\r\n    this.$element.attr('aria-hidden', 'true')\r\n      /**\r\n       * Fires when the off-canvas menu opens.\r\n       * @event OffCanvas#closed\r\n       */\r\n        .trigger('closed.zf.offcanvas');\r\n    // if (_this.options.isSticky || !_this.options.forceTop) {\r\n    //   setTimeout(function() {\r\n    //     _this.$element[0].style.transform = '';\r\n    //     $(window).off('scroll.zf.offcanvas');\r\n    //   }, this.options.transitionTime);\r\n    // }\r\n    if (this.options.closeOnClick) {\r\n      this.$exiter.removeClass('is-visible');\r\n    }\r\n\r\n    this.$triggers.attr('aria-expanded', 'false');\r\n    if (this.options.trapFocus) {\r\n      $('[data-off-canvas-content]').removeAttr('tabindex');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles the off-canvas menu open or closed.\r\n   * @function\r\n   * @param {Object} event - Event object passed from listener.\r\n   * @param {jQuery} trigger - element that triggered the off-canvas to open.\r\n   */\r\n  toggle(event, trigger) {\r\n    if (this.$element.hasClass('is-open')) {\r\n      this.close(event, trigger);\r\n    }\r\n    else {\r\n      this.open(event, trigger);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles keyboard input when detected. When the escape key is pressed, the off-canvas menu closes, and focus is restored to the element that opened the menu.\r\n   * @function\r\n   * @private\r\n   */\r\n  _handleKeyboard(event) {\r\n    if (event.which !== 27) return;\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    this.close();\r\n    this.$lastTrigger.focus();\r\n  }\r\n\r\n  /**\r\n   * Destroys the offcanvas plugin.\r\n   * @function\r\n   */\r\n  destroy() {\r\n    this.close();\r\n    this.$element.off('.zf.trigger .zf.offcanvas');\r\n    this.$exiter.off('.zf.offcanvas');\r\n\r\n    Foundation.unregisterPlugin(this);\r\n  }\r\n}\r\n\r\nOffCanvas.defaults = {\r\n  /**\r\n   * Allow the user to click outside of the menu to close it.\r\n   * @option\r\n   * @example true\r\n   */\r\n  closeOnClick: true,\r\n\r\n  /**\r\n   * Amount of time in ms the open and close transition requires. If none selected, pulls from body style.\r\n   * @option\r\n   * @example 500\r\n   */\r\n  transitionTime: 0,\r\n\r\n  /**\r\n   * Direction the offcanvas opens from. Determines class applied to body.\r\n   * @option\r\n   * @example left\r\n   */\r\n  position: 'left',\r\n\r\n  /**\r\n   * Force the page to scroll to top on open.\r\n   * @option\r\n   * @example true\r\n   */\r\n  forceTop: true,\r\n\r\n  /**\r\n   * Allow the offcanvas to remain open for certain breakpoints.\r\n   * @option\r\n   * @example false\r\n   */\r\n  isRevealed: false,\r\n\r\n  /**\r\n   * Breakpoint at which to reveal. JS will use a RegExp to target standard classes, if changing classnames, pass your class with the `revealClass` option.\r\n   * @option\r\n   * @example reveal-for-large\r\n   */\r\n  revealOn: null,\r\n\r\n  /**\r\n   * Force focus to the offcanvas on open. If true, will focus the opening trigger on close.\r\n   * @option\r\n   * @example true\r\n   */\r\n  autoFocus: true,\r\n\r\n  /**\r\n   * Class used to force an offcanvas to remain open. Foundation defaults for this are `reveal-for-large` & `reveal-for-medium`.\r\n   * @option\r\n   * TODO improve the regex testing for this.\r\n   * @example reveal-for-large\r\n   */\r\n  revealClass: 'reveal-for-',\r\n\r\n  /**\r\n   * Triggers optional focus trapping when opening an offcanvas. Sets tabindex of [data-off-canvas-content] to -1 for accessibility purposes.\r\n   * @option\r\n   * @example true\r\n   */\r\n  trapFocus: false\r\n}\r\n\r\n// Window exports\r\nFoundation.plugin(OffCanvas, 'OffCanvas');\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n/**\r\n * Sticky module.\r\n * @module foundation.sticky\r\n * @requires foundation.util.triggers\r\n * @requires foundation.util.mediaQuery\r\n */\r\n\r\nclass Sticky {\r\n  /**\r\n   * Creates a new instance of a sticky thing.\r\n   * @class\r\n   * @param {jQuery} element - jQuery object to make sticky.\r\n   * @param {Object} options - options object passed when creating the element programmatically.\r\n   */\r\n  constructor(element, options) {\r\n    this.$element = element;\r\n    this.options = $.extend({}, Sticky.defaults, this.$element.data(), options);\r\n\r\n    this._init();\r\n\r\n    Foundation.registerPlugin(this, 'Sticky');\r\n  }\r\n\r\n  /**\r\n   * Initializes the sticky element by adding classes, getting/setting dimensions, breakpoints and attributes\r\n   * @function\r\n   * @private\r\n   */\r\n  _init() {\r\n    var $parent = this.$element.parent('[data-sticky-container]'),\r\n        id = this.$element[0].id || Foundation.GetYoDigits(6, 'sticky'),\r\n        _this = this;\r\n\r\n    if (!$parent.length) {\r\n      this.wasWrapped = true;\r\n    }\r\n    this.$container = $parent.length ? $parent : $(this.options.container).wrapInner(this.$element);\r\n    this.$container.addClass(this.options.containerClass);\r\n\r\n    this.$element.addClass(this.options.stickyClass)\r\n                 .attr({'data-resize': id});\r\n\r\n    this.scrollCount = this.options.checkEvery;\r\n    this.isStuck = false;\r\n    $(window).one('load.zf.sticky', function(){\r\n      if(_this.options.anchor !== ''){\r\n        _this.$anchor = $('#' + _this.options.anchor);\r\n      }else{\r\n        _this._parsePoints();\r\n      }\r\n\r\n      _this._setSizes(function(){\r\n        _this._calc(false);\r\n      });\r\n      _this._events(id.split('-').reverse().join('-'));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * If using multiple elements as anchors, calculates the top and bottom pixel values the sticky thing should stick and unstick on.\r\n   * @function\r\n   * @private\r\n   */\r\n  _parsePoints() {\r\n    var top = this.options.topAnchor == \"\" ? 1 : this.options.topAnchor,\r\n        btm = this.options.btmAnchor== \"\" ? document.documentElement.scrollHeight : this.options.btmAnchor,\r\n        pts = [top, btm],\r\n        breaks = {};\r\n    for (var i = 0, len = pts.length; i < len && pts[i]; i++) {\r\n      var pt;\r\n      if (typeof pts[i] === 'number') {\r\n        pt = pts[i];\r\n      } else {\r\n        var place = pts[i].split(':'),\r\n            anchor = $(`#${place[0]}`);\r\n\r\n        pt = anchor.offset().top;\r\n        if (place[1] && place[1].toLowerCase() === 'bottom') {\r\n          pt += anchor[0].getBoundingClientRect().height;\r\n        }\r\n      }\r\n      breaks[i] = pt;\r\n    }\r\n\r\n\r\n    this.points = breaks;\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Adds event handlers for the scrolling element.\r\n   * @private\r\n   * @param {String} id - psuedo-random id for unique scroll event listener.\r\n   */\r\n  _events(id) {\r\n    var _this = this,\r\n        scrollListener = this.scrollListener = `scroll.zf.${id}`;\r\n    if (this.isOn) { return; }\r\n    if (this.canStick) {\r\n      this.isOn = true;\r\n      $(window).off(scrollListener)\r\n               .on(scrollListener, function(e) {\r\n                 if (_this.scrollCount === 0) {\r\n                   _this.scrollCount = _this.options.checkEvery;\r\n                   _this._setSizes(function() {\r\n                     _this._calc(false, window.pageYOffset);\r\n                   });\r\n                 } else {\r\n                   _this.scrollCount--;\r\n                   _this._calc(false, window.pageYOffset);\r\n                 }\r\n              });\r\n    }\r\n\r\n    this.$element.off('resizeme.zf.trigger')\r\n                 .on('resizeme.zf.trigger', function(e, el) {\r\n                     _this._setSizes(function() {\r\n                       _this._calc(false);\r\n                       if (_this.canStick) {\r\n                         if (!_this.isOn) {\r\n                           _this._events(id);\r\n                         }\r\n                       } else if (_this.isOn) {\r\n                         _this._pauseListeners(scrollListener);\r\n                       }\r\n                     });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes event handlers for scroll and change events on anchor.\r\n   * @fires Sticky#pause\r\n   * @param {String} scrollListener - unique, namespaced scroll listener attached to `window`\r\n   */\r\n  _pauseListeners(scrollListener) {\r\n    this.isOn = false;\r\n    $(window).off(scrollListener);\r\n\r\n    /**\r\n     * Fires when the plugin is paused due to resize event shrinking the view.\r\n     * @event Sticky#pause\r\n     * @private\r\n     */\r\n     this.$element.trigger('pause.zf.sticky');\r\n  }\r\n\r\n  /**\r\n   * Called on every `scroll` event and on `_init`\r\n   * fires functions based on booleans and cached values\r\n   * @param {Boolean} checkSizes - true if plugin should recalculate sizes and breakpoints.\r\n   * @param {Number} scroll - current scroll position passed from scroll event cb function. If not passed, defaults to `window.pageYOffset`.\r\n   */\r\n  _calc(checkSizes, scroll) {\r\n    if (checkSizes) { this._setSizes(); }\r\n\r\n    if (!this.canStick) {\r\n      if (this.isStuck) {\r\n        this._removeSticky(true);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (!scroll) { scroll = window.pageYOffset; }\r\n\r\n    if (scroll >= this.topPoint) {\r\n      if (scroll <= this.bottomPoint) {\r\n        if (!this.isStuck) {\r\n          this._setSticky();\r\n        }\r\n      } else {\r\n        if (this.isStuck) {\r\n          this._removeSticky(false);\r\n        }\r\n      }\r\n    } else {\r\n      if (this.isStuck) {\r\n        this._removeSticky(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Causes the $element to become stuck.\r\n   * Adds `position: fixed;`, and helper classes.\r\n   * @fires Sticky#stuckto\r\n   * @function\r\n   * @private\r\n   */\r\n  _setSticky() {\r\n    var _this = this,\r\n        stickTo = this.options.stickTo,\r\n        mrgn = stickTo === 'top' ? 'marginTop' : 'marginBottom',\r\n        notStuckTo = stickTo === 'top' ? 'bottom' : 'top',\r\n        css = {};\r\n\r\n    css[mrgn] = `${this.options[mrgn]}em`;\r\n    css[stickTo] = 0;\r\n    css[notStuckTo] = 'auto';\r\n    css['left'] = this.$container.offset().left + parseInt(window.getComputedStyle(this.$container[0])[\"padding-left\"], 10);\r\n    this.isStuck = true;\r\n    this.$element.removeClass(`is-anchored is-at-${notStuckTo}`)\r\n                 .addClass(`is-stuck is-at-${stickTo}`)\r\n                 .css(css)\r\n                 /**\r\n                  * Fires when the $element has become `position: fixed;`\r\n                  * Namespaced to `top` or `bottom`, e.g. `sticky.zf.stuckto:top`\r\n                  * @event Sticky#stuckto\r\n                  */\r\n                 .trigger(`sticky.zf.stuckto:${stickTo}`);\r\n    this.$element.on(\"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd\", function() {\r\n      _this._setSizes();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Causes the $element to become unstuck.\r\n   * Removes `position: fixed;`, and helper classes.\r\n   * Adds other helper classes.\r\n   * @param {Boolean} isTop - tells the function if the $element should anchor to the top or bottom of its $anchor element.\r\n   * @fires Sticky#unstuckfrom\r\n   * @private\r\n   */\r\n  _removeSticky(isTop) {\r\n    var stickTo = this.options.stickTo,\r\n        stickToTop = stickTo === 'top',\r\n        css = {},\r\n        anchorPt = (this.points ? this.points[1] - this.points[0] : this.anchorHeight) - this.elemHeight,\r\n        mrgn = stickToTop ? 'marginTop' : 'marginBottom',\r\n        notStuckTo = stickToTop ? 'bottom' : 'top',\r\n        topOrBottom = isTop ? 'top' : 'bottom';\r\n\r\n    css[mrgn] = 0;\r\n\r\n    css['bottom'] = 'auto';\r\n    if(isTop) {\r\n      css['top'] = 0;\r\n    } else {\r\n      css['top'] = anchorPt;\r\n    }\r\n\r\n    css['left'] = '';\r\n    this.isStuck = false;\r\n    this.$element.removeClass(`is-stuck is-at-${stickTo}`)\r\n                 .addClass(`is-anchored is-at-${topOrBottom}`)\r\n                 .css(css)\r\n                 /**\r\n                  * Fires when the $element has become anchored.\r\n                  * Namespaced to `top` or `bottom`, e.g. `sticky.zf.unstuckfrom:bottom`\r\n                  * @event Sticky#unstuckfrom\r\n                  */\r\n                 .trigger(`sticky.zf.unstuckfrom:${topOrBottom}`);\r\n  }\r\n\r\n  /**\r\n   * Sets the $element and $container sizes for plugin.\r\n   * Calls `_setBreakPoints`.\r\n   * @param {Function} cb - optional callback function to fire on completion of `_setBreakPoints`.\r\n   * @private\r\n   */\r\n  _setSizes(cb) {\r\n    this.canStick = Foundation.MediaQuery.atLeast(this.options.stickyOn);\r\n    if (!this.canStick) { cb(); }\r\n    var _this = this,\r\n        newElemWidth = this.$container[0].getBoundingClientRect().width,\r\n        comp = window.getComputedStyle(this.$container[0]),\r\n        pdng = parseInt(comp['padding-right'], 10);\r\n\r\n    if (this.$anchor && this.$anchor.length) {\r\n      this.anchorHeight = this.$anchor[0].getBoundingClientRect().height;\r\n    } else {\r\n      this._parsePoints();\r\n    }\r\n\r\n    this.$element.css({\r\n      'max-width': `${newElemWidth - pdng}px`\r\n    });\r\n\r\n    var newContainerHeight = this.$element[0].getBoundingClientRect().height || this.containerHeight;\r\n    if (this.$element.css(\"display\") == \"none\") {\r\n      newContainerHeight = 0;\r\n    }\r\n    this.containerHeight = newContainerHeight;\r\n    this.$container.css({\r\n      height: newContainerHeight\r\n    });\r\n    this.elemHeight = newContainerHeight;\r\n\r\n  \tif (this.isStuck) {\r\n  \t\tthis.$element.css({\"left\":this.$container.offset().left + parseInt(comp['padding-left'], 10)});\r\n  \t}\r\n\r\n    this._setBreakPoints(newContainerHeight, function() {\r\n      if (cb) { cb(); }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sets the upper and lower breakpoints for the element to become sticky/unsticky.\r\n   * @param {Number} elemHeight - px value for sticky.$element height, calculated by `_setSizes`.\r\n   * @param {Function} cb - optional callback function to be called on completion.\r\n   * @private\r\n   */\r\n  _setBreakPoints(elemHeight, cb) {\r\n    if (!this.canStick) {\r\n      if (cb) { cb(); }\r\n      else { return false; }\r\n    }\r\n    var mTop = emCalc(this.options.marginTop),\r\n        mBtm = emCalc(this.options.marginBottom),\r\n        topPoint = this.points ? this.points[0] : this.$anchor.offset().top,\r\n        bottomPoint = this.points ? this.points[1] : topPoint + this.anchorHeight,\r\n        // topPoint = this.$anchor.offset().top || this.points[0],\r\n        // bottomPoint = topPoint + this.anchorHeight || this.points[1],\r\n        winHeight = window.innerHeight;\r\n\r\n    if (this.options.stickTo === 'top') {\r\n      topPoint -= mTop;\r\n      bottomPoint -= (elemHeight + mTop);\r\n    } else if (this.options.stickTo === 'bottom') {\r\n      topPoint -= (winHeight - (elemHeight + mBtm));\r\n      bottomPoint -= (winHeight - mBtm);\r\n    } else {\r\n      //this would be the stickTo: both option... tricky\r\n    }\r\n\r\n    this.topPoint = topPoint;\r\n    this.bottomPoint = bottomPoint;\r\n\r\n    if (cb) { cb(); }\r\n  }\r\n\r\n  /**\r\n   * Destroys the current sticky element.\r\n   * Resets the element to the top position first.\r\n   * Removes event listeners, JS-added css properties and classes, and unwraps the $element if the JS added the $container.\r\n   * @function\r\n   */\r\n  destroy() {\r\n    this._removeSticky(true);\r\n\r\n    this.$element.removeClass(`${this.options.stickyClass} is-anchored is-at-top`)\r\n                 .css({\r\n                   height: '',\r\n                   top: '',\r\n                   bottom: '',\r\n                   'max-width': ''\r\n                 })\r\n                 .off('resizeme.zf.trigger');\r\n    if (this.$anchor && this.$anchor.length) {\r\n      this.$anchor.off('change.zf.sticky');\r\n    }\r\n    $(window).off(this.scrollListener);\r\n\r\n    if (this.wasWrapped) {\r\n      this.$element.unwrap();\r\n    } else {\r\n      this.$container.removeClass(this.options.containerClass)\r\n                     .css({\r\n                       height: ''\r\n                     });\r\n    }\r\n    Foundation.unregisterPlugin(this);\r\n  }\r\n}\r\n\r\nSticky.defaults = {\r\n  /**\r\n   * Customizable container template. Add your own classes for styling and sizing.\r\n   * @option\r\n   * @example '&lt;div data-sticky-container class=\"small-6 columns\"&gt;&lt;/div&gt;'\r\n   */\r\n  container: '<div data-sticky-container></div>',\r\n  /**\r\n   * Location in the view the element sticks to.\r\n   * @option\r\n   * @example 'top'\r\n   */\r\n  stickTo: 'top',\r\n  /**\r\n   * If anchored to a single element, the id of that element.\r\n   * @option\r\n   * @example 'exampleId'\r\n   */\r\n  anchor: '',\r\n  /**\r\n   * If using more than one element as anchor points, the id of the top anchor.\r\n   * @option\r\n   * @example 'exampleId:top'\r\n   */\r\n  topAnchor: '',\r\n  /**\r\n   * If using more than one element as anchor points, the id of the bottom anchor.\r\n   * @option\r\n   * @example 'exampleId:bottom'\r\n   */\r\n  btmAnchor: '',\r\n  /**\r\n   * Margin, in `em`'s to apply to the top of the element when it becomes sticky.\r\n   * @option\r\n   * @example 1\r\n   */\r\n  marginTop: 1,\r\n  /**\r\n   * Margin, in `em`'s to apply to the bottom of the element when it becomes sticky.\r\n   * @option\r\n   * @example 1\r\n   */\r\n  marginBottom: 1,\r\n  /**\r\n   * Breakpoint string that is the minimum screen size an element should become sticky.\r\n   * @option\r\n   * @example 'medium'\r\n   */\r\n  stickyOn: 'medium',\r\n  /**\r\n   * Class applied to sticky element, and removed on destruction. Foundation defaults to `sticky`.\r\n   * @option\r\n   * @example 'sticky'\r\n   */\r\n  stickyClass: 'sticky',\r\n  /**\r\n   * Class applied to sticky container. Foundation defaults to `sticky-container`.\r\n   * @option\r\n   * @example 'sticky-container'\r\n   */\r\n  containerClass: 'sticky-container',\r\n  /**\r\n   * Number of scroll events between the plugin's recalculating sticky points. Setting it to `0` will cause it to recalc every scroll event, setting it to `-1` will prevent recalc on scroll.\r\n   * @option\r\n   * @example 50\r\n   */\r\n  checkEvery: -1\r\n};\r\n\r\n/**\r\n * Helper function to calculate em values\r\n * @param Number {em} - number of em's to calculate into pixels\r\n */\r\nfunction emCalc(em) {\r\n  return parseInt(window.getComputedStyle(document.body, null).fontSize, 10) * em;\r\n}\r\n\r\n// Window exports\r\nFoundation.plugin(Sticky, 'Sticky');\r\n\r\n}(jQuery);\r\n","'use strict';\r\n\r\n!function($) {\r\n\r\n/**\r\n * Magellan module.\r\n * @module foundation.magellan\r\n */\r\n\r\nclass Magellan {\r\n  /**\r\n   * Creates a new instance of Magellan.\r\n   * @class\r\n   * @fires Magellan#init\r\n   * @param {Object} element - jQuery object to add the trigger to.\r\n   * @param {Object} options - Overrides to the default plugin settings.\r\n   */\r\n  constructor(element, options) {\r\n    this.$element = element;\r\n    this.options  = $.extend({}, Magellan.defaults, this.$element.data(), options);\r\n\r\n    this._init();\r\n\r\n    Foundation.registerPlugin(this, 'Magellan');\r\n  }\r\n\r\n  /**\r\n   * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\r\n   * @private\r\n   */\r\n  _init() {\r\n    var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan');\r\n    var _this = this;\r\n    this.$targets = $('[data-magellan-target]');\r\n    this.$links = this.$element.find('a');\r\n    this.$element.attr({\r\n      'data-resize': id,\r\n      'data-scroll': id,\r\n      'id': id\r\n    });\r\n    this.$active = $();\r\n    this.scrollPos = parseInt(window.pageYOffset, 10);\r\n\r\n    this._events();\r\n  }\r\n\r\n  /**\r\n   * Calculates an array of pixel values that are the demarcation lines between locations on the page.\r\n   * Can be invoked if new elements are added or the size of a location changes.\r\n   * @function\r\n   */\r\n  calcPoints() {\r\n    var _this = this,\r\n        body = document.body,\r\n        html = document.documentElement;\r\n\r\n    this.points = [];\r\n    this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\r\n    this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\r\n\r\n    this.$targets.each(function(){\r\n      var $tar = $(this),\r\n          pt = Math.round($tar.offset().top - _this.options.threshold);\r\n      $tar.targetPoint = pt;\r\n      _this.points.push(pt);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initializes events for Magellan.\r\n   * @private\r\n   */\r\n  _events() {\r\n    var _this = this,\r\n        $body = $('html, body'),\r\n        opts = {\r\n          duration: _this.options.animationDuration,\r\n          easing:   _this.options.animationEasing\r\n        };\r\n    $(window).one('load', function(){\r\n      if(_this.options.deepLinking){\r\n        if(location.hash){\r\n          _this.scrollToLoc(location.hash);\r\n        }\r\n      }\r\n      _this.calcPoints();\r\n      _this._updateActive();\r\n    });\r\n\r\n    this.$element.on({\r\n      'resizeme.zf.trigger': this.reflow.bind(this),\r\n      'scrollme.zf.trigger': this._updateActive.bind(this)\r\n    }).on('click.zf.magellan', 'a[href^=\"#\"]', function(e) {\r\n        e.preventDefault();\r\n        var arrival   = this.getAttribute('href');\r\n        _this.scrollToLoc(arrival);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Function to scroll to a given location on the page.\r\n   * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\r\n   * @function\r\n   */\r\n  scrollToLoc(loc) {\r\n    var scrollPos = Math.round($(loc).offset().top - this.options.threshold / 2 - this.options.barOffset);\r\n\r\n    $('html, body').stop(true).animate({ scrollTop: scrollPos }, this.options.animationDuration, this.options.animationEasing);\r\n  }\r\n\r\n  /**\r\n   * Calls necessary functions to update Magellan upon DOM change\r\n   * @function\r\n   */\r\n  reflow() {\r\n    this.calcPoints();\r\n    this._updateActive();\r\n  }\r\n\r\n  /**\r\n   * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\r\n   * @private\r\n   * @function\r\n   * @fires Magellan#update\r\n   */\r\n  _updateActive(/*evt, elem, scrollPos*/) {\r\n    var winPos = /*scrollPos ||*/ parseInt(window.pageYOffset, 10),\r\n        curIdx;\r\n\r\n    if(winPos + this.winHeight === this.docHeight){ curIdx = this.points.length - 1; }\r\n    else if(winPos < this.points[0]){ curIdx = 0; }\r\n    else{\r\n      var isDown = this.scrollPos < winPos,\r\n          _this = this,\r\n          curVisible = this.points.filter(function(p, i){\r\n            return isDown ? p - _this.options.barOffset <= winPos : p - _this.options.barOffset - _this.options.threshold <= winPos;\r\n          });\r\n      curIdx = curVisible.length ? curVisible.length - 1 : 0;\r\n    }\r\n\r\n    this.$active.removeClass(this.options.activeClass);\r\n    this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\r\n\r\n    if(this.options.deepLinking){\r\n      var hash = this.$active[0].getAttribute('href');\r\n      if(window.history.pushState){\r\n        window.history.pushState(null, null, hash);\r\n      }else{\r\n        window.location.hash = hash;\r\n      }\r\n    }\r\n\r\n    this.scrollPos = winPos;\r\n    /**\r\n     * Fires when magellan is finished updating to the new active element.\r\n     * @event Magellan#update\r\n     */\r\n    this.$element.trigger('update.zf.magellan', [this.$active]);\r\n  }\r\n\r\n  /**\r\n   * Destroys an instance of Magellan and resets the url of the window.\r\n   * @function\r\n   */\r\n  destroy() {\r\n    this.$element.off('.zf.trigger .zf.magellan')\r\n        .find(`.${this.options.activeClass}`).removeClass(this.options.activeClass);\r\n\r\n    if(this.options.deepLinking){\r\n      var hash = this.$active[0].getAttribute('href');\r\n      window.location.hash.replace(hash, '');\r\n    }\r\n\r\n    Foundation.unregisterPlugin(this);\r\n  }\r\n}\r\n\r\n/**\r\n * Default settings for plugin\r\n */\r\nMagellan.defaults = {\r\n  /**\r\n   * Amount of time, in ms, the animated scrolling should take between locations.\r\n   * @option\r\n   * @example 500\r\n   */\r\n  animationDuration: 500,\r\n  /**\r\n   * Animation style to use when scrolling between locations.\r\n   * @option\r\n   * @example 'ease-in-out'\r\n   */\r\n  animationEasing: 'linear',\r\n  /**\r\n   * Number of pixels to use as a marker for location changes.\r\n   * @option\r\n   * @example 50\r\n   */\r\n  threshold: 50,\r\n  /**\r\n   * Class applied to the active locations link on the magellan container.\r\n   * @option\r\n   * @example 'active'\r\n   */\r\n  activeClass: 'active',\r\n  /**\r\n   * Allows the script to manipulate the url of the current page, and if supported, alter the history.\r\n   * @option\r\n   * @example true\r\n   */\r\n  deepLinking: false,\r\n  /**\r\n   * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\r\n   * @option\r\n   * @example 25\r\n   */\r\n  barOffset: 0\r\n}\r\n\r\n// Window exports\r\nFoundation.plugin(Magellan, 'Magellan');\r\n\r\n}(jQuery);\r\n","$( document ).ready( function() {\r\n\r\n    $( 'body' ).scrollspy( {\r\n        target: '#pokedex_generation_nav',\r\n        offset: 40\r\n    } );\r\n    \r\n    $( document ).click( function( event ) {\r\n        var container = $( '.navbar-fixed-top' );\r\n\r\n        if ( ! container.is( event.target ) // if the target of the click isn't the container...\r\n            && container.has( event.target ).length === 0 ) { // ... nor a descendant of the container\r\n            if ( $( '.navbar-collapse.in' ).length > 0 ) {\r\n                $( '.navbar-toggle' ).trigger( 'click' );\r\n            }\r\n        }\r\n    });\r\n    \r\n    $( document ).on( 'click', '#pokedex_generation_nav a', function() {\r\n        \r\n        var gen = $( this ).attr( 'href' );\r\n        \r\n        gen = gen.replace( '#', '' ).replace( '_', '-' ); // Convert from my ID Naming Convention to my Class Naming Convention\r\n        \r\n        $( '.' + gen ).css( 'background-color', '#00FF00' );\r\n        \r\n        setTimeout( function() {\r\n            \r\n            $( '.' + gen ).removeAttr( 'style' ); // Flash the color, then remove it\r\n            \r\n        }, 750 );\r\n        \r\n    } );\r\n    \r\n    $( '[name=\"pokedex_caught\"]' ).bootstrapSwitch( {\r\n        onText: 'Caught',\r\n        offText: 'Need',\r\n    } );\r\n\r\n} );"],"sourceRoot":"/source/"}